{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, withModifiers as _withModifiers, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"flex justify-center items-center min-h-[70vh] py-12\"\n};\nconst _hoisted_2 = {\n  class: \"w-full max-w-md bg-white rounded-xl shadow-lg overflow-hidden\"\n};\nconst _hoisted_3 = {\n  class: \"p-8\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"text-red-500 text-xs mt-1\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"text-red-500 text-xs mt-1\"\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"text-red-500 text-xs mt-1\"\n};\nconst _hoisted_7 = {\n  key: 0,\n  class: \"text-red-500 text-xs mt-1\"\n};\nconst _hoisted_8 = [\"disabled\"];\nconst _hoisted_9 = {\n  key: 0\n};\nconst _hoisted_10 = {\n  key: 1,\n  class: \"flex items-center\"\n};\nconst _hoisted_11 = {\n  class: \"text-center text-sm text-gray-600\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_cache[13] || (_cache[13] = _createStaticVNode(\"<div class=\\\"text-center mb-8\\\" data-v-7874be84><div class=\\\"flex justify-center mb-4\\\" data-v-7874be84><i class=\\\"fa fa-user-plus text-indigo-600 text-4xl\\\" data-v-7874be84></i></div><h2 class=\\\"text-2xl font-bold text-gray-900\\\" data-v-7874be84>创建账户</h2><p class=\\\"text-gray-600 mt-2\\\" data-v-7874be84>加入我们的博客社区</p></div>\", 1)), _createElementVNode(\"form\", {\n    onSubmit: _cache[5] || (_cache[5] = _withModifiers((...args) => $options.handleRegister && $options.handleRegister(...args), [\"prevent\"])),\n    class: \"space-y-4\"\n  }, [_createCommentVNode(\" 用户名输入 \"), _createElementVNode(\"div\", null, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", {\n    for: \"username\",\n    class: \"block text-sm font-medium text-gray-700 mb-1\"\n  }, \"用户名\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    id: \"username\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.form.username = $event),\n    type: \"text\",\n    required: \"\",\n    class: \"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors\",\n    placeholder: \"请输入用户名\",\n    minlength: \"3\",\n    maxlength: \"30\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.username]]), $data.errors.username ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, _toDisplayString($data.errors.username), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" 邮箱输入 \"), _createElementVNode(\"div\", null, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", {\n    for: \"email\",\n    class: \"block text-sm font-medium text-gray-700 mb-1\"\n  }, \"邮箱\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    id: \"email\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.form.email = $event),\n    type: \"email\",\n    required: \"\",\n    class: \"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors\",\n    placeholder: \"请输入邮箱地址\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.email]]), $data.errors.email ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, _toDisplayString($data.errors.email), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" 密码输入 \"), _createElementVNode(\"div\", null, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", {\n    for: \"password\",\n    class: \"block text-sm font-medium text-gray-700 mb-1\"\n  }, \"密码\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    id: \"password\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.form.password = $event),\n    type: \"password\",\n    required: \"\",\n    class: \"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors\",\n    placeholder: \"请输入密码\",\n    minlength: \"6\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.password]]), $data.errors.password ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, _toDisplayString($data.errors.password), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _cache[9] || (_cache[9] = _createElementVNode(\"p\", {\n    class: \"text-gray-500 text-xs mt-1\"\n  }, \"密码至少包含6个字符\", -1 /* CACHED */))]), _createCommentVNode(\" 确认密码 \"), _createElementVNode(\"div\", null, [_cache[10] || (_cache[10] = _createElementVNode(\"label\", {\n    for: \"confirmPassword\",\n    class: \"block text-sm font-medium text-gray-700 mb-1\"\n  }, \"确认密码\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    id: \"confirmPassword\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.form.confirmPassword = $event),\n    type: \"password\",\n    required: \"\",\n    class: \"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors\",\n    placeholder: \"请再次输入密码\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.confirmPassword]]), $data.errors.confirmPassword ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, _toDisplayString($data.errors.confirmPassword), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" 注册按钮 \"), _createElementVNode(\"button\", {\n    type: \"submit\",\n    disabled: $data.isSubmitting,\n    class: \"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-md transition-colors flex justify-center items-center\"\n  }, [!$data.isSubmitting ? (_openBlock(), _createElementBlock(\"span\", _hoisted_9, \"注册\")) : (_openBlock(), _createElementBlock(\"span\", _hoisted_10, [...(_cache[11] || (_cache[11] = [_createElementVNode(\"i\", {\n    class: \"fa fa-spinner fa-spin mr-2\"\n  }, null, -1 /* CACHED */), _createTextVNode(\" 注册中... \", -1 /* CACHED */)]))]))], 8 /* PROPS */, _hoisted_8), _createCommentVNode(\" 已有账户 \"), _createElementVNode(\"div\", _hoisted_11, [_cache[12] || (_cache[12] = _createTextVNode(\" 已有账户？ \", -1 /* CACHED */)), _createElementVNode(\"a\", {\n    href: \"#\",\n    onClick: _cache[4] || (_cache[4] = _withModifiers($event => _ctx.$emit('switchToLogin'), [\"prevent\"])),\n    class: \"text-indigo-600 hover:text-indigo-700 font-medium\"\n  }, \"登录\")])], 32 /* NEED_HYDRATION */)])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","onSubmit","_cache","_withModifiers","args","$options","handleRegister","_createCommentVNode","for","id","$data","form","username","$event","type","required","placeholder","minlength","maxlength","errors","_hoisted_4","_toDisplayString","email","_hoisted_5","password","_hoisted_6","confirmPassword","_hoisted_7","disabled","isSubmitting","_hoisted_9","_hoisted_10","_hoisted_11","href","onClick","_ctx","$emit"],"sources":["/Users/yudesong/Project/Vue/blog/src/components/UserRegister.vue"],"sourcesContent":["<template>\n  <div class=\"flex justify-center items-center min-h-[70vh] py-12\">\n    <div class=\"w-full max-w-md bg-white rounded-xl shadow-lg overflow-hidden\">\n      <div class=\"p-8\">\n        <div class=\"text-center mb-8\">\n          <div class=\"flex justify-center mb-4\">\n            <i class=\"fa fa-user-plus text-indigo-600 text-4xl\"></i>\n          </div>\n          <h2 class=\"text-2xl font-bold text-gray-900\">创建账户</h2>\n          <p class=\"text-gray-600 mt-2\">加入我们的博客社区</p>\n        </div>\n        \n        <form @submit.prevent=\"handleRegister\" class=\"space-y-4\">\n          <!-- 用户名输入 -->\n          <div>\n            <label for=\"username\" class=\"block text-sm font-medium text-gray-700 mb-1\">用户名</label>\n            <input\n              id=\"username\"\n              v-model=\"form.username\"\n              type=\"text\"\n              required\n              class=\"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors\"\n              placeholder=\"请输入用户名\"\n              minlength=\"3\"\n              maxlength=\"30\"\n            >\n            <div v-if=\"errors.username\" class=\"text-red-500 text-xs mt-1\">{{ errors.username }}</div>\n          </div>\n          \n          <!-- 邮箱输入 -->\n          <div>\n            <label for=\"email\" class=\"block text-sm font-medium text-gray-700 mb-1\">邮箱</label>\n            <input\n              id=\"email\"\n              v-model=\"form.email\"\n              type=\"email\"\n              required\n              class=\"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors\"\n              placeholder=\"请输入邮箱地址\"\n            >\n            <div v-if=\"errors.email\" class=\"text-red-500 text-xs mt-1\">{{ errors.email }}</div>\n          </div>\n          \n          <!-- 密码输入 -->\n          <div>\n            <label for=\"password\" class=\"block text-sm font-medium text-gray-700 mb-1\">密码</label>\n            <input\n              id=\"password\"\n              v-model=\"form.password\"\n              type=\"password\"\n              required\n              class=\"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors\"\n              placeholder=\"请输入密码\"\n              minlength=\"6\"\n            >\n            <div v-if=\"errors.password\" class=\"text-red-500 text-xs mt-1\">{{ errors.password }}</div>\n            <p class=\"text-gray-500 text-xs mt-1\">密码至少包含6个字符</p>\n          </div>\n          \n          <!-- 确认密码 -->\n          <div>\n            <label for=\"confirmPassword\" class=\"block text-sm font-medium text-gray-700 mb-1\">确认密码</label>\n            <input\n              id=\"confirmPassword\"\n              v-model=\"form.confirmPassword\"\n              type=\"password\"\n              required\n              class=\"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors\"\n              placeholder=\"请再次输入密码\"\n            >\n            <div v-if=\"errors.confirmPassword\" class=\"text-red-500 text-xs mt-1\">{{ errors.confirmPassword }}</div>\n          </div>\n          \n          <!-- 注册按钮 -->\n          <button\n            type=\"submit\"\n            :disabled=\"isSubmitting\"\n            class=\"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-md transition-colors flex justify-center items-center\"\n          >\n            <span v-if=\"!isSubmitting\">注册</span>\n            <span v-else class=\"flex items-center\">\n              <i class=\"fa fa-spinner fa-spin mr-2\"></i>\n              注册中...\n            </span>\n          </button>\n          \n          <!-- 已有账户 -->\n          <div class=\"text-center text-sm text-gray-600\">\n            已有账户？ <a href=\"#\" @click.prevent=\"$emit('switchToLogin')\" class=\"text-indigo-600 hover:text-indigo-700 font-medium\">登录</a>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'UserRegister',\n  emits: ['switchToLogin', 'registerSuccess'],\n  data() {\n    return {\n      form: {\n        username: '',\n        email: '',\n        password: '',\n        confirmPassword: ''\n      },\n      errors: {},\n      isSubmitting: false\n    }\n  },\n  methods: {\n    // 表单验证\n    validateForm() {\n      this.errors = {}\n      let isValid = true\n      \n      // 验证用户名\n      if (!this.form.username.trim()) {\n        this.errors.username = '用户名不能为空'\n        isValid = false\n      } else if (this.form.username.length < 3) {\n        this.errors.username = '用户名至少需要3个字符'\n        isValid = false\n      }\n      \n      // 验证邮箱\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n      if (!this.form.email.trim()) {\n        this.errors.email = '邮箱不能为空'\n        isValid = false\n      } else if (!emailRegex.test(this.form.email)) {\n        this.errors.email = '请输入有效的邮箱地址'\n        isValid = false\n      }\n      \n      // 验证密码\n      if (!this.form.password) {\n        this.errors.password = '密码不能为空'\n        isValid = false\n      } else if (this.form.password.length < 6) {\n        this.errors.password = '密码至少需要6个字符'\n        isValid = false\n      }\n      \n      // 验证确认密码\n      if (!this.form.confirmPassword) {\n        this.errors.confirmPassword = '请确认密码'\n        isValid = false\n      } else if (this.form.password !== this.form.confirmPassword) {\n        this.errors.confirmPassword = '两次输入的密码不一致'\n        isValid = false\n      }\n      \n      return isValid\n    },\n    \n    // 处理注册\n    async handleRegister() {\n      if (!this.validateForm()) {\n        return\n      }\n      \n      this.isSubmitting = true\n      \n      try {\n        const response = await fetch('http://localhost:5000/api/auth/register', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            username: this.form.username,\n            email: this.form.email,\n            password: this.form.password\n          })\n        })\n        \n        const data = await response.json()\n        \n        if (!response.ok) {\n          // 处理API返回的错误\n          if (data.error) {\n            if (data.error.includes('Username')) {\n              this.errors.username = '用户名已存在'\n            } else if (data.error.includes('Email')) {\n              this.errors.email = '邮箱已存在'\n            } else {\n              alert('注册失败：' + data.error)\n            }\n          }\n          return\n        }\n        \n        // 注册成功\n        this.$emit('registerSuccess', {\n          id: data.id,\n          username: this.form.username,\n          email: this.form.email\n        })\n        \n        // 重置表单\n        this.form = {\n          username: '',\n          email: '',\n          password: '',\n          confirmPassword: ''\n        }\n        \n        alert('注册成功！请登录')\n        this.$emit('switchToLogin')\n        \n      } catch (error) {\n        console.error('注册错误:', error)\n        alert('注册失败，请稍后再试')\n      } finally {\n        this.isSubmitting = false\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n/* 可以添加一些特定的样式 */\ninput:focus {\n  box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.2);\n}\n\nbutton:disabled {\n  opacity: 0.7;\n  cursor: not-allowed;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}