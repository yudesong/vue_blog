{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\n// import BlogHeader from './components/BlogHeader.vue'\nimport UserLogin from './components/UserLogin.vue';\nimport UserRegister from './components/UserRegister.vue';\nexport default {\n  components: {\n    // BlogHeader,\n    // BlogApp,\n    UserLogin,\n    UserRegister\n  },\n  data() {\n    return {\n      // 视图状态\n      isAdminView: false,\n      currentView: 'home',\n      mobileMenuOpen: false,\n      isScrolled: false,\n      adminTab: 'articles',\n      // 认证相关状态\n      isAuthView: false,\n      currentAuthView: 'login',\n      // 'login' 或 'register'\n      currentUser: null,\n      // 评论相关状态\n      commentContent: '',\n      isSubmittingComment: false,\n      isSubmittingReply: false,\n      replyBoxVisible: {\n        visible: false,\n        commentId: null,\n        replyTo: null,\n        content: ''\n      },\n      // 筛选状态\n      filteredCategory: null,\n      // 模态框状态\n      showArticleEditor: false,\n      isEditingArticle: false,\n      showCategoryModal: false,\n      isEditingCategory: false,\n      showDeleteConfirm: false,\n      deleteConfirmMessage: '',\n      deleteItemId: null,\n      deleteItemType: null,\n      // 表单数据\n      articleForm: {\n        id: null,\n        author_id: '1',\n        title: '',\n        category_id: '',\n        tagsStr: '',\n        coverImage: '',\n        content: '',\n        status: 'published',\n        publishedDate: '',\n        media: []\n      },\n      categoryForm: {\n        id: null,\n        name: '',\n        description: '',\n        icon: 'fa-file-text-o'\n      },\n      // 示例数据 - 文章\n      articles: [],\n      // {\n      //   id: 1,\n      //   title: 'Vue 3 组件化开发最佳实践',\n      //   summary: '本文介绍了Vue 3中组件化开发的最佳实践，包括组合式API的使用、组件通信和性能优化等内容。',\n      //   content: `\n      //     <h2>Vue 3 组件化开发最佳实践</h2>\n      //     <p>Vue 3带来了许多新特性，尤其是组合式API，为组件化开发提供了更灵活的方式。本文将介绍一些在Vue 3中进行组件化开发的最佳实践。</p>\n\n      //     <h3>1. 合理划分组件</h3>\n      //     <p>组件应该遵循单一职责原则，每个组件只负责一件事情。例如，一个页面可以划分为头部、内容区、侧边栏和底部等组件。</p>\n\n      //     <h3>2. 使用组合式API组织代码</h3>\n      //     <p>组合式API允许我们按照逻辑功能组织代码，而不是按照选项类型。这使得代码更易于理解和维护。</p>\n      //     <pre><code>\n      //     &lt;script setup&gt;\n      //     import { ref, onMounted } from 'vue'\n\n      //     // 状态\n      //     const count = ref(0)\n\n      //     // 方法\n      //     function increment() {\n      //       count.value++\n      //     }\n\n      //     // 生命周期\n      //     onMounted(() => {\n      //       console.log('Component mounted')\n      //     })\n      //     &lt;/script&gt;\n      //     </code></pre>\n\n      //     <h3>3. 组件通信方式选择</h3>\n      //     <p>Vue 3提供了多种组件通信方式，应根据场景选择合适的方式：</p>\n      //     <ul>\n      //       <li>父子组件：props和emit</li>\n      //       <li>跨组件：provide和inject</li>\n      //       <li>全局状态：Pinia或Vuex</li>\n      //     </ul>\n\n      //     <h3>4. 性能优化</h3>\n      //     <p>组件化开发中需要注意性能问题，例如：</p>\n      //     <ul>\n      //       <li>使用&lt;teleport&gt;处理模态框等组件</li>\n      //       <li>使用v-memo缓存组件渲染结果</li>\n      //       <li>合理使用异步组件</li>\n      //     </ul>\n\n      //     <h3>结语</h3>\n      //     <p>良好的组件化设计可以显著提高代码的可维护性和复用性。希望本文介绍的最佳实践能帮助你更好地进行Vue 3开发。</p>\n      //   `,\n      //   coverImage: 'https://picsum.photos/id/0/800/400',\n      //   category: '前端开发',\n      //   tags: ['Vue', '前端', '组件化'],\n      //   author: '张开发',\n      //   authorAvatar: 'https://picsum.photos/id/1005/100/100',\n      //   authorBio: '资深前端工程师，Vue.js 爱好者，拥有5年前端开发经验。',\n      //   publishedDate: '2023-06-15',\n      //   views: 1243,\n      //   likes: 89,\n      //   commentsCount: 32,\n      //   comments: [\n      //     {\n      //       id: 101,\n      //       articleId: 1,\n      //       author: '李同学',\n      //       authorAvatar: 'https://picsum.photos/id/1012/100/100',\n      //       content: '非常实用的文章，学习到了很多Vue 3组件化的技巧，谢谢分享！',\n      //       timestamp: '2023-06-16T10:23:45',\n      //       likes: 15,\n      //       replies: [\n      //         {\n      //           id: 1011,\n      //           author: '张开发',\n      //           authorAvatar: 'https://picsum.photos/id/1005/100/100',\n      //           content: '感谢支持，有任何问题欢迎交流！',\n      //           timestamp: '2023-06-16T14:12:30',\n      //           likes: 5\n      //         }\n      //       ]\n      //     },\n      //     {\n      //       id: 102,\n      //       articleId: 1,\n      //       author: '王工程师',\n      //       authorAvatar: 'https://picsum.photos/id/1025/100/100',\n      //       content: '关于组件通信部分，我觉得还可以补充一下使用Pinia的案例，这样会更全面。',\n      //       timestamp: '2023-06-17T09:05:12',\n      //       likes: 8,\n      //       replies: []\n      //     }\n      //   ]\n      // },\n      // {\n      //   id: 2,\n      //   title: 'Python数据分析入门指南',\n      //   summary: '本文为初学者提供了Python数据分析的入门指南，包括常用库介绍、基本流程和实战案例。',\n      //   content: '<p>Python数据分析入门指南内容...</p>',\n      //   coverImage: 'https://picsum.photos/id/180/800/400',\n      //   category: '数据分析',\n      //   tags: ['Python', '数据分析', '入门'],\n      //   author: '李数据',\n      //   authorAvatar: 'https://picsum.photos/id/1010/100/100',\n      //   authorBio: '数据科学家，擅长Python数据分析和机器学习，著有《Python数据处理实战》。',\n      //   publishedDate: '2023-06-10',\n      //   views: 987,\n      //   likes: 65,\n      //   commentsCount: 24,\n      //   comments: []\n      // },\n      // {\n      //   id: 3,\n      //   title: 'React性能优化的10个技巧',\n      //   summary: '本文总结了10个实用的React性能优化技巧，帮助你构建更高效的React应用。',\n      //   content: '<p>React性能优化的10个技巧内容...</p>',\n      //   coverImage: 'https://picsum.photos/id/48/800/400',\n      //   category: '前端开发',\n      //   tags: ['React', '性能优化', '前端'],\n      //   author: '赵前端',\n      //   authorAvatar: 'https://picsum.photos/id/1027/100/100',\n      //   authorBio: '全栈开发工程师，React技术专家，拥有多年大型应用开发经验。',\n      //   publishedDate: '2023-06-05',\n      //   views: 1567,\n      //   likes: 120,\n      //   commentsCount: 45,\n      //   comments: []\n      // },\n      // {\n      //   id: 4,\n      //   title: '机器学习在金融领域的应用',\n      //   summary: '本文探讨了机器学习技术在金融领域的各种应用场景，包括风险评估、欺诈检测等。',\n      //   content: '<p>机器学习在金融领域的应用内容...</p>',\n      //   coverImage: 'https://picsum.photos/id/160/800/400',\n      //   category: '人工智能',\n      //   tags: ['机器学习', '金融', 'AI'],\n      //   author: '陈智能',\n      //   authorAvatar: 'https://picsum.photos/id/1074/100/100',\n      //   authorBio: 'AI研究员，专注于机器学习在金融科技领域的应用研究。',\n      //   publishedDate: '2023-05-28',\n      //   views: 876,\n      //   likes: 54,\n      //   commentsCount: 18,\n      //   comments: []\n      // },\n      // {\n      //   id: 5,\n      //   title: 'Docker容器化部署最佳实践',\n      //   summary: '本文介绍了使用Docker进行容器化部署的最佳实践，包括镜像优化、容器编排等内容。',\n      //   content: '<p>Docker容器化部署最佳实践内容...</p>',\n      //   coverImage: 'https://picsum.photos/id/119/800/400',\n      //   category: '后端开发',\n      //   tags: ['Docker', '容器化', '部署'],\n      //   author: '刘运维',\n      //   authorAvatar: 'https://picsum.photos/id/1066/100/100',\n      //   authorBio: 'DevOps工程师，容器技术专家，擅长自动化部署和运维。',\n      //   publishedDate: '2023-05-20',\n      //   views: 1123,\n      //   likes: 78,\n      //   commentsCount: 31,\n      //   comments: []\n      // },\n      // {\n      //   id: 6,\n      //   title: 'UI设计中的色彩理论',\n      //   summary: '本文讲解了UI设计中的色彩理论，包括色彩搭配原则、情感传达和实际应用案例。',\n      //   content: '<p>UI设计中的色彩理论内容...</p>',\n      //   coverImage: 'https://picsum.photos/id/96/800/400',\n      //   category: '设计',\n      //   tags: ['UI设计', '色彩理论', '设计原则'],\n      //   author: '孙设计',\n      //   authorAvatar: 'https://picsum.photos/id/1062/100/100',\n      //   authorBio: '资深UI/UX设计师，曾任职于多家知名互联网公司，专注用户体验设计。',\n      //   publishedDate: '2023-05-15',\n      //   views: 765,\n      //   likes: 43,\n      //   commentsCount: 15,\n      //   comments: []\n      // }\n      // ],\n\n      // 示例数据 - 分类\n      categories: [],\n      // { id: 1, name: '前端开发', description: '包括HTML、CSS、JavaScript等前端技术和框架相关内容', icon: 'fa-code', count: 28, lastUpdated: '2023-06-15' },\n      // { id: 2, name: '后端开发', description: '服务器端开发技术、数据库、API设计等相关内容', icon: 'fa-server', count: 21, lastUpdated: '2023-05-20' },\n      // { id: 3, name: '数据分析', description: '数据处理、分析、可视化等相关技术和工具', icon: 'fa-bar-chart', count: 15, lastUpdated: '2023-06-10' },\n      // { id: 4, name: '人工智能', description: '机器学习、深度学习、自然语言处理等AI相关内容', icon: 'fa-brain', count: 19, lastUpdated: '2023-05-28' },\n      // { id: 5, name: '设计', description: 'UI/UX设计、交互设计、视觉设计等相关内容', icon: 'fa-paint-brush', count: 12, lastUpdated: '2023-05-15' },\n      // { id: 6, name: '移动开发', description: 'iOS、Android应用开发相关技术和框架', icon: 'fa-mobile', count: 8, lastUpdated: '2023-05-10' }\n      // ],\n\n      // 可用图标列表\n      availableIcons: ['fa-code', 'fa-server', 'fa-bar-chart', 'fa-brain', 'fa-paint-brush', 'fa-mobile', 'fa-database', 'fa-cloud', 'fa-file-text-o', 'fa-image', 'fa-video-camera', 'fa-music'],\n      // 当前文章\n      currentArticle: null,\n      // 相关文章\n      relatedArticles: []\n    };\n  },\n  computed: {\n    // 特色文章\n    featuredArticles() {\n      return this.articles.slice(0, 3);\n    },\n    // 最新文章\n    latestArticles() {\n      return [...this.articles].sort((a, b) => new Date(b.publishedDate) - new Date(a.publishedDate)).slice(0, 4);\n    },\n    // 筛选后的文章\n    filteredArticles() {\n      if (!this.filteredCategory) {\n        return this.articles;\n      }\n      return this.articles.filter(article => article.category === this.filteredCategory);\n    },\n    // 所有评论\n    allComments() {\n      let comments = [];\n      if (this.articles && Array.isArray(this.articles)) {\n        this.articles.forEach(article => {\n          if (article.comments && Array.isArray(article.comments)) {\n            article.comments.forEach(comment => {\n              comments.push({\n                ...comment,\n                articleId: article.id\n              });\n              if (comment.replies && Array.isArray(comment.replies)) {\n                comment.replies.forEach(reply => {\n                  comments.push({\n                    ...reply,\n                    articleId: article.id,\n                    isReply: true,\n                    parentId: comment.id\n                  });\n                });\n              }\n            });\n          }\n        });\n      }\n      return comments.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp)).slice(0, 5);\n    },\n    // 总评论数\n    totalComments() {\n      let count = 0;\n      this.articles.forEach(article => {\n        count += article.commentsCount;\n      });\n      return count;\n    },\n    // 总访问量\n    totalViews() {\n      let count = 0;\n      this.articles.forEach(article => {\n        count += article.views;\n      });\n      return count;\n    }\n  },\n  created() {\n    // 组件创建时初始化认证状态\n    this.initAuth();\n    // 页面加载时获取文章列表和分类\n    this.fetchArticles();\n    this.fetchCategories();\n    // 监听滚动事件\n    window.addEventListener('scroll', this.handleScroll);\n\n    // 初始化日期\n    this.articleForm.publishedDate = this.formatDateForInput(new Date());\n  },\n  beforeUnmount() {\n    window.removeEventListener('scroll', this.handleScroll);\n  },\n  methods: {\n    // 处理滚动事件\n    handleScroll() {\n      this.isScrolled = window.scrollY > 10;\n    },\n    // 切换视图\n    switchView(view) {\n      this.currentView = view;\n      this.filteredCategory = null;\n      // 滚动到顶部\n      window.scrollTo(0, 0);\n    },\n    // 切换前后台视图\n    toggleAdminView() {\n      this.isAdminView = !this.isAdminView;\n      // 滚动到顶部\n      window.scrollTo(0, 0);\n    },\n    // 根据分类筛选文章\n    filterArticlesByCategory(category) {\n      this.filteredCategory = category;\n      this.currentView = 'articles';\n      // 滚动到顶部\n      window.scrollTo(0, 0);\n    },\n    // 清除分类筛选\n    clearCategoryFilter() {\n      this.filteredCategory = null;\n    },\n    // API调用 - 获取文章列表\n    async fetchArticles(search = '') {\n      this.loading = true;\n      try {\n        let url = 'http://localhost:5000/api/articles';\n        if (search) {\n          url += `?search=${encodeURIComponent(search)}`;\n        }\n        const response = await fetch(url);\n        if (!response.ok) {\n          throw new Error('Failed to fetch articles');\n        }\n        var articles = await response.json();\n        console.log(articles['articles']);\n        this.articles = articles['articles'];\n        // 简单处理热门文章（取前3篇）\n        this.popularArticles = [...this.articles].slice(0, 3);\n\n        // 为每篇文章添加评论计数\n        for (const article of this.articles) {\n          const commentsResponse = await fetch(`http://localhost:5000/api/articles/${article.id}/comments`);\n          if (commentsResponse.ok) {\n            const comments = await commentsResponse.json();\n            article.commentsCount = comments.length;\n          } else {\n            article.commentsCount = 0;\n          }\n        }\n      } catch (error) {\n        console.error('Error fetching articles:', error);\n        alert('获取文章失败，请稍后重试');\n      } finally {\n        this.loading = false;\n      }\n    },\n    // API调用 - 获取分类列表\n    async fetchCategories() {\n      try {\n        const url = 'http://localhost:5000/api/categories';\n        const response = await fetch(url);\n        if (!response.ok) {\n          throw new Error('Failed to fetch categories');\n        }\n        this.categories = (await response.json()) || [];\n        console.log(this.categories);\n      } catch (error) {\n        console.error('Error fetching categories:', error);\n        // 如果API调用失败，使用本地示例数据\n        this.categories = [{\n          id: 1,\n          name: '前端开发',\n          description: '包括HTML、CSS、JavaScript等前端技术和框架相关内容',\n          icon: 'fa-code',\n          count: 28,\n          lastUpdated: '2023-06-15'\n        }, {\n          id: 2,\n          name: '后端开发',\n          description: '服务器端开发技术、数据库、API设计等相关内容',\n          icon: 'fa-server',\n          count: 21,\n          lastUpdated: '2023-05-20'\n        }, {\n          id: 3,\n          name: '数据分析',\n          description: '数据处理、分析、可视化等相关技术和工具',\n          icon: 'fa-bar-chart',\n          count: 15,\n          lastUpdated: '2023-06-10'\n        }, {\n          id: 4,\n          name: '人工智能',\n          description: '机器学习、深度学习、自然语言处理等AI相关内容',\n          icon: 'fa-brain',\n          count: 19,\n          lastUpdated: '2023-05-28'\n        }, {\n          id: 5,\n          name: '设计',\n          description: 'UI/UX设计、交互设计、视觉设计等相关内容',\n          icon: 'fa-paint-brush',\n          count: 12,\n          lastUpdated: '2023-05-15'\n        }, {\n          id: 6,\n          name: '移动开发',\n          description: 'iOS、Android应用开发相关技术和框架',\n          icon: 'fa-mobile',\n          count: 8,\n          lastUpdated: '2023-05-10'\n        }];\n      }\n    },\n    // 查看文章详情\n    viewArticle(id) {\n      this.currentArticle = this.articles.find(article => article.id === id);\n      if (this.currentArticle) {\n        // 查找相关文章（同分类，排除当前文章）\n        this.relatedArticles = this.articles.filter(article => article.category === this.currentArticle.category && article.id !== id).slice(0, 3);\n        this.currentView = 'articleDetail';\n        // 滚动到顶部\n        window.scrollTo(0, 0);\n      }\n    },\n    // 获取分类颜色\n    getCategoryColor(category) {\n      const colorMap = {\n        '前端开发': 'bg-blue-500',\n        '后端开发': 'bg-green-500',\n        '数据分析': 'bg-yellow-500',\n        '人工智能': 'bg-purple-500',\n        '设计': 'bg-pink-500',\n        '移动开发': 'bg-red-500'\n      };\n      return colorMap[category] || 'bg-gray-500';\n    },\n    // 初始化认证状态\n    initAuth() {\n      // 从localStorage获取用户信息\n      const storedUser = localStorage.getItem('currentUser');\n      if (storedUser) {\n        try {\n          this.currentUser = JSON.parse(storedUser);\n        } catch (e) {\n          console.error('Error parsing stored user:', e);\n          localStorage.removeItem('currentUser');\n        }\n      }\n    },\n    // 显示认证视图\n    showAuthView(view = 'login') {\n      this.isAuthView = true;\n      this.currentAuthView = view;\n    },\n    // 提交评论\n    async submitComment() {\n      if (!this.currentUser || !this.commentContent.trim() || this.isSubmittingComment) {\n        return;\n      }\n      this.isSubmittingComment = true;\n      try {\n        const newComment = {\n          content: this.commentContent.trim(),\n          articleId: this.currentArticle.id,\n          author: this.currentUser.username,\n          authorAvatar: this.currentUser.avatar || 'https://picsum.photos/id/64/100/100',\n          timestamp: new Date().toISOString(),\n          likes: 0,\n          isLiked: false,\n          replies: []\n        };\n\n        // 尝试发送到服务器\n        try {\n          const response = await fetch('http://localhost:5000/api/comments', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${this.currentUser.token}`\n            },\n            body: JSON.stringify({\n              article_id: this.currentArticle.id,\n              content: newComment.content\n            })\n          });\n          if (response.ok) {\n            const savedComment = await response.json();\n            // 合并服务器返回的数据和本地数据\n            newComment.id = savedComment.id;\n          }\n        } catch (error) {\n          console.error('Error submitting comment to server:', error);\n          // 如果API调用失败，使用本地生成的ID\n          newComment.id = Date.now();\n        }\n\n        // 更新本地数据\n        if (!this.currentArticle.comments) {\n          this.currentArticle.comments = [];\n        }\n        this.currentArticle.comments.unshift(newComment);\n        this.currentArticle.commentsCount++;\n        this.commentContent = '';\n\n        // 显示成功通知\n        this.showNotification('评论发表成功！', 'success');\n      } catch (error) {\n        console.error('Error submitting comment:', error);\n        this.showNotification('发表评论失败，请稍后重试', 'error');\n      } finally {\n        this.isSubmittingComment = false;\n      }\n    },\n    // 切换回复框\n    toggleReplyBox(comment, replyTo = null) {\n      if (this.replyBoxVisible.commentId === comment.id && !replyTo) {\n        // 如果已经是当前评论的回复框，则关闭\n        this.cancelReply();\n      } else {\n        // 打开回复框\n        this.replyBoxVisible = {\n          commentId: comment.id,\n          replyTo: replyTo,\n          content: ''\n        };\n      }\n    },\n    // 取消回复\n    cancelReply() {\n      this.replyBoxVisible = {\n        commentId: null,\n        replyTo: null,\n        content: ''\n      };\n    },\n    // 提交回复\n    async submitReply(comment) {\n      if (!this.currentUser || !this.replyBoxVisible.content.trim() || this.isSubmittingReply) {\n        return;\n      }\n      this.isSubmittingReply = true;\n      try {\n        const newReply = {\n          content: this.replyBoxVisible.content.trim(),\n          author: this.currentUser.username,\n          authorAvatar: this.currentUser.avatar || 'https://picsum.photos/id/64/100/100',\n          timestamp: new Date().toISOString(),\n          likes: 0,\n          isLiked: false\n        };\n\n        // 尝试发送到服务器\n        try {\n          const response = await fetch('http://localhost:5000/api/comments', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${this.currentUser.token}`\n            },\n            body: JSON.stringify({\n              article_id: this.currentArticle.id,\n              content: newReply.content,\n              parent_id: comment.id\n            })\n          });\n          if (response.ok) {\n            const savedReply = await response.json();\n            // 合并服务器返回的数据\n            newReply.id = savedReply.id;\n          }\n        } catch (error) {\n          console.error('Error submitting reply to server:', error);\n          // 如果API调用失败，使用本地生成的ID\n          newReply.id = Date.now();\n        }\n\n        // 更新本地数据\n        if (!comment.replies) {\n          comment.replies = [];\n        }\n        comment.replies.push(newReply);\n        this.currentArticle.commentsCount++;\n\n        // 关闭回复框\n        this.cancelReply();\n\n        // 显示成功通知\n        this.showNotification('回复发表成功！', 'success');\n      } catch (error) {\n        console.error('Error submitting reply:', error);\n        this.showNotification('发表回复失败，请稍后重试', 'error');\n      } finally {\n        this.isSubmittingReply = false;\n      }\n    },\n    // 点赞/取消点赞\n    async toggleLike(item, parentComment = null) {\n      try {\n        // 切换本地点赞状态\n        item.isLiked = !item.isLiked;\n        item.likes += item.isLiked ? 1 : -1;\n\n        // 尝试发送到服务器\n        if (this.currentUser) {\n          try {\n            const response = await fetch(`http://localhost:5000/api/comments/${item.id}/like`, {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${this.currentUser.token}`\n              }\n            });\n            if (!response.ok) {\n              // 如果服务器操作失败，恢复本地状态\n              item.isLiked = !item.isLiked;\n              item.likes += item.isLiked ? 1 : -1;\n              throw new Error('Server operation failed');\n            }\n          } catch (error) {\n            console.error('Error toggling like:', error);\n          }\n        } else {\n          // 如果未登录，显示提示\n          this.showNotification('请登录后再进行点赞操作', 'info');\n          // 恢复本地状态\n          item.isLiked = !item.isLiked;\n          item.likes += item.isLiked ? 1 : -1;\n        }\n      } catch (error) {\n        console.error('Error toggling like:', error);\n      }\n    },\n    // 格式化日期\n    formatDate(dateString) {\n      const date = new Date(dateString);\n      return date.toLocaleDateString('zh-CN', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      });\n    },\n    // 为输入框格式化日期\n    formatDateForInput(date) {\n      const year = date.getFullYear();\n      const month = String(date.getMonth() + 1).padStart(2, '0');\n      const day = String(date.getDate()).padStart(2, '0');\n      return `${year}-${month}-${day}`;\n    },\n    // 格式化相对时间\n    formatRelativeTime(timestamp) {\n      const now = new Date();\n      const past = new Date(timestamp);\n      const diffMs = now - past;\n      const diffMins = Math.floor(diffMs / (1000 * 60));\n      const diffHours = Math.floor(diffMins / 60);\n      const diffDays = Math.floor(diffHours / 24);\n      if (diffMins < 1) {\n        return '刚刚';\n      } else if (diffMins < 60) {\n        return `${diffMins}分钟前`;\n      } else if (diffHours < 24) {\n        return `${diffHours}小时前`;\n      } else if (diffDays < 30) {\n        return `${diffDays}天前`;\n      } else {\n        return this.formatDate(timestamp);\n      }\n    },\n    // 根据ID获取文章标题\n    getArticleTitleById(id) {\n      const article = this.articles.find(a => a.id === id);\n      return article ? article.title : '未知文章';\n    },\n    // 编辑文章\n    editArticle(id) {\n      const article = this.articles.find(a => a.id === id);\n      if (article) {\n        // 根据文章分类名称查找对应的分类ID\n        const categoryId = this.categories.find(c => c.name === article.category)?.id || '';\n        this.articleForm = {\n          id: article.id,\n          title: article.title,\n          category_id: categoryId,\n          tagsStr: article.tags.join(','),\n          coverImage: article.coverImage,\n          content: article.content,\n          status: 'published',\n          publishedDate: this.formatDateForInput(new Date(article.publishedDate)),\n          media: []\n        };\n        this.isEditingArticle = true;\n        this.showArticleEditor = true;\n\n        // 将内容设置到编辑器 - 使用nextTick确保DOM完全渲染\n        this.$nextTick(() => {\n          if (this.$refs.editorContent) {\n            this.$refs.editorContent.innerHTML = article.content || '<p></p>';\n          }\n        });\n      }\n    },\n    // 重置文章表单\n    resetArticleForm() {\n      this.articleForm = {\n        id: null,\n        title: '',\n        category_id: '',\n        tagsStr: '',\n        coverImage: '',\n        content: '<p>开始撰写您的文章内容...</p>',\n        status: 'published',\n        publishedDate: this.formatDateForInput(new Date()),\n        media: []\n      };\n\n      // 使用nextTick确保DOM渲染完成后再设置编辑器内容\n      this.$nextTick(() => {\n        if (this.$refs.editorContent) {\n          this.$refs.editorContent.innerHTML = this.articleForm.content;\n        }\n      });\n    },\n    // 同步编辑器内容到articleForm\n    syncEditorContent() {\n      if (this.$refs.editorContent) {\n        this.articleForm.content = this.$refs.editorContent.innerHTML;\n      }\n    },\n    // 富文本编辑核心方法\n    formatText(command, value = null) {\n      // 先确保编辑器获得焦点\n      if (this.$refs.editorContent) {\n        this.$refs.editorContent.focus();\n\n        // 尝试执行命令\n        try {\n          // 对于formatBlock命令，需要特殊处理\n          if (command === 'formatBlock' && value) {\n            document.execCommand('formatBlock', false, `<${value}>`);\n          } else {\n            document.execCommand(command, false, value);\n          }\n          this.syncEditorContent();\n        } catch (error) {\n          console.error('编辑器命令执行失败:', error);\n        }\n      }\n    },\n    // 插入链接\n    insertLink() {\n      const url = prompt('请输入链接地址:', 'http://');\n      if (url) {\n        this.formatText('createLink', url);\n      }\n    },\n    // 处理封面图片上传\n    handleCoverImageUpload(e) {\n      const file = e.target.files[0];\n      if (file) {\n        // 这里只是模拟上传，实际项目中应该发送到服务器\n        const reader = new FileReader();\n        reader.onload = event => {\n          this.articleForm.coverImage = event.target.result;\n        };\n        reader.readAsDataURL(file);\n      }\n    },\n    // 触发图片上传\n    triggerImageUpload() {\n      document.getElementById('imageUpload').click();\n    },\n    // 触发视频上传\n    triggerVideoUpload() {\n      document.getElementById('videoUpload').click();\n    },\n    // 触发音频上传\n    triggerAudioUpload() {\n      document.getElementById('audioUpload').click();\n    },\n    // 处理图片上传\n    handleImageUpload(e) {\n      const file = e.target.files[0];\n      if (file) {\n        // 模拟上传\n        const reader = new FileReader();\n        reader.onload = event => {\n          this.articleForm.media.push({\n            id: Date.now(),\n            type: 'image',\n            url: event.target.result,\n            name: file.name\n          });\n        };\n        reader.readAsDataURL(file);\n      }\n      // 重置input，允许重复上传同一文件\n      e.target.value = '';\n    },\n    // 处理视频上传\n    handleVideoUpload(e) {\n      const file = e.target.files[0];\n      if (file) {\n        // 模拟上传\n        this.articleForm.media.push({\n          id: Date.now(),\n          type: 'video',\n          url: '#',\n          name: file.name\n        });\n      }\n      e.target.value = '';\n    },\n    // 处理音频上传\n    handleAudioUpload(e) {\n      const file = e.target.files[0];\n      if (file) {\n        // 模拟上传\n        this.articleForm.media.push({\n          id: Date.now(),\n          type: 'audio',\n          url: '#',\n          name: file.name\n        });\n      }\n      e.target.value = '';\n    },\n    // 移除媒体\n    removeMedia(id) {\n      this.articleForm.media = this.articleForm.media.filter(media => media.id !== id);\n    },\n    // 更新文章\n    async updateArticle() {\n      if (!this.articleForm.id) {\n        alert('请先编辑文章');\n        return;\n      }\n\n      // 转换标签字符串为数组\n      this.articleForm.tags = this.articleForm.tagsStr.split(',').map(tag => tag.trim());\n      alert(this.articleForm.content);\n      // 发送PUT请求更新文章\n      try {\n        const url = `http://localhost:5000/api/articles/${this.articleForm.id}`;\n        const response = await fetch(url, {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(this.articleForm)\n        });\n        if (!response.ok) {\n          throw new Error('Failed to update article');\n        }\n\n        // 重置表单\n        this.resetArticleForm();\n        this.showArticleEditor = false;\n        alert('文章更新成功');\n      } catch (error) {\n        console.error('Error updating article:', error);\n        alert('更新文章失败，请稍后重试');\n      }\n    },\n    // 发布文章\n    async postArticle() {\n      if (!this.articleForm.title.trim()) {\n        alert('请输入文章标题');\n        return;\n      }\n      if (!this.articleForm.content.trim()) {\n        alert('请输入文章内容');\n        return;\n      }\n      if (!this.articleForm.category_id) {\n        alert('请选择文章分类');\n        return;\n      }\n\n      // 转换标签字符串为数组\n      this.articleForm.tags = this.articleForm.tagsStr.split(',').map(tag => tag.trim());\n\n      // 发送POST请求创建文章\n      try {\n        const url = 'http://localhost:5000/api/articles/post';\n        const response = await fetch(url, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            ...this.articleForm,\n            author_id: '1'\n          })\n        });\n        const data = await response.json();\n        console.log(data);\n        if (!response.ok) {\n          throw new Error('Failed to post article');\n        }\n\n        // 重置表单\n        this.resetArticleForm();\n        this.showArticleEditor = false;\n        alert('文章发布成功');\n      } catch (error) {\n        console.error('Error posting article:', error);\n        alert('发布文章失败，请稍后重试');\n      }\n    },\n    // 编辑分类\n    editCategory(id) {\n      const category = this.categories.find(c => c.id === id);\n      if (category) {\n        this.categoryForm = {\n          ...category\n        };\n        this.isEditingCategory = true;\n        this.showCategoryModal = true;\n      }\n    },\n    // 重置分类表单\n    resetCategoryForm() {\n      this.categoryForm = {\n        id: null,\n        name: '',\n        description: '',\n        icon: 'fa-file-text-o'\n      };\n      this.isEditingCategory = false;\n    },\n    // API调用 - 更新分类\n    async updateCategory() {\n      if (!this.categoryForm.name.trim()) {\n        alert('请输入分类名称');\n        return;\n      }\n      if (!this.categoryForm.description.trim()) {\n        alert('请输入分类描述');\n        return;\n      }\n      try {\n        const url = `http://localhost:5000/api/categories/${this.categoryForm.id}`;\n        const response = await fetch(url, {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(this.categoryForm)\n        });\n        if (!response.ok) {\n          throw new Error('Failed to update category');\n        }\n\n        // 更新本地分类列表\n        const updatedCategory = await response.json();\n        const index = this.categories.findIndex(c => c.id === this.categoryForm.id);\n        if (index !== -1) {\n          this.categories.splice(index, 1, updatedCategory);\n        }\n        this.resetCategoryForm();\n        this.showCategoryModal = false;\n        alert('分类更新成功');\n      } catch (error) {\n        console.error('Error updating category:', error);\n        alert('更新分类失败，请稍后重试');\n      }\n    },\n    // API调用 - 创建分类\n    async createCategory() {\n      if (!this.categoryForm.name.trim()) {\n        alert('请输入分类名称');\n        return;\n      }\n      if (!this.categoryForm.description.trim()) {\n        alert('请输入分类描述');\n        return;\n      }\n      try {\n        const url = 'http://localhost:5000/api/categories/create';\n        const response = await fetch(url, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            ...this.categoryForm,\n            count: 0,\n            lastUpdated: new Date().toISOString().split('T')[0]\n          })\n        });\n        if (!response.ok) {\n          throw new Error('Failed to create category');\n        }\n\n        // 添加新分类到本地列表\n        const newCategory = await response.json();\n        this.categories.push(newCategory);\n        this.resetCategoryForm();\n        this.showCategoryModal = false;\n        alert('分类创建成功');\n      } catch (error) {\n        console.error('Error creating category:', error);\n        // 如果API调用失败，使用本地创建\n        const localCategory = {\n          ...this.categoryForm,\n          id: Date.now(),\n          count: 0,\n          lastUpdated: new Date().toISOString().split('T')[0]\n        };\n        this.categories.push(localCategory);\n        this.resetCategoryForm();\n        this.showCategoryModal = false;\n        alert('分类已创建（本地模式）' + error);\n      }\n    },\n    // 删除文章\n    deleteArticle(id) {\n      const article = this.articles.find(a => a.id === id);\n      if (article) {\n        this.deleteItemId = id;\n        this.deleteItemType = 'article';\n        this.deleteConfirmMessage = `确定要删除文章《${article.title}》吗？此操作不可撤销。`;\n        this.showDeleteConfirm = true;\n      }\n    },\n    // 删除分类\n    deleteCategory(id) {\n      const category = this.categories.find(c => c.id === id);\n      if (category) {\n        this.deleteItemId = id;\n        this.deleteItemType = 'category';\n        this.deleteConfirmMessage = `确定要删除分类《${category.name}》吗？该分类下的${category.count}篇文章将受到影响。`;\n        this.showDeleteConfirm = true;\n      }\n    },\n    // 认证相关方法\n    switchToAuth(view) {\n      this.isAuthView = true;\n      this.currentAuthView = view;\n      this.mobileMenuOpen = false;\n      // 滚动到页面顶部\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n      });\n    },\n    handleLoginSuccess(user) {\n      // 保存用户信息到本地存储\n      localStorage.setItem('currentUser', JSON.stringify(user));\n      this.currentUser = user;\n      this.isAuthView = false;\n      this.currentView = 'home';\n\n      // 显示成功消息\n      this.showNotification('登录成功！', 'success');\n    },\n    handleRegisterSuccess() {\n      // 注册成功后切换到登录页面\n      this.currentAuthView = 'login';\n      this.showNotification('注册成功，请登录！', 'success');\n    },\n    handleLogout() {\n      // 清除本地存储的用户信息\n      localStorage.removeItem('currentUser');\n      this.currentUser = null;\n      this.isAuthView = false;\n      this.currentView = 'home';\n\n      // 如果在管理后台视图，切换到前台\n      if (this.isAdminView) {\n        this.isAdminView = false;\n      }\n      this.showNotification('已成功退出登录', 'success');\n    },\n    showUserProfile() {\n      // 这里可以实现显示用户资料的逻辑\n      this.mobileMenuOpen = false;\n      // 目前简单切换到首页\n      this.switchView('home');\n      this.showNotification('用户资料功能正在开发中...', 'info');\n    },\n    checkUserLoginStatus() {\n      // 从本地存储检查用户登录状态\n      const savedUser = localStorage.getItem('currentUser');\n      if (savedUser) {\n        try {\n          this.currentUser = JSON.parse(savedUser);\n        } catch (e) {\n          console.error('解析用户信息失败:', e);\n          localStorage.removeItem('currentUser');\n        }\n      }\n    },\n    showNotification(message, type = 'info') {\n      // 简单的通知提示函数\n      const notification = document.createElement('div');\n      notification.className = `fixed bottom-4 right-4 px-6 py-3 rounded-md shadow-lg z-50 transition-all duration-300 transform translate-y-0`;\n\n      // 根据类型设置样式\n      if (type === 'success') {\n        notification.classList.add('bg-green-500', 'text-white');\n      } else if (type === 'error') {\n        notification.classList.add('bg-red-500', 'text-white');\n      } else if (type === 'warning') {\n        notification.classList.add('bg-yellow-500', 'text-white');\n      } else {\n        notification.classList.add('bg-blue-500', 'text-white');\n      }\n      notification.textContent = message;\n      document.body.appendChild(notification);\n\n      // 3秒后移除通知\n      setTimeout(() => {\n        notification.classList.add('opacity-0', 'translate-y-4');\n        setTimeout(() => {\n          document.body.removeChild(notification);\n        }, 300);\n      }, 3000);\n    },\n    // 初始化函数 - 在组件挂载时调用\n    initAuth() {\n      // 检查本地存储中的用户信息\n      this.checkUserLoginStatus();\n    },\n    // 确认删除\n    async confirmDelete() {\n      try {\n        if (this.deleteItemType === 'article') {\n          // 调用API删除文章\n          const url = `http://localhost:5000/api/articles/${this.deleteItemId}`;\n          const response = await fetch(url, {\n            method: 'DELETE',\n            headers: {\n              'Content-Type': 'application/json'\n            }\n          });\n          if (!response.ok) {\n            throw new Error('Failed to delete article');\n          }\n\n          // 更新本地数据\n          this.articles = this.articles.filter(a => a.id !== this.deleteItemId);\n          alert('文章删除成功');\n        } else if (this.deleteItemType === 'category') {\n          this.categories = this.categories.filter(c => c.id !== this.deleteItemId);\n        }\n      } catch (error) {\n        console.error(`Error deleting ${this.deleteItemType}:`, error);\n        alert(`删除${this.deleteItemType === 'article' ? '文章' : '分类'}失败，请稍后重试`);\n      } finally {\n        this.showDeleteConfirm = false;\n      }\n    },\n    // 生命周期钩子 - 组件挂载时\n    mounted() {\n      // 初始化认证状态\n      this.initAuth();\n    }\n  }\n};","map":{"version":3,"names":["UserLogin","UserRegister","components","data","isAdminView","currentView","mobileMenuOpen","isScrolled","adminTab","isAuthView","currentAuthView","currentUser","commentContent","isSubmittingComment","isSubmittingReply","replyBoxVisible","visible","commentId","replyTo","content","filteredCategory","showArticleEditor","isEditingArticle","showCategoryModal","isEditingCategory","showDeleteConfirm","deleteConfirmMessage","deleteItemId","deleteItemType","articleForm","id","author_id","title","category_id","tagsStr","coverImage","status","publishedDate","media","categoryForm","name","description","icon","articles","categories","availableIcons","currentArticle","relatedArticles","computed","featuredArticles","slice","latestArticles","sort","a","b","Date","filteredArticles","filter","article","category","allComments","comments","Array","isArray","forEach","comment","push","articleId","replies","reply","isReply","parentId","timestamp","totalComments","count","commentsCount","totalViews","views","created","initAuth","fetchArticles","fetchCategories","window","addEventListener","handleScroll","formatDateForInput","beforeUnmount","removeEventListener","methods","scrollY","switchView","view","scrollTo","toggleAdminView","filterArticlesByCategory","clearCategoryFilter","search","loading","url","encodeURIComponent","response","fetch","ok","Error","json","console","log","popularArticles","commentsResponse","length","error","alert","lastUpdated","viewArticle","find","getCategoryColor","colorMap","storedUser","localStorage","getItem","JSON","parse","e","removeItem","showAuthView","submitComment","trim","newComment","author","username","authorAvatar","avatar","toISOString","likes","isLiked","method","headers","token","body","stringify","article_id","savedComment","now","unshift","showNotification","toggleReplyBox","cancelReply","submitReply","newReply","parent_id","savedReply","toggleLike","item","parentComment","formatDate","dateString","date","toLocaleDateString","year","month","day","getFullYear","String","getMonth","padStart","getDate","formatRelativeTime","past","diffMs","diffMins","Math","floor","diffHours","diffDays","getArticleTitleById","editArticle","categoryId","c","tags","join","$nextTick","$refs","editorContent","innerHTML","resetArticleForm","syncEditorContent","formatText","command","value","focus","document","execCommand","insertLink","prompt","handleCoverImageUpload","file","target","files","reader","FileReader","onload","event","result","readAsDataURL","triggerImageUpload","getElementById","click","triggerVideoUpload","triggerAudioUpload","handleImageUpload","type","handleVideoUpload","handleAudioUpload","removeMedia","updateArticle","split","map","tag","postArticle","editCategory","resetCategoryForm","updateCategory","updatedCategory","index","findIndex","splice","createCategory","newCategory","localCategory","deleteArticle","deleteCategory","switchToAuth","top","behavior","handleLoginSuccess","user","setItem","handleRegisterSuccess","handleLogout","showUserProfile","checkUserLoginStatus","savedUser","message","notification","createElement","className","classList","add","textContent","appendChild","setTimeout","removeChild","confirmDelete","mounted"],"sources":["/Users/yudesong/Project/Vue/blog/src/App.vue"],"sourcesContent":["<template>\n  <div id=\"app\" class=\"min-h-screen bg-gray-50 text-gray-800 font-sans\">\n    <!-- 导航栏 -->\n    <nav class=\"bg-white shadow-md fixed w-full z-50 transition-all duration-300\" :class=\"{ 'bg-white/90 backdrop-blur-sm shadow-lg': isScrolled }\">\n      <div class=\"container mx-auto px-4 py-3 flex justify-between items-center\">\n        <div class=\"flex items-center space-x-2\">\n          <i class=\"fa fa-book text-indigo-600 text-2xl\"></i>\n          <h1 class=\"text-xl font-bold text-indigo-700\">InsightBlog</h1>\n        </div>\n        \n        <!-- 桌面导航 -->\n        <div class=\"hidden md:flex items-center space-x-8\">\n          <a href=\"#\" class=\"text-gray-700 hover:text-indigo-600 transition-colors font-medium\" @click.prevent=\"switchView('home')\">首页</a>\n          <a href=\"#\" class=\"text-gray-700 hover:text-indigo-600 transition-colors font-medium\" @click.prevent=\"switchView('articles')\">文章</a>\n          <a href=\"#\" class=\"text-gray-700 hover:text-indigo-600 transition-colors font-medium\" @click.prevent=\"switchView('categories')\">分类</a>\n          <div v-if=\"!isAdminView\" class=\"relative group\">\n            <button class=\"flex items-center text-gray-700 hover:text-indigo-600 transition-colors font-medium\">\n              搜索\n              <i class=\"fa fa-search ml-1\"></i>\n            </button>\n            <div class=\"absolute right-0 mt-2 w-64 bg-white rounded-md shadow-lg py-1 z-10 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform group-hover:translate-y-0 translate-y-2\">\n              <div class=\"p-2\">\n                <input type=\"text\" placeholder=\"搜索文章...\" class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500\">\n              </div>\n            </div>\n          </div>\n          <!-- 用户认证相关导航 -->\n          <div v-if=\"!currentUser\" class=\"flex items-center space-x-4\">\n            <a href=\"#\" class=\"text-gray-700 hover:text-indigo-600 transition-colors font-medium\" @click.prevent=\"switchToAuth('login')\">登录</a>\n            <a href=\"#\" class=\"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md transition-colors font-medium\" @click.prevent=\"switchToAuth('register')\">注册</a>\n          </div>\n          <div v-else class=\"relative group\">\n            <button class=\"flex items-center text-gray-700 hover:text-indigo-600 transition-colors font-medium\">\n              <img :src=\"currentUser.avatar || 'https://picsum.photos/id/64/40/40'\" alt=\"用户头像\" class=\"w-8 h-8 rounded-full mr-2 object-cover\">\n              <span>{{ currentUser.username }}</span>\n              <i class=\"fa fa-chevron-down ml-1 text-xs\"></i>\n            </button>\n            <div class=\"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform group-hover:translate-y-0 translate-y-2\">\n              <a href=\"#\" class=\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\" @click.prevent=\"showUserProfile\">个人资料</a>\n              <a href=\"#\" class=\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\" @click.prevent=\"toggleAdminView\" v-if=\"currentUser.isAdmin\">管理后台</a>\n              <div class=\"border-t border-gray-100 my-1\"></div>\n              <a href=\"#\" class=\"block px-4 py-2 text-sm text-red-600 hover:bg-gray-100\" @click.prevent=\"handleLogout\">退出登录</a>\n            </div>\n          </div>\n          <button v-if=\"!currentUser && !isAuthView\" @click=\"toggleAdminView\" class=\"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md transition-colors flex items-center\">\n            <i class=\"fa fa-cog mr-2\"></i>\n            <span>{{ isAdminView ? '返回前台' : '管理后台' }}</span>\n          </button>\n        </div>\n        \n        <!-- 移动端菜单按钮 -->\n        <button class=\"md:hidden text-gray-700\" @click=\"mobileMenuOpen = !mobileMenuOpen\">\n          <i class=\"fa fa-bars text-xl\"></i>\n        </button>\n      </div>\n      \n      <!-- 移动端导航菜单 -->\n        <div class=\"md:hidden bg-white border-t\" v-if=\"mobileMenuOpen\">\n          <div class=\"container mx-auto px-4 py-2 flex flex-col space-y-3\">\n            <a href=\"#\" class=\"py-2 text-gray-700 hover:text-indigo-600 transition-colors font-medium\" @click.prevent=\"switchView('home'); mobileMenuOpen = false\">首页</a>\n            <a href=\"#\" class=\"py-2 text-gray-700 hover:text-indigo-600 transition-colors font-medium\" @click.prevent=\"switchView('articles'); mobileMenuOpen = false\">文章</a>\n            <a href=\"#\" class=\"py-2 text-gray-700 hover:text-indigo-600 transition-colors font-medium\" @click.prevent=\"switchView('categories'); mobileMenuOpen = false\">分类</a>\n            <div class=\"py-2\">\n              <input type=\"text\" placeholder=\"搜索文章...\" class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500\">\n            </div>\n            <!-- 移动端认证相关导航 -->\n            <div v-if=\"!currentUser\">\n              <a href=\"#\" class=\"py-2 text-gray-700 hover:text-indigo-600 transition-colors font-medium\" @click.prevent=\"switchToAuth('login'); mobileMenuOpen = false\">登录</a>\n              <a href=\"#\" class=\"py-2 bg-indigo-600 hover:bg-indigo-700 text-white px-4 rounded-md transition-colors font-medium block text-center\" @click.prevent=\"switchToAuth('register'); mobileMenuOpen = false\">注册</a>\n            </div>\n            <div v-else>\n              <div class=\"flex items-center py-2 px-3 bg-gray-50 rounded-md\">\n                <img :src=\"currentUser.avatar || 'https://picsum.photos/id/64/40/40'\" alt=\"用户头像\" class=\"w-10 h-10 rounded-full mr-3 object-cover\">\n                <div>\n                  <div class=\"font-medium text-gray-900\">{{ currentUser.username }}</div>\n                  <div class=\"text-xs text-gray-500\">{{ currentUser.email }}</div>\n                </div>\n              </div>\n              <a href=\"#\" class=\"py-2 text-gray-700 hover:text-indigo-600 transition-colors font-medium\" @click.prevent=\"showUserProfile; mobileMenuOpen = false\">个人资料</a>\n              <a href=\"#\" class=\"py-2 text-gray-700 hover:text-indigo-600 transition-colors font-medium\" @click.prevent=\"toggleAdminView; mobileMenuOpen = false\" v-if=\"currentUser.isAdmin\">管理后台</a>\n              <a href=\"#\" class=\"py-2 text-red-600 hover:text-red-700 transition-colors font-medium\" @click.prevent=\"handleLogout; mobileMenuOpen = false\">退出登录</a>\n            </div>\n            <button v-if=\"!currentUser && !isAuthView\" @click=\"toggleAdminView; mobileMenuOpen = false\" class=\"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md transition-colors flex items-center justify-center mt-2\">\n              <i class=\"fa fa-cog mr-2\"></i>\n              <span>{{ isAdminView ? '返回前台' : '管理后台' }}</span>\n            </button>\n          </div>\n        </div>\n    </nav>\n\n    <!-- 主内容区 -->\n    <main class=\"container mx-auto px-4 pt-24 pb-16\">\n      <!-- 认证视图 -->\n      <div v-if=\"isAuthView\">\n        <UserLogin v-if=\"currentAuthView === 'login'\" @switchToRegister=\"switchToAuth('register')\" @loginSuccess=\"handleLoginSuccess\" />\n        <UserRegister v-if=\"currentAuthView === 'register'\" @switchToLogin=\"switchToAuth('login')\" @registerSuccess=\"handleRegisterSuccess\" />\n      </div>\n      <!-- 前台视图 -->\n      <div v-else-if=\"!isAdminView\">\n        <!-- 首页视图 -->\n        <div v-if=\"currentView === 'home'\" class=\"space-y-12\">\n          <!-- 英雄区 -->\n          <section class=\"relative rounded-2xl overflow-hidden bg-gradient-to-r from-indigo-600 to-purple-700 text-white shadow-xl\">\n            <div class=\"absolute inset-0 opacity-20\">\n              <div class=\"absolute inset-0 bg-[url('https://picsum.photos/id/1073/1200/400')] bg-cover bg-center\"></div>\n            </div>\n            <div class=\"relative py-16 px-8 md:py-24 md:px-16 max-w-3xl\">\n              <h2 class=\"text-3xl md:text-5xl font-bold mb-4 leading-tight\">分享知识，连接思想</h2>\n              <p class=\"text-lg md:text-xl opacity-90 mb-8\">探索高质量的文章，参与有意义的讨论，发现新的观点和见解</p>\n              <div class=\"flex flex-wrap gap-4\">\n                <a href=\"#\" class=\"bg-white text-indigo-700 hover:bg-gray-100 px-6 py-3 rounded-md font-medium transition-colors\" @click.prevent=\"switchView('articles')\">浏览文章</a>\n                <a href=\"#\" class=\"bg-transparent border-2 border-white text-white hover:bg-white/10 px-6 py-3 rounded-md font-medium transition-colors\">了解更多</a>\n              </div>\n            </div>\n          </section>\n          \n          <!-- 特色文章 -->\n          <section>\n            <div class=\"flex justify-between items-center mb-8\">\n              <h2 class=\"text-2xl font-bold text-gray-800\">特色文章</h2>\n              <a href=\"#\" class=\"text-indigo-600 hover:text-indigo-700 font-medium flex items-center\" @click.prevent=\"switchView('articles')\">\n                查看全部\n                <i class=\"fa fa-arrow-right ml-2\"></i>\n              </a>\n            </div>\n            \n            <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n              <article v-for=\"article in featuredArticles\" :key=\"article.id\" class=\"bg-white rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-shadow duration-300 transform hover:-translate-y-1\">\n                <div class=\"relative h-48 overflow-hidden\">\n                  <img :src=\"article.coverImage\" alt=\"Article cover\" class=\"w-full h-full object-cover transition-transform duration-500 hover:scale-110\">\n                  <div class=\"absolute top-4 left-4\">\n                    <span :class=\"`px-3 py-1 rounded-full text-xs font-medium text-white ${getCategoryColor(article.category)}`\">\n                      {{ article.category }}\n                    </span>\n                  </div>\n                </div>\n                <div class=\"p-6\">\n                  <h3 class=\"text-xl font-bold mb-3 hover:text-indigo-600 transition-colors cursor-pointer\">{{ article.title }}</h3>\n                  <p class=\"text-gray-600 mb-4 line-clamp-3\">{{ article.summary }}</p>\n                  <div class=\"flex justify-between items-center\">\n                    <div class=\"flex items-center\">\n                      <img :src=\"article.authorAvatar\" alt=\"Author\" class=\"w-8 h-8 rounded-full mr-2\">\n                      <span class=\"text-sm text-gray-500\">{{ article.author }}</span>\n                    </div>\n                    <span class=\"text-sm text-gray-500\">{{ formatDate(article.publishedDate) }}</span>\n                  </div>\n                  <div class=\"mt-4 pt-4 border-t border-gray-100 flex justify-between items-center\">\n                    <button class=\"text-indigo-600 hover:text-indigo-700 font-medium\" @click.prevent=\"viewArticle(article.id)\">阅读全文</button>\n                    <div class=\"flex items-center space-x-4 text-gray-500\">\n                      <span class=\"flex items-center\"><i class=\"fa fa-comment-o mr-1\"></i> {{ article.commentsCount }}</span>\n                      <span class=\"flex items-center\"><i class=\"fa fa-eye mr-1\"></i> {{ article.views }}</span>\n                    </div>\n                  </div>\n                </div>\n              </article>\n            </div>\n          </section>\n          \n          <!-- 分类导航 -->\n          <section class=\"bg-white rounded-xl shadow-md p-8\">\n            <h2 class=\"text-2xl font-bold mb-6\">文章分类</h2>\n            <div class=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4\">\n              <a v-for=\"category in categories\" :key=\"category.id\" href=\"#\" class=\"flex flex-col items-center p-6 rounded-lg border border-gray-100 hover:border-indigo-200 hover:bg-indigo-50 transition-colors group\" @click.prevent=\"filterArticlesByCategory(category.name)\">\n                <div class=\"w-12 h-12 rounded-full flex items-center justify-center mb-3 bg-indigo-100 text-indigo-600 group-hover:bg-indigo-600 group-hover:text-white transition-colors\">\n                  <i :class=\"category.icon + ' text-xl'\"></i>\n                </div>\n                <h3 class=\"font-medium text-center\">{{ category.name }}</h3>\n                <span class=\"text-sm text-gray-500 mt-1\">{{ category.count }} 篇文章</span>\n              </a>\n            </div>\n          </section>\n          \n          <!-- 最新文章 -->\n          <section>\n            <h2 class=\"text-2xl font-bold mb-8\">最新文章</h2>\n            <div class=\"space-y-6\">\n              <div v-for=\"article in latestArticles\" :key=\"article.id\" class=\"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow p-6 flex flex-col md:flex-row gap-6\">\n                <div class=\"md:w-1/4 lg:w-1/5 relative rounded-lg overflow-hidden\">\n                  <img :src=\"article.coverImage\" alt=\"Article cover\" class=\"w-full h-48 object-cover\">\n                  <span :class=\"`absolute top-3 left-3 px-3 py-1 rounded-full text-xs font-medium text-white ${getCategoryColor(article.category)}`\">\n                    {{ article.category }}\n                  </span>\n                </div>\n                <div class=\"md:w-3/4 lg:w-4/5 flex flex-col\">\n                  <h3 class=\"text-xl font-bold mb-2 hover:text-indigo-600 transition-colors cursor-pointer\">{{ article.title }}</h3>\n                  <p class=\"text-gray-600 mb-4 flex-grow line-clamp-2\">{{ article.summary }}</p>\n                  <div class=\"flex flex-wrap justify-between items-center gap-4\">\n                    <div class=\"flex items-center\">\n                      <img :src=\"article.authorAvatar\" alt=\"Author\" class=\"w-8 h-8 rounded-full mr-2\">\n                      <span class=\"text-sm text-gray-500\">{{ article.author }} · {{ formatDate(article.publishedDate) }}</span>\n                    </div>\n                    <div class=\"flex items-center space-x-4 text-gray-500\">\n                      <span class=\"flex items-center\"><i class=\"fa fa-comment-o mr-1\"></i> {{ article.commentsCount }}</span>\n                      <span class=\"flex items-center\"><i class=\"fa fa-eye mr-1\"></i> {{ article.views }}</span>\n                      <button class=\"text-indigo-600 hover:text-indigo-700 font-medium\" @click.prevent=\"viewArticle(article.id)\">阅读全文</button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            <div class=\"mt-8 text-center\">\n              <button class=\"bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 px-6 py-3 rounded-md font-medium transition-colors\">\n                加载更多\n                <i class=\"fa fa-refresh ml-2\"></i>\n              </button>\n            </div>\n          </section>\n        </div>\n        \n        <!-- 文章列表视图 -->\n        <div v-if=\"currentView === 'articles'\" class=\"space-y-8\">\n          <div class=\"bg-white rounded-xl shadow-md p-6\">\n            <h2 class=\"text-2xl font-bold mb-6\">所有文章</h2>\n            \n            <!-- 筛选和排序 -->\n            <div class=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4\">\n              <div class=\"flex flex-wrap gap-2\">\n                <button class=\"px-4 py-2 rounded-full text-sm bg-indigo-100 text-indigo-700 hover:bg-indigo-200 transition-colors\" @click=\"clearCategoryFilter\">全部</button>\n                <button v-for=\"category in categories\" :key=\"category.id\" class=\"px-4 py-2 rounded-full text-sm\" :class=\"filteredCategory === category.name ? 'bg-indigo-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\" @click=\"filterArticlesByCategory(category.name)\">\n                  {{ category.name }}\n                </button>\n              </div>\n              \n              <div class=\"relative\">\n                <select class=\"appearance-none bg-gray-100 border-0 pl-4 pr-10 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500\">\n                  <option>最新发布</option>\n                  <option>最多阅读</option>\n                  <option>最多评论</option>\n                </select>\n                <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\n                  <i class=\"fa fa-chevron-down text-xs\"></i>\n                </div>\n              </div>\n            </div>\n            \n            <!-- 文章网格 -->\n            <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              <article v-for=\"article in filteredArticles\" :key=\"article.id\" class=\"bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow border border-gray-100\">\n                <div class=\"relative h-48 overflow-hidden\">\n                  <img :src=\"article.coverImage\" alt=\"Article cover\" class=\"w-full h-full object-cover transition-transform duration-500 hover:scale-110\">\n                  <div class=\"absolute top-4 left-4\">\n                    <span :class=\"`px-3 py-1 rounded-full text-xs font-medium text-white ${getCategoryColor(article.category)}`\">\n                      {{ article.category }}\n                    </span>\n                  </div>\n                </div>\n                <div class=\"p-5\">\n                  <h3 class=\"text-lg font-bold mb-2 hover:text-indigo-600 transition-colors cursor-pointer\">{{ article.title }}</h3>\n                  <p class=\"text-gray-600 text-sm mb-3 line-clamp-2\">{{ article.summary }}</p>\n                  <div class=\"flex justify-between items-center text-sm text-gray-500\">\n                    <span>{{ formatDate(article.publishedDate) }}</span>\n                    <span class=\"flex items-center\"><i class=\"fa fa-comment-o mr-1\"></i> {{ article.commentsCount }}</span>\n                  </div>\n                  <button class=\"mt-3 w-full text-center text-indigo-600 hover:text-indigo-700 text-sm font-medium\" @click.prevent=\"viewArticle(article.id)\">阅读全文</button>\n                </div>\n              </article>\n            </div>\n            \n            <!-- 分页 -->\n            <div class=\"mt-8 flex justify-center\">\n              <nav class=\"inline-flex rounded-md shadow-sm\">\n                <button class=\"px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 rounded-l-md\">\n                  <i class=\"fa fa-chevron-left\"></i>\n                </button>\n                <button class=\"px-4 py-2 border-t border-b border-gray-300 bg-indigo-50 text-sm font-medium text-indigo-600\">1</button>\n                <button class=\"px-4 py-2 border-t border-b border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50\">2</button>\n                <button class=\"px-4 py-2 border-t border-b border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50\">3</button>\n                <button class=\"px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 rounded-r-md\">\n                  <i class=\"fa fa-chevron-right\"></i>\n                </button>\n              </nav>\n            </div>\n          </div>\n        </div>\n        \n        <!-- 分类视图 -->\n        <div v-if=\"currentView === 'categories'\" class=\"space-y-8\">\n          <div class=\"bg-white rounded-xl shadow-md p-6\">\n            <h2 class=\"text-2xl font-bold mb-6\">文章分类</h2>\n            \n            <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div v-for=\"category in categories\" :key=\"category.id\" class=\"flex items-start p-5 rounded-lg border border-gray-100 hover:border-indigo-200 hover:bg-indigo-50 transition-colors group cursor-pointer\" @click=\"filterArticlesByCategory(category.name)\">\n                <div class=\"w-12 h-12 rounded-full flex items-center justify-center mr-4 bg-indigo-100 text-indigo-600 group-hover:bg-indigo-600 group-hover:text-white transition-colors flex-shrink-0\">\n                  <i :class=\"category.icon + ' text-xl'\"></i>\n                </div>\n                <div class=\"flex-grow\">\n                  <h3 class=\"font-bold text-lg mb-1\">{{ category.name }}</h3>\n                  <p class=\"text-gray-600 text-sm mb-2\">{{ category.description }}</p>\n                  <div class=\"flex items-center text-sm text-gray-500\">\n                    <span>{{ category.count }} 篇文章</span>\n                    <span class=\"mx-2\">•</span>\n                    <span>最后更新: {{ category.lastUpdated }}</span>\n                  </div>\n                </div>\n                <div class=\"flex-shrink-0 ml-2 text-indigo-600 opacity-0 group-hover:opacity-100 transition-opacity\">\n                  <i class=\"fa fa-arrow-right\"></i>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <!-- 文章详情视图 -->\n        <div v-if=\"currentView === 'articleDetail'\" class=\"space-y-8\">\n          <article class=\"bg-white rounded-xl shadow-md overflow-hidden\">\n            <div class=\"relative h-64 md:h-80 lg:h-96\">\n              <img :src=\"currentArticle.coverImage\" alt=\"Article cover\" class=\"w-full h-full object-cover\">\n              <div class=\"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent\"></div>\n              <div class=\"absolute bottom-0 left-0 right-0 p-6 md:p-8 text-white\">\n                <span :class=\"`px-3 py-1 rounded-full text-xs font-medium mb-4 inline-block ${getCategoryColor(currentArticle.category)}`\">\n                  {{ currentArticle.category }}\n                </span>\n                <h1 class=\"text-2xl md:text-3xl lg:text-4xl font-bold mb-3\">{{ currentArticle.title }}</h1>\n                <div class=\"flex flex-wrap items-center gap-4 text-sm text-white/90\">\n                  <div class=\"flex items-center\">\n                    <img :src=\"currentArticle.authorAvatar\" alt=\"Author\" class=\"w-6 h-6 rounded-full mr-2\">\n                    <span>{{ currentArticle.author }}</span>\n                  </div>\n                  <span>{{ formatDate(currentArticle.publishedDate) }}</span>\n                  <span class=\"flex items-center\"><i class=\"fa fa-eye mr-1\"></i> {{ currentArticle.views }}</span>\n                </div>\n              </div>\n            </div>\n            \n            <div class=\"p-6 md:p-8 lg:p-10\">\n              <div class=\"prose max-w-none\">\n                <div v-html=\"currentArticle.content\" class=\"article-content space-y-6\"></div>\n              </div>\n              \n              <!-- 标签 -->\n              <div class=\"mt-8 pt-6 border-t border-gray-100\">\n                <div class=\"flex flex-wrap items-center gap-2\">\n                  <span class=\"text-gray-500\">标签:</span>\n                  <span v-for=\"tag in currentArticle.tags\" :key=\"tag\" class=\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\">#{{ tag }}</span>\n                </div>\n              </div>\n              \n              <!-- 分享 -->\n              <div class=\"mt-6 flex items-center justify-between\">\n                <div class=\"flex items-center gap-3\">\n                  <button class=\"flex items-center gap-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm transition-colors\">\n                    <i class=\"fa fa-heart-o text-red-500\"></i>\n                    <span>喜欢 ({{ currentArticle.likes }})</span>\n                  </button>\n                  <button class=\"flex items-center gap-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm transition-colors\">\n                    <i class=\"fa fa-bookmark-o\"></i>\n                    <span>收藏</span>\n                  </button>\n                </div>\n                \n                <div class=\"flex items-center gap-2\">\n                  <span class=\"text-sm text-gray-500\">分享:</span>\n                  <button class=\"w-8 h-8 rounded-full bg-[#1877F2] flex items-center justify-center text-white hover:bg-[#166FE5] transition-colors\">\n                    <i class=\"fa fa-facebook\"></i>\n                  </button>\n                  <button class=\"w-8 h-8 rounded-full bg-[#1DA1F2] flex items-center justify-center text-white hover:bg-[#1a91da] transition-colors\">\n                    <i class=\"fa fa-twitter\"></i>\n                  </button>\n                  <button class=\"w-8 h-8 rounded-full bg-[#25D366] flex items-center justify-center text-white hover:bg-[#22c15c] transition-colors\">\n                    <i class=\"fa fa-whatsapp\"></i>\n                  </button>\n                  <button class=\"w-8 h-8 rounded-full bg-[#0A66C2] flex items-center justify-center text-white hover:bg-[#095cb5] transition-colors\">\n                    <i class=\"fa fa-linkedin\"></i>\n                  </button>\n                </div>\n              </div>\n            </div>\n          </article>\n          \n          <!-- 作者信息 -->\n          <div class=\"bg-white rounded-xl shadow-md p-6 flex flex-col md:flex-row items-center gap-6\">\n            <img :src=\"currentArticle.authorAvatar\" alt=\"Author\" class=\"w-20 h-20 rounded-full object-cover border-4 border-white shadow-md\">\n            <div class=\"text-center md:text-left\">\n              <h3 class=\"text-xl font-bold mb-1\">{{ currentArticle.author }}</h3>\n              <p class=\"text-gray-600 mb-3\">{{ currentArticle.authorBio }}</p>\n              <button class=\"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md text-sm transition-colors\">\n                关注作者\n              </button>\n            </div>\n          </div>\n          \n          <!-- 评论区 -->\n          <div class=\"bg-white rounded-xl shadow-md p-6\">\n            <h3 class=\"text-xl font-bold mb-6\">评论 ({{ currentArticle.commentsCount }})</h3>\n            \n            <!-- 评论输入 -->\n            <div class=\"mb-8\">\n              <div class=\"flex gap-4\">\n                <img :src=\"currentUser ? currentUser.avatar : 'https://picsum.photos/id/64/100/100'\" alt=\"Your avatar\" class=\"w-10 h-10 rounded-full\">\n                <div class=\"flex-grow\">\n                  <textarea v-model=\"commentContent\" :placeholder=\"currentUser ? '分享你的想法...' : '请登录后发表评论...'\" class=\"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none\" rows=\"3\" :disabled=\"!currentUser || isSubmittingComment\"></textarea>\n                  <div class=\"mt-3 flex justify-between items-center\">\n                    <div class=\"flex gap-2\">\n                      <button class=\"w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-700 transition-colors\" disabled>\n                        <i class=\"fa fa-image\"></i>\n                      </button>\n                      <button class=\"w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-700 transition-colors\" disabled>\n                        <i class=\"fa fa-smile-o\"></i>\n                      </button>\n                    </div>\n                    <div>\n                      <button v-if=\"!currentUser\" class=\"bg-gray-200 text-gray-600 px-4 py-2 rounded-md text-sm transition-colors mr-2\" @click=\"showAuthView('login')\">\n                        登录\n                      </button>\n                      <button :class=\"['px-4 py-2 rounded-md text-sm transition-colors', currentUser && !isSubmittingComment ? 'bg-indigo-600 hover:bg-indigo-700 text-white' : 'bg-gray-200 text-gray-600 cursor-not-allowed']\" @click=\"submitComment\" :disabled=\"!currentUser || isSubmittingComment || !commentContent.trim()\">\n                        {{ isSubmittingComment ? '发表中...' : '发表评论' }}\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            <!-- 评论列表 -->\n            <div class=\"space-y-6\">\n              <div v-for=\"comment in currentArticle.comments\" :key=\"comment.id\" class=\"border-b border-gray-100 pb-6 last:border-0 last:pb-0\">\n                <div class=\"flex gap-4\">\n                  <img :src=\"comment.authorAvatar\" alt=\"Comment author\" class=\"w-10 h-10 rounded-full\">\n                  <div class=\"flex-grow\">\n                    <div class=\"bg-gray-50 p-4 rounded-lg\">\n                      <div class=\"flex justify-between items-start mb-2\">\n                        <h4 class=\"font-medium\">{{ comment.author }}</h4>\n                        <span class=\"text-xs text-gray-500\">{{ formatRelativeTime(comment.timestamp) }}</span>\n                      </div>\n                      <p class=\"text-gray-700\">{{ comment.content }}</p>\n                    </div>\n                    <div class=\"mt-2 flex items-center gap-4 text-sm\">\n                      <button class=\"text-gray-500 hover:text-indigo-600 transition-colors flex items-center gap-1\" @click=\"toggleLike(comment)\">\n                        <i :class=\"comment.isLiked ? 'fa fa-heart text-red-500' : 'fa fa-heart-o'\"></i>\n                        <span>{{ comment.likes }}</span>\n                      </button>\n                      <button class=\"text-gray-500 hover:text-indigo-600 transition-colors\" @click=\"toggleReplyBox(comment)\">回复</button>\n                    </div>\n                    \n                    <!-- 嵌套回复 -->\n                    <div class=\"mt-4 ml-6 space-y-4\">\n                      <div v-for=\"reply in comment.replies\" :key=\"reply.id\" class=\"flex gap-3\">\n                        <img :src=\"reply.authorAvatar\" alt=\"Reply author\" class=\"w-8 h-8 rounded-full\">\n                        <div class=\"flex-grow\">\n                          <div class=\"bg-gray-50 p-3 rounded-lg text-sm\">\n                            <div class=\"flex justify-between items-start mb-1\">\n                              <h5 class=\"font-medium\">{{ reply.author }}</h5>\n                              <span class=\"text-xs text-gray-500\">{{ formatRelativeTime(reply.timestamp) }}</span>\n                            </div>\n                            <p class=\"text-gray-700\">{{ reply.content }}</p>\n                          </div>\n                          <div class=\"mt-1 flex items-center gap-4 text-xs\">\n                            <button class=\"text-gray-500 hover:text-indigo-600 transition-colors flex items-center gap-1\" @click=\"toggleLike(reply, comment)\">\n                              <i :class=\"reply.isLiked ? 'fa fa-heart text-red-500' : 'fa fa-heart-o'\"></i>\n                              <span>{{ reply.likes }}</span>\n                            </button>\n                            <button class=\"text-gray-500 hover:text-indigo-600 transition-colors\" @click=\"toggleReplyBox(comment, reply)\">回复</button>\n                          </div>\n                        </div>\n                      </div>\n                       \n                      <!-- 回复输入框 -->\n                      <div v-if=\"replyBoxVisible.commentId === comment.id\" class=\"flex gap-3\">\n                        <img :src=\"currentUser ? currentUser.avatar : 'https://picsum.photos/id/64/100/100'\" alt=\"Your avatar\" class=\"w-8 h-8 rounded-full\">\n                        <div class=\"flex-grow\">\n                          <textarea v-model=\"replyBoxVisible.content\" :placeholder=\"replyBoxVisible.replyTo ? `回复 @${replyBoxVisible.replyTo.author}...` : `回复 @${comment.author}...`\" class=\"w-full border border-gray-300 rounded-lg p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none\" rows=\"2\" :disabled=\"!currentUser || isSubmittingReply\"></textarea>\n                          <div class=\"mt-2 flex justify-end gap-2\">\n                            <button class=\"px-3 py-1 border border-gray-300 text-gray-700 rounded-md text-sm hover:bg-gray-50 transition-colors\" @click=\"cancelReply\">取消</button>\n                            <button :class=\"['px-3 py-1 rounded-md text-sm transition-colors', currentUser && !isSubmittingReply ? 'bg-indigo-600 text-white hover:bg-indigo-700' : 'bg-gray-200 text-gray-600 cursor-not-allowed']\" @click=\"submitReply(comment)\" :disabled=\"!currentUser || isSubmittingReply || !replyBoxVisible.content.trim()\">\n                              {{ isSubmittingReply ? '回复中...' : '回复' }}\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                       \n                      <!-- 显示回复按钮 -->\n                      <button v-else class=\"flex items-center text-sm text-indigo-600 hover:text-indigo-700\" @click=\"toggleReplyBox(comment)\">\n                        <i class=\"fa fa-reply mr-1\"></i>\n                        <span>回复 @{{ comment.author }}</span>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            <!-- 加载更多评论 -->\n            <div class=\"mt-6 text-center\">\n              <button class=\"bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 px-4 py-2 rounded-md text-sm font-medium transition-colors\">\n                查看更多评论\n              </button>\n            </div>\n          </div>\n          \n          <!-- 相关文章 -->\n          <div>\n            <h3 class=\"text-xl font-bold mb-6\">相关推荐</h3>\n            <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              <article v-for=\"article in relatedArticles\" :key=\"article.id\" class=\"bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow border border-gray-100\">\n                <div class=\"relative h-40 overflow-hidden\">\n                  <img :src=\"article.coverImage\" alt=\"Article cover\" class=\"w-full h-full object-cover transition-transform duration-500 hover:scale-110\">\n                </div>\n                <div class=\"p-4\">\n                  <h3 class=\"text-base font-bold mb-2 hover:text-indigo-600 transition-colors cursor-pointer line-clamp-2\">{{ article.title }}</h3>\n                  <div class=\"flex justify-between items-center text-xs text-gray-500\">\n                    <span>{{ formatDate(article.publishedDate) }}</span>\n                    <span class=\"flex items-center\"><i class=\"fa fa-comment-o mr-1\"></i> {{ article.commentsCount }}</span>\n                  </div>\n                </div>\n              </article>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <!-- 管理后台视图 -->\n      <div v-if=\"isAdminView\" class=\"space-y-8\">\n        <div class=\"bg-white rounded-xl shadow-md p-6\">\n          <div class=\"flex justify-between items-center mb-6\">\n            <h2 class=\"text-2xl font-bold\">管理后台</h2>\n            <div class=\"flex items-center gap-3\">\n              <div class=\"relative\">\n                <img src=\"https://picsum.photos/id/64/100/100\" alt=\"Admin\" class=\"w-10 h-10 rounded-full border-2 border-indigo-200\">\n                <span class=\"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white\"></span>\n              </div>\n              <span class=\"font-medium\">管理员</span>\n            </div>\n          </div>\n          \n          <!-- 统计卡片 -->\n          <div class=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n            <div class=\"bg-indigo-50 rounded-lg p-5 border border-indigo-100\">\n              <div class=\"flex justify-between items-start\">\n                <div>\n                  <p class=\"text-sm text-indigo-600 font-medium\">总文章数</p>\n                  <h3 class=\"text-2xl font-bold mt-1\">{{ articles.length }}</h3>\n                </div>\n                <div class=\"w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600\">\n                  <i class=\"fa fa-file-text-o\"></i>\n                </div>\n              </div>\n              <div class=\"mt-4 flex items-center text-sm\">\n                <span class=\"text-green-600 flex items-center\">\n                  <i class=\"fa fa-arrow-up mr-1\"></i> 12%\n                </span>\n                <span class=\"text-gray-500 ml-2\">较上月</span>\n              </div>\n            </div>\n            \n            <div class=\"bg-green-50 rounded-lg p-5 border border-green-100\">\n              <div class=\"flex justify-between items-start\">\n                <div>\n                  <p class=\"text-sm text-green-600 font-medium\">总评论数</p>\n                  <h3 class=\"text-2xl font-bold mt-1\">{{ totalComments }}</h3>\n                </div>\n                <div class=\"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center text-green-600\">\n                  <i class=\"fa fa-comments-o\"></i>\n                </div>\n              </div>\n              <div class=\"mt-4 flex items-center text-sm\">\n                <span class=\"text-green-600 flex items-center\">\n                  <i class=\"fa fa-arrow-up mr-1\"></i> 8%\n                </span>\n                <span class=\"text-gray-500 ml-2\">较上月</span>\n              </div>\n            </div>\n            \n            <div class=\"bg-blue-50 rounded-lg p-5 border border-blue-100\">\n              <div class=\"flex justify-between items-start\">\n                <div>\n                  <p class=\"text-sm text-blue-600 font-medium\">总访问量</p>\n                  <h3 class=\"text-2xl font-bold mt-1\">{{ totalViews }}</h3>\n                </div>\n                <div class=\"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600\">\n                  <i class=\"fa fa-eye\"></i>\n                </div>\n              </div>\n              <div class=\"mt-4 flex items-center text-sm\">\n                <span class=\"text-green-600 flex items-center\">\n                  <i class=\"fa fa-arrow-up mr-1\"></i> 15%\n                </span>\n                <span class=\"text-gray-500 ml-2\">较上月</span>\n              </div>\n            </div>\n            \n            <div class=\"bg-purple-50 rounded-lg p-5 border border-purple-100\">\n              <div class=\"flex justify-between items-start\">\n                <div>\n                  <p class=\"text-sm text-purple-600 font-medium\">分类数</p>\n                  <h3 class=\"text-2xl font-bold mt-1\">{{ categories.length }}</h3>\n                </div>\n                <div class=\"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center text-purple-600\">\n                  <i class=\"fa fa-tags\"></i>\n                </div>\n              </div>\n              <div class=\"mt-4 flex items-center text-sm\">\n                <span class=\"text-gray-500\">无变化</span>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <!-- 管理选项卡 -->\n        <div class=\"bg-white rounded-xl shadow-md overflow-hidden\">\n          <div class=\"border-b border-gray-200\">\n            <div class=\"flex\">\n              <button class=\"px-6 py-4 font-medium border-b-2 border-indigo-600 text-indigo-600\" :class=\"{ 'border-indigo-600 text-indigo-600': adminTab === 'articles' }\" @click=\"adminTab = 'articles'\">\n                文章管理\n              </button>\n              <button class=\"px-6 py-4 font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700\" :class=\"{ 'border-indigo-600 text-indigo-600': adminTab === 'categories' }\" @click=\"adminTab = 'categories'\">\n                分类管理\n              </button>\n              <button class=\"px-6 py-4 font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700\" :class=\"{ 'border-indigo-600 text-indigo-600': adminTab === 'comments' }\" @click=\"adminTab = 'comments'\">\n                评论管理\n              </button>\n            </div>\n          </div>\n          \n          <!-- 文章管理 -->\n          <div v-if=\"adminTab === 'articles'\" class=\"p-6\">\n            <div class=\"flex justify-between items-center mb-6\">\n              <h3 class=\"text-lg font-bold\">文章列表</h3>\n              <button class=\"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md transition-colors flex items-center\" @click=\"showArticleEditor = true; isEditingArticle = false; resetArticleForm()\">\n                <i class=\"fa fa-plus mr-2\"></i>\n                新增文章\n              </button>\n            </div>\n            \n            <!-- 搜索和筛选 -->\n            <div class=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\n              <div class=\"relative w-full md:w-64\">\n                <input type=\"text\" placeholder=\"搜索文章...\" class=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500\">\n                <i class=\"fa fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\"></i>\n              </div>\n              \n              <div class=\"flex flex-wrap gap-2\">\n                <select class=\"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500\">\n                  <option>所有分类</option>\n                  <option v-for=\"category in categories\" :key=\"category.id\">{{ category.name }}</option>\n                </select>\n                <select class=\"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500\">\n                  <option>所有状态</option>\n                  <option>已发布</option>\n                  <option>草稿</option>\n                </select>\n              </div>\n            </div>\n            \n            <!-- 文章表格 -->\n            <div class=\"overflow-x-auto\">\n              <table class=\"min-w-full divide-y divide-gray-200\">\n                <thead>\n                  <tr>\n                    <th class=\"px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/2\">标题</th>\n                    <th class=\"px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">分类</th>\n                    <th class=\"px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">发布日期</th>\n                    <th class=\"px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">状态</th>\n                    <th class=\"px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">操作</th>\n                  </tr>\n                </thead>\n                <tbody class=\"bg-white divide-y divide-gray-200\">\n                  <tr v-for=\"article in articles\" :key=\"article.id\" class=\"hover:bg-gray-50 transition-colors\">\n                    <td class=\"px-4 py-4 whitespace-nowrap\">\n                      <div class=\"flex items-center\">\n                        <div class=\"h-10 w-10 flex-shrink-0 mr-3\">\n                          <img :src=\"article.coverImage\" alt=\"Article\" class=\"h-10 w-10 rounded object-cover\">\n                        </div>\n                        <div>\n                          <div class=\"text-sm font-medium text-gray-900\">{{ article.title }}</div>\n                          <div class=\"text-xs text-gray-500\">\n                            <span class=\"flex items-center\"><i class=\"fa fa-eye mr-1\"></i> {{ article.views }}</span>\n                            <span class=\"mx-2\">•</span>\n                            <span class=\"flex items-center\"><i class=\"fa fa-comment-o mr-1\"></i> {{ article.commentsCount }}</span>\n                          </div>\n                        </div>\n                      </div>\n                    </td>\n                    <td class=\"px-4 py-4 whitespace-nowrap\">\n                      <span class=\"text-sm text-gray-900\">{{ article.category }}</span>\n                    </td>\n                    <td class=\"px-4 py-4 whitespace-nowrap\">\n                      <span class=\"text-sm text-gray-500\">{{ formatDate(article.publishedDate) }}</span>\n                    </td>\n                    <td class=\"px-4 py-4 whitespace-nowrap\">\n                      <span class=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800\">\n                        已发布\n                      </span>\n                    </td>\n                    <td class=\"px-4 py-4 whitespace-nowrap text-sm font-medium\">\n                      <button class=\"text-indigo-600 hover:text-indigo-900 mr-3\" @click=\"editArticle(article.id)\">编辑</button>\n                      <button class=\"text-red-600 hover:text-red-900\" @click=\"deleteArticle(article.id)\">删除</button>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n            \n            <!-- 分页 -->\n            <div class=\"mt-6 flex justify-center\">\n              <nav class=\"inline-flex rounded-md shadow-sm\">\n                <button class=\"px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 rounded-l-md\">\n                  <i class=\"fa fa-chevron-left\"></i>\n                </button>\n                <button class=\"px-4 py-2 border-t border-b border-gray-300 bg-indigo-50 text-sm font-medium text-indigo-600\">1</button>\n                <button class=\"px-4 py-2 border-t border-b border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50\">2</button>\n                <button class=\"px-4 py-2 border-t border-b border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50\">3</button>\n                <button class=\"px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 rounded-r-md\">\n                  <i class=\"fa fa-chevron-right\"></i>\n                </button>\n              </nav>\n            </div>\n          </div>\n          \n          <!-- 分类管理 -->\n          <div v-if=\"adminTab === 'categories'\" class=\"p-6\">\n            <div class=\"flex justify-between items-center mb-6\">\n              <h3 class=\"text-lg font-bold\">分类列表</h3>\n              <button class=\"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md transition-colors flex items-center\" @click=\"showCategoryModal = true; isEditingCategory = false; resetCategoryForm()\">\n                <i class=\"fa fa-plus mr-2\"></i>\n                新增分类\n              </button>\n            </div>\n            \n            <div class=\"bg-gray-50 rounded-lg overflow-hidden\">\n              <table class=\"min-w-full divide-y divide-gray-200\">\n                <thead>\n                  <tr>\n                    <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">图标</th>\n                    <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">名称</th>\n                    <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">描述</th>\n                    <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">文章数</th>\n                    <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">操作</th>\n                  </tr>\n                </thead>\n                <tbody class=\"bg-white divide-y divide-gray-200\">\n                  <tr v-for=\"category in categories\" :key=\"category.id\" class=\"hover:bg-gray-50 transition-colors\">\n                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                      <div class=\"w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600\">\n                        <i :class=\"category.icon\"></i>\n                      </div>\n                    </td>\n                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                      <div class=\"text-sm font-medium text-gray-900\">{{ category.name }}</div>\n                    </td>\n                    <td class=\"px-6 py-4\">\n                      <div class=\"text-sm text-gray-500\">{{ category.description }}</div>\n                    </td>\n                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                      <div class=\"text-sm text-gray-900\">{{ category.count }}</div>\n                    </td>\n                    <td class=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                      <button class=\"text-indigo-600 hover:text-indigo-900 mr-3\" @click=\"editCategory(category.id)\">编辑</button>\n                      <button class=\"text-red-600 hover:text-red-900\" @click=\"deleteCategory(category.id)\">删除</button>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n          \n          <!-- 评论管理 -->\n          <div v-if=\"adminTab === 'comments'\" class=\"p-6\">\n            <div class=\"flex justify-between items-center mb-6\">\n              <h3 class=\"text-lg font-bold\">评论列表</h3>\n              <div class=\"relative w-64\">\n                <input type=\"text\" placeholder=\"搜索评论...\" class=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500\">\n                <i class=\"fa fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\"></i>\n              </div>\n            </div>\n            \n            <div class=\"bg-gray-50 rounded-lg overflow-hidden\">\n              <table class=\"min-w-full divide-y divide-gray-200\">\n                <thead>\n                  <tr>\n                    <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">评论内容</th>\n                    <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">作者</th>\n                    <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">文章</th>\n                    <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">日期</th>\n                    <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">状态</th>\n                    <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">操作</th>\n                  </tr>\n                </thead>\n                <tbody class=\"bg-white divide-y divide-gray-200\">\n                  <tr v-for=\"comment in allComments\" :key=\"comment.id\" class=\"hover:bg-gray-50 transition-colors\">\n                    <td class=\"px-6 py-4 max-w-xs\">\n                      <div class=\"text-sm text-gray-900 line-clamp-2\">{{ comment.content }}</div>\n                    </td>\n                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                      <div class=\"flex items-center\">\n                        <img :src=\"comment.authorAvatar\" alt=\"Author\" class=\"w-6 h-6 rounded-full mr-2\">\n                        <span class=\"text-sm text-gray-900\">{{ comment.author }}</span>\n                      </div>\n                    </td>\n                    <td class=\"px-6 py-4\">\n                      <div class=\"text-sm text-gray-500 line-clamp-1\">{{ getArticleTitleById(comment.articleId) }}</div>\n                    </td>\n                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                      <div class=\"text-sm text-gray-500\">{{ formatDate(comment.timestamp) }}</div>\n                    </td>\n                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                      <span class=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800\">\n                        已通过\n                      </span>\n                    </td>\n                    <td class=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                      <button class=\"text-indigo-600 hover:text-indigo-900 mr-3\">回复</button>\n                      <button class=\"text-red-600 hover:text-red-900\">删除</button>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n            \n            <!-- 分页 -->\n            <div class=\"mt-6 flex justify-center\">\n              <nav class=\"inline-flex rounded-md shadow-sm\">\n                <button class=\"px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 rounded-l-md\">\n                  <i class=\"fa fa-chevron-left\"></i>\n                </button>\n                <button class=\"px-4 py-2 border-t border-b border-gray-300 bg-indigo-50 text-sm font-medium text-indigo-600\">1</button>\n                <button class=\"px-4 py-2 border-t border-b border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50\">2</button>\n                <button class=\"px-4 py-2 border-t border-b border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50\">3</button>\n                <button class=\"px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 rounded-r-md\">\n                  <i class=\"fa fa-chevron-right\"></i>\n                </button>\n              </nav>\n            </div>\n          </div>\n        </div>\n      </div>\n    </main>\n    \n    <!-- 页脚 -->\n    <footer class=\"bg-gray-900 text-white py-12\">\n      <div class=\"container mx-auto px-4\">\n        <div class=\"grid grid-cols-1 md:grid-cols-4 gap-8\">\n          <div>\n            <div class=\"flex items-center space-x-2 mb-4\">\n              <i class=\"fa fa-book text-indigo-400 text-2xl\"></i>\n              <h2 class=\"text-xl font-bold\">InsightBlog</h2>\n            </div>\n            <p class=\"text-gray-400 mb-4\">分享知识，连接思想，探索高质量的文章和见解</p>\n            <div class=\"flex space-x-4\">\n              <a href=\"#\" class=\"text-gray-400 hover:text-white transition-colors\">\n                <i class=\"fa fa-facebook\"></i>\n              </a>\n              <a href=\"#\" class=\"text-gray-400 hover:text-white transition-colors\">\n                <i class=\"fa fa-twitter\"></i>\n              </a>\n              <a href=\"#\" class=\"text-gray-400 hover:text-white transition-colors\">\n                <i class=\"fa fa-instagram\"></i>\n              </a>\n              <a href=\"#\" class=\"text-gray-400 hover:text-white transition-colors\">\n                <i class=\"fa fa-linkedin\"></i>\n              </a>\n            </div>\n          </div>\n          \n          <div>\n            <h3 class=\"text-lg font-semibold mb-4\">快速链接</h3>\n            <ul class=\"space-y-2\">\n              <li><a href=\"#\" class=\"text-gray-400 hover:text-white transition-colors\" @click.prevent=\"switchView('home'); isAdminView = false\">首页</a></li>\n              <li><a href=\"#\" class=\"text-gray-400 hover:text-white transition-colors\" @click.prevent=\"switchView('articles'); isAdminView = false\">所有文章</a></li>\n              <li><a href=\"#\" class=\"text-gray-400 hover:text-white transition-colors\" @click.prevent=\"switchView('categories'); isAdminView = false\">分类</a></li>\n              <li><a href=\"#\" class=\"text-gray-400 hover:text-white transition-colors\">关于我们</a></li>\n              <li><a href=\"#\" class=\"text-gray-400 hover:text-white transition-colors\">联系我们</a></li>\n            </ul>\n          </div>\n          \n          <div>\n            <h3 class=\"text-lg font-semibold mb-4\">热门分类</h3>\n            <ul class=\"space-y-2\">\n              <li v-for=\"category in categories.slice(0, 5)\" :key=\"category.id\">\n                <a href=\"#\" class=\"text-gray-400 hover:text-white transition-colors\" @click.prevent=\"filterArticlesByCategory(category.name); isAdminView = false\">\n                  {{ category.name }}\n                </a>\n              </li>\n            </ul>\n          </div>\n          \n          <div>\n            <h3 class=\"text-lg font-semibold mb-4\">订阅更新</h3>\n            <p class=\"text-gray-400 mb-4\">订阅我们的通讯，获取最新文章和更新</p>\n            <form class=\"flex\">\n              <input type=\"email\" placeholder=\"您的邮箱地址\" class=\"px-4 py-2 rounded-l-md w-full focus:outline-none text-gray-800\">\n              <button type=\"submit\" class=\"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-r-md transition-colors\">\n                订阅\n              </button>\n            </form>\n          </div>\n        </div>\n        \n        <div class=\"mt-12 pt-8 border-t border-gray-800 text-center text-gray-500 text-sm\">\n          <p>&copy; {{ new Date().getFullYear() }} InsightBlog. 保留所有权利。</p>\n        </div>\n      </div>\n    </footer>\n    \n    <!-- 文章编辑器模态框 -->\n    <div v-if=\"showArticleEditor\" class=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\n      <div class=\"bg-white rounded-xl shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col animate-fadeIn\">\n        <div class=\"border-b border-gray-200 px-6 py-4 flex justify-between items-center\">\n          <h3 class=\"text-lg font-bold\">{{ isEditingArticle ? '编辑文章' : '新增文章' }}</h3>\n          <div class=\"flex items-center gap-3\">\n            <button class=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors\" @click=\"showArticleEditor = false\">\n              取消\n            </button>\n            <button class=\"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors\" @click=\"isEditingArticle? updateArticle() : postArticle()\">\n              {{ isEditingArticle ? '更新文章' : '发布文章' }}\n            </button>\n            <button class=\"text-gray-500 hover:text-gray-700\" @click=\"showArticleEditor = false\">\n              <i class=\"fa fa-times\"></i>\n            </button>\n          </div>\n        </div>\n        \n        <div class=\"flex flex-col md:flex-row flex-grow overflow-hidden\">\n          <!-- 编辑器工具栏 -->\n          <div class=\"w-full md:w-64 border-b md:border-b-0 md:border-r border-gray-200 bg-gray-50 p-4 overflow-y-auto\">\n            <div class=\"space-y-6\">\n              <!-- 基本信息 -->\n              <div>\n                <h4 class=\"text-sm font-medium text-gray-700 mb-3\">基本信息</h4>\n                <div class=\"space-y-3\">\n                  <div>\n                    <label class=\"block text-xs text-gray-500 mb-1\">标题</label>\n                    <input type=\"text\" v-model=\"articleForm.title\" class=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500\">\n                  </div>\n                  <div>\n                    <label class=\"block text-xs text-gray-500 mb-1\">分类</label>\n                    <select v-model=\"articleForm.category_id\" class=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500\">\n                  <option value=\"\">选择分类</option>\n                  <option v-for=\"category in categories\" :key=\"category.id\" :value=\"category.id\">{{ category.name }}</option>\n                </select>\n                  </div>\n                  <div>\n                    <label class=\"block text-xs text-gray-500 mb-1\">标签</label>\n                    <input type=\"text\" v-model=\"articleForm.tagsStr\" placeholder=\"用逗号分隔标签\" class=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500\">\n                  </div>\n                  <div>\n                    <label class=\"block text-xs text-gray-500 mb-1\">特色图片</label>\n                    <div class=\"border-2 border-dashed border-gray-300 rounded-md p-3 text-center hover:border-indigo-500 transition-colors cursor-pointer\">\n                      <input type=\"file\" class=\"hidden\" accept=\"image/*\" @change=\"handleCoverImageUpload\">\n                      <div v-if=\"articleForm.coverImage\" class=\"relative\">\n                        <img :src=\"articleForm.coverImage\" alt=\"Cover\" class=\"w-full h-32 object-cover rounded\">\n                        <button type=\"button\" class=\"absolute top-1 right-1 w-6 h-6 bg-black/50 rounded-full flex items-center justify-center text-white\" @click=\"articleForm.coverImage = ''\">\n                          <i class=\"fa fa-times text-xs\"></i>\n                        </button>\n                      </div>\n                      <div v-else class=\"py-4\">\n                        <i class=\"fa fa-cloud-upload text-gray-400 mb-2\"></i>\n                        <p class=\"text-xs text-gray-500\">点击上传或拖放图片</p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              \n              <!-- 发布设置 -->\n              <div>\n                <h4 class=\"text-sm font-medium text-gray-700 mb-3\">发布设置</h4>\n                <div class=\"space-y-3\">\n                  <div>\n                    <label class=\"block text-xs text-gray-500 mb-1\">状态</label>\n                    <select v-model=\"articleForm.status\" class=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500\">\n                      <option value=\"published\">已发布</option>\n                      <option value=\"draft\">草稿</option>\n                    </select>\n                  </div>\n                  <div>\n                    <label class=\"block text-xs text-gray-500 mb-1\">发布日期</label>\n                    <input type=\"date\" v-model=\"articleForm.publishedDate\" class=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500\">\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          \n          <!-- 富文本编辑器 -->\n          <div class=\"flex-grow overflow-hidden flex flex-col\">\n            <!-- 编辑器工具栏 -->\n            <div class=\"border-b border-gray-200 bg-white p-2 flex flex-wrap items-center gap-1\">\n              <button class=\"p-2 hover:bg-gray-100 rounded\" title=\"段落\" @click=\"formatText('formatBlock', 'p')\">\n                <i class=\"fa fa-paragraph\"></i>\n              </button>\n              <div class=\"h-6 border-r border-gray-300 mx-1\"></div>\n              <button class=\"p-2 hover:bg-gray-100 rounded\" title=\"粗体\" @click=\"formatText('bold')\">\n                <i class=\"fa fa-bold\"></i>\n              </button>\n              <button class=\"p-2 hover:bg-gray-100 rounded\" title=\"斜体\" @click=\"formatText('italic')\">\n                <i class=\"fa fa-italic\"></i>\n              </button>\n              <button class=\"p-2 hover:bg-gray-100 rounded\" title=\"下划线\" @click=\"formatText('underline')\">\n                <i class=\"fa fa-underline\"></i>\n              </button>\n              <button class=\"p-2 hover:bg-gray-100 rounded\" title=\"删除线\" @click=\"formatText('strikeThrough')\">\n                <i class=\"fa fa-strikethrough\"></i>\n              </button>\n              <div class=\"h-6 border-r border-gray-300 mx-1\"></div>\n              <button class=\"p-2 hover:bg-gray-100 rounded\" title=\"左对齐\" @click=\"formatText('justifyLeft')\">\n                <i class=\"fa fa-align-left\"></i>\n              </button>\n              <button class=\"p-2 hover:bg-gray-100 rounded\" title=\"居中对齐\" @click=\"formatText('justifyCenter')\">\n                <i class=\"fa fa-align-center\"></i>\n              </button>\n              <button class=\"p-2 hover:bg-gray-100 rounded\" title=\"右对齐\" @click=\"formatText('justifyRight')\">\n                <i class=\"fa fa-align-right\"></i>\n              </button>\n              <button class=\"p-2 hover:bg-gray-100 rounded\" title=\"两端对齐\" @click=\"formatText('justifyFull')\">\n                <i class=\"fa fa-align-justify\"></i>\n              </button>\n              <div class=\"h-6 border-r border-gray-300 mx-1\"></div>\n              <button class=\"p-2 hover:bg-gray-100 rounded\" title=\"无序列表\" @click=\"formatText('insertUnorderedList')\">\n                <i class=\"fa fa-list-ul\"></i>\n              </button>\n              <button class=\"p-2 hover:bg-gray-100 rounded\" title=\"有序列表\" @click=\"formatText('insertOrderedList')\">\n                <i class=\"fa fa-list-ol\"></i>\n              </button>\n              <button class=\"p-2 hover:bg-gray-100 rounded\" title=\"减少缩进\" @click=\"formatText('outdent')\">\n                <i class=\"fa fa-outdent\"></i>\n              </button>\n              <button class=\"p-2 hover:bg-gray-100 rounded\" title=\"增加缩进\" @click=\"formatText('indent')\">\n                <i class=\"fa fa-indent\"></i>\n              </button>\n              <div class=\"h-6 border-r border-gray-300 mx-1\"></div>\n              <button class=\"p-2 hover:bg-gray-100 rounded\" title=\"插入链接\" @click=\"insertLink\">\n                <i class=\"fa fa-link\"></i>\n              </button>\n              <button class=\"p-2 hover:bg-gray-100 rounded\" title=\"插入图片\" @click=\"triggerImageUpload\">\n                <i class=\"fa fa-image\"></i>\n              </button>\n              <button class=\"p-2 hover:bg-gray-100 rounded\" title=\"插入视频\" @click=\"triggerVideoUpload\">\n                <i class=\"fa fa-video-camera\"></i>\n              </button>\n              <button class=\"p-2 hover:bg-gray-100 rounded\" title=\"插入音频\" @click=\"triggerAudioUpload\">\n                <i class=\"fa fa-music\"></i>\n              </button>\n              <div class=\"h-6 border-r border-gray-300 mx-1\"></div>\n              <button class=\"p-2 hover:bg-gray-100 rounded\" title=\"撤销\" @click=\"formatText('undo')\">\n                <i class=\"fa fa-undo\"></i>\n              </button>\n              <button class=\"p-2 hover:bg-gray-100 rounded\" title=\"重做\" @click=\"formatText('redo')\">\n                <i class=\"fa fa-repeat\"></i>\n              </button>\n            </div>\n            \n            <!-- 编辑器内容区 -->\n            <div class=\"flex-grow overflow-y-auto p-6 min-h-[300px] focus:outline-none\" contenteditable=\"true\" ref=\"editorContent\" @input=\"syncEditorContent\">\n              <p></p>\n            </div>\n            \n            <!-- 媒体上传区域 -->\n            <div class=\"border-t border-gray-200 p-4 bg-gray-50\">\n              <h4 class=\"text-sm font-medium text-gray-700 mb-3\">已上传媒体</h4>\n              <div class=\"flex flex-wrap gap-3 max-h-32 overflow-y-auto pb-2\">\n                <div v-for=\"media in articleForm.media\" :key=\"media.id\" class=\"relative group\">\n                  <div v-if=\"media.type === 'image'\" class=\"w-20 h-20 bg-gray-100 rounded overflow-hidden\">\n                    <img :src=\"media.url\" alt=\"Uploaded image\" class=\"w-full h-full object-cover\">\n                  </div>\n                  <div v-if=\"media.type === 'video'\" class=\"w-20 h-20 bg-gray-100 rounded flex items-center justify-center\">\n                    <i class=\"fa fa-video-camera text-gray-500\"></i>\n                  </div>\n                  <div v-if=\"media.type === 'audio'\" class=\"w-20 h-20 bg-gray-100 rounded flex items-center justify-center\">\n                    <i class=\"fa fa-music text-gray-500\"></i>\n                  </div>\n                  <button type=\"button\" class=\"absolute top-1 right-1 w-5 h-5 bg-black/50 rounded-full flex items-center justify-center text-white opacity-0 group-hover:opacity-100 transition-opacity\" @click=\"removeMedia(media.id)\">\n                    <i class=\"fa fa-times text-xs\"></i>\n                  </button>\n                </div>\n                <input type=\"file\" id=\"imageUpload\" class=\"hidden\" accept=\"image/*\" @change=\"handleImageUpload\">\n                <input type=\"file\" id=\"videoUpload\" class=\"hidden\" accept=\"video/*\" @change=\"handleVideoUpload\">\n                <input type=\"file\" id=\"audioUpload\" class=\"hidden\" accept=\"audio/*\" @change=\"handleAudioUpload\">\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- 分类编辑模态框 -->\n    <div v-if=\"showCategoryModal\" class=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\n      <div class=\"bg-white rounded-xl shadow-2xl w-full max-w-md animate-fadeIn\">\n        <div class=\"border-b border-gray-200 px-6 py-4 flex justify-between items-center\">\n          <h3 class=\"text-lg font-bold\">{{ isEditingCategory ? '编辑分类' : '新增分类' }}</h3>\n          <button class=\"text-gray-500 hover:text-gray-700\" @click=\"showCategoryModal = false\">\n            <i class=\"fa fa-times\"></i>\n          </button>\n        </div>\n        \n        <div class=\"p-6\">\n          <div class=\"space-y-4\">\n            <div>\n              <label class=\"block text-sm font-medium text-gray-700 mb-1\">分类名称</label>\n              <input type=\"text\" v-model=\"categoryForm.name\" class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500\">\n            </div>\n            \n            <div>\n              <label class=\"block text-sm font-medium text-gray-700 mb-1\">分类描述</label>\n              <textarea v-model=\"categoryForm.description\" rows=\"3\" class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500\"></textarea>\n            </div>\n            \n            <div>\n              <label class=\"block text-sm font-medium text-gray-700 mb-1\">选择图标</label>\n              <div class=\"grid grid-cols-6 gap-3 mt-2\">\n                <div v-for=\"icon in availableIcons\" :key=\"icon\" class=\"w-12 h-12 rounded-full flex items-center justify-center bg-gray-100 text-gray-700 hover:bg-indigo-100 hover:text-indigo-600 cursor-pointer transition-colors\" :class=\"{ 'bg-indigo-100 text-indigo-600': categoryForm.icon === icon }\" @click=\"categoryForm.icon = icon\">\n                  <i :class=\"icon\"></i>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <div class=\"border-t border-gray-200 px-6 py-4 flex justify-end gap-3\">\n          <button class=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors\" @click=\"showCategoryModal = false\">\n            取消\n          </button>\n          <button class=\"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors\" @click=\"isEditingCategory ? updateCategory() : createCategory()\">\n            {{ isEditingCategory ? '更新分类' : '创建分类' }}\n          </button>\n        </div>\n      </div>\n    </div>\n    \n    <!-- 确认删除模态框 -->\n    <div v-if=\"showDeleteConfirm\" class=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\n      <div class=\"bg-white rounded-xl shadow-2xl w-full max-w-md animate-fadeIn\">\n        <div class=\"p-6 text-center\">\n          <div class=\"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-500 mx-auto mb-4\">\n            <i class=\"fa fa-trash-o text-2xl\"></i>\n          </div>\n          <h3 class=\"text-xl font-bold mb-2\">确认删除</h3>\n          <p class=\"text-gray-600 mb-6\">{{ deleteConfirmMessage }}</p>\n          <div class=\"flex justify-center gap-3\">\n            <button class=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors\" @click=\"showDeleteConfirm = false\">\n              取消\n            </button>\n            <button class=\"px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors\" @click=\"confirmDelete()\">\n              确认删除\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n// import BlogHeader from './components/BlogHeader.vue'\nimport UserLogin from './components/UserLogin.vue'\nimport UserRegister from './components/UserRegister.vue'\n\nexport default {\n  components: {\n    // BlogHeader,\n    // BlogApp,\n    UserLogin,\n    UserRegister\n  },\n  data() {\n    return {\n      // 视图状态\n      isAdminView: false,\n      currentView: 'home',\n      mobileMenuOpen: false,\n      isScrolled: false,\n      adminTab: 'articles',\n      // 认证相关状态\n      isAuthView: false,\n      currentAuthView: 'login', // 'login' 或 'register'\n      currentUser: null,\n      // 评论相关状态\n      commentContent: '',\n      isSubmittingComment: false,\n      isSubmittingReply: false,\n      replyBoxVisible: { visible: false, commentId: null, replyTo: null, content: '' },\n      \n      // 筛选状态\n      filteredCategory: null,\n      \n      // 模态框状态\n      showArticleEditor: false,\n      isEditingArticle: false,\n      showCategoryModal: false,\n      isEditingCategory: false,\n      showDeleteConfirm: false,\n      deleteConfirmMessage: '',\n      deleteItemId: null,\n      deleteItemType: null,\n      \n      // 表单数据\n      articleForm: {\n        id: null,\n        author_id: '1',\n        title: '',\n        category_id: '',\n        tagsStr: '',\n        coverImage: '',\n        content: '',\n        status: 'published',\n        publishedDate: '',\n        media: []\n      },\n      \n      categoryForm: {\n        id: null,\n        name: '',\n        description: '',\n        icon: 'fa-file-text-o'\n      },\n      \n      // 示例数据 - 文章\n      articles: [],\n        // {\n        //   id: 1,\n        //   title: 'Vue 3 组件化开发最佳实践',\n        //   summary: '本文介绍了Vue 3中组件化开发的最佳实践，包括组合式API的使用、组件通信和性能优化等内容。',\n        //   content: `\n        //     <h2>Vue 3 组件化开发最佳实践</h2>\n        //     <p>Vue 3带来了许多新特性，尤其是组合式API，为组件化开发提供了更灵活的方式。本文将介绍一些在Vue 3中进行组件化开发的最佳实践。</p>\n            \n        //     <h3>1. 合理划分组件</h3>\n        //     <p>组件应该遵循单一职责原则，每个组件只负责一件事情。例如，一个页面可以划分为头部、内容区、侧边栏和底部等组件。</p>\n            \n        //     <h3>2. 使用组合式API组织代码</h3>\n        //     <p>组合式API允许我们按照逻辑功能组织代码，而不是按照选项类型。这使得代码更易于理解和维护。</p>\n        //     <pre><code>\n        //     &lt;script setup&gt;\n        //     import { ref, onMounted } from 'vue'\n            \n        //     // 状态\n        //     const count = ref(0)\n            \n        //     // 方法\n        //     function increment() {\n        //       count.value++\n        //     }\n            \n        //     // 生命周期\n        //     onMounted(() => {\n        //       console.log('Component mounted')\n        //     })\n        //     &lt;/script&gt;\n        //     </code></pre>\n            \n        //     <h3>3. 组件通信方式选择</h3>\n        //     <p>Vue 3提供了多种组件通信方式，应根据场景选择合适的方式：</p>\n        //     <ul>\n        //       <li>父子组件：props和emit</li>\n        //       <li>跨组件：provide和inject</li>\n        //       <li>全局状态：Pinia或Vuex</li>\n        //     </ul>\n            \n        //     <h3>4. 性能优化</h3>\n        //     <p>组件化开发中需要注意性能问题，例如：</p>\n        //     <ul>\n        //       <li>使用&lt;teleport&gt;处理模态框等组件</li>\n        //       <li>使用v-memo缓存组件渲染结果</li>\n        //       <li>合理使用异步组件</li>\n        //     </ul>\n            \n        //     <h3>结语</h3>\n        //     <p>良好的组件化设计可以显著提高代码的可维护性和复用性。希望本文介绍的最佳实践能帮助你更好地进行Vue 3开发。</p>\n        //   `,\n        //   coverImage: 'https://picsum.photos/id/0/800/400',\n        //   category: '前端开发',\n        //   tags: ['Vue', '前端', '组件化'],\n        //   author: '张开发',\n        //   authorAvatar: 'https://picsum.photos/id/1005/100/100',\n        //   authorBio: '资深前端工程师，Vue.js 爱好者，拥有5年前端开发经验。',\n        //   publishedDate: '2023-06-15',\n        //   views: 1243,\n        //   likes: 89,\n        //   commentsCount: 32,\n        //   comments: [\n        //     {\n        //       id: 101,\n        //       articleId: 1,\n        //       author: '李同学',\n        //       authorAvatar: 'https://picsum.photos/id/1012/100/100',\n        //       content: '非常实用的文章，学习到了很多Vue 3组件化的技巧，谢谢分享！',\n        //       timestamp: '2023-06-16T10:23:45',\n        //       likes: 15,\n        //       replies: [\n        //         {\n        //           id: 1011,\n        //           author: '张开发',\n        //           authorAvatar: 'https://picsum.photos/id/1005/100/100',\n        //           content: '感谢支持，有任何问题欢迎交流！',\n        //           timestamp: '2023-06-16T14:12:30',\n        //           likes: 5\n        //         }\n        //       ]\n        //     },\n        //     {\n        //       id: 102,\n        //       articleId: 1,\n        //       author: '王工程师',\n        //       authorAvatar: 'https://picsum.photos/id/1025/100/100',\n        //       content: '关于组件通信部分，我觉得还可以补充一下使用Pinia的案例，这样会更全面。',\n        //       timestamp: '2023-06-17T09:05:12',\n        //       likes: 8,\n        //       replies: []\n        //     }\n        //   ]\n        // },\n        // {\n        //   id: 2,\n        //   title: 'Python数据分析入门指南',\n        //   summary: '本文为初学者提供了Python数据分析的入门指南，包括常用库介绍、基本流程和实战案例。',\n        //   content: '<p>Python数据分析入门指南内容...</p>',\n        //   coverImage: 'https://picsum.photos/id/180/800/400',\n        //   category: '数据分析',\n        //   tags: ['Python', '数据分析', '入门'],\n        //   author: '李数据',\n        //   authorAvatar: 'https://picsum.photos/id/1010/100/100',\n        //   authorBio: '数据科学家，擅长Python数据分析和机器学习，著有《Python数据处理实战》。',\n        //   publishedDate: '2023-06-10',\n        //   views: 987,\n        //   likes: 65,\n        //   commentsCount: 24,\n        //   comments: []\n        // },\n        // {\n        //   id: 3,\n        //   title: 'React性能优化的10个技巧',\n        //   summary: '本文总结了10个实用的React性能优化技巧，帮助你构建更高效的React应用。',\n        //   content: '<p>React性能优化的10个技巧内容...</p>',\n        //   coverImage: 'https://picsum.photos/id/48/800/400',\n        //   category: '前端开发',\n        //   tags: ['React', '性能优化', '前端'],\n        //   author: '赵前端',\n        //   authorAvatar: 'https://picsum.photos/id/1027/100/100',\n        //   authorBio: '全栈开发工程师，React技术专家，拥有多年大型应用开发经验。',\n        //   publishedDate: '2023-06-05',\n        //   views: 1567,\n        //   likes: 120,\n        //   commentsCount: 45,\n        //   comments: []\n        // },\n        // {\n        //   id: 4,\n        //   title: '机器学习在金融领域的应用',\n        //   summary: '本文探讨了机器学习技术在金融领域的各种应用场景，包括风险评估、欺诈检测等。',\n        //   content: '<p>机器学习在金融领域的应用内容...</p>',\n        //   coverImage: 'https://picsum.photos/id/160/800/400',\n        //   category: '人工智能',\n        //   tags: ['机器学习', '金融', 'AI'],\n        //   author: '陈智能',\n        //   authorAvatar: 'https://picsum.photos/id/1074/100/100',\n        //   authorBio: 'AI研究员，专注于机器学习在金融科技领域的应用研究。',\n        //   publishedDate: '2023-05-28',\n        //   views: 876,\n        //   likes: 54,\n        //   commentsCount: 18,\n        //   comments: []\n        // },\n        // {\n        //   id: 5,\n        //   title: 'Docker容器化部署最佳实践',\n        //   summary: '本文介绍了使用Docker进行容器化部署的最佳实践，包括镜像优化、容器编排等内容。',\n        //   content: '<p>Docker容器化部署最佳实践内容...</p>',\n        //   coverImage: 'https://picsum.photos/id/119/800/400',\n        //   category: '后端开发',\n        //   tags: ['Docker', '容器化', '部署'],\n        //   author: '刘运维',\n        //   authorAvatar: 'https://picsum.photos/id/1066/100/100',\n        //   authorBio: 'DevOps工程师，容器技术专家，擅长自动化部署和运维。',\n        //   publishedDate: '2023-05-20',\n        //   views: 1123,\n        //   likes: 78,\n        //   commentsCount: 31,\n        //   comments: []\n        // },\n        // {\n        //   id: 6,\n        //   title: 'UI设计中的色彩理论',\n        //   summary: '本文讲解了UI设计中的色彩理论，包括色彩搭配原则、情感传达和实际应用案例。',\n        //   content: '<p>UI设计中的色彩理论内容...</p>',\n        //   coverImage: 'https://picsum.photos/id/96/800/400',\n        //   category: '设计',\n        //   tags: ['UI设计', '色彩理论', '设计原则'],\n        //   author: '孙设计',\n        //   authorAvatar: 'https://picsum.photos/id/1062/100/100',\n        //   authorBio: '资深UI/UX设计师，曾任职于多家知名互联网公司，专注用户体验设计。',\n        //   publishedDate: '2023-05-15',\n        //   views: 765,\n        //   likes: 43,\n        //   commentsCount: 15,\n        //   comments: []\n        // }\n      // ],\n      \n      // 示例数据 - 分类\n      categories: [],\n        // { id: 1, name: '前端开发', description: '包括HTML、CSS、JavaScript等前端技术和框架相关内容', icon: 'fa-code', count: 28, lastUpdated: '2023-06-15' },\n        // { id: 2, name: '后端开发', description: '服务器端开发技术、数据库、API设计等相关内容', icon: 'fa-server', count: 21, lastUpdated: '2023-05-20' },\n        // { id: 3, name: '数据分析', description: '数据处理、分析、可视化等相关技术和工具', icon: 'fa-bar-chart', count: 15, lastUpdated: '2023-06-10' },\n        // { id: 4, name: '人工智能', description: '机器学习、深度学习、自然语言处理等AI相关内容', icon: 'fa-brain', count: 19, lastUpdated: '2023-05-28' },\n        // { id: 5, name: '设计', description: 'UI/UX设计、交互设计、视觉设计等相关内容', icon: 'fa-paint-brush', count: 12, lastUpdated: '2023-05-15' },\n        // { id: 6, name: '移动开发', description: 'iOS、Android应用开发相关技术和框架', icon: 'fa-mobile', count: 8, lastUpdated: '2023-05-10' }\n      // ],\n      \n      // 可用图标列表\n      availableIcons: [\n        'fa-code', 'fa-server', 'fa-bar-chart', 'fa-brain', \n        'fa-paint-brush', 'fa-mobile', 'fa-database', 'fa-cloud',\n        'fa-file-text-o', 'fa-image', 'fa-video-camera', 'fa-music'\n      ],\n      \n      // 当前文章\n      currentArticle: null,\n      \n      // 相关文章\n      relatedArticles: []\n    }\n  },\n  \n  computed: {\n    // 特色文章\n    featuredArticles() {\n      return this.articles.slice(0, 3);\n    },\n    \n    // 最新文章\n    latestArticles() {\n      return [...this.articles].sort((a, b) => new Date(b.publishedDate) - new Date(a.publishedDate)).slice(0, 4);\n    },\n    \n    // 筛选后的文章\n    filteredArticles() {\n      if (!this.filteredCategory) {\n        return this.articles;\n      }\n      return this.articles.filter(article => article.category === this.filteredCategory);\n    },\n    \n    // 所有评论\n    allComments() {\n      let comments = [];\n      if (this.articles && Array.isArray(this.articles)) {\n        this.articles.forEach(article => {\n          if (article.comments && Array.isArray(article.comments)) {\n            article.comments.forEach(comment => {\n              comments.push({...comment, articleId: article.id});\n              if (comment.replies && Array.isArray(comment.replies)) {\n                comment.replies.forEach(reply => {\n                  comments.push({...reply, articleId: article.id, isReply: true, parentId: comment.id});\n                });\n              }\n            });\n          }\n        });\n      }\n      return comments.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp)).slice(0, 5);\n    },\n    \n    // 总评论数\n    totalComments() {\n      let count = 0;\n      this.articles.forEach(article => {\n        count += article.commentsCount;\n      });\n      return count;\n    },\n    \n    // 总访问量\n    totalViews() {\n      let count = 0;\n      this.articles.forEach(article => {\n        count += article.views;\n      });\n      return count;\n    }\n  },\n  \n  created() {\n    // 组件创建时初始化认证状态\n    this.initAuth();\n    // 页面加载时获取文章列表和分类\n    this.fetchArticles();\n    this.fetchCategories();\n    // 监听滚动事件\n    window.addEventListener('scroll', this.handleScroll);\n    \n    // 初始化日期\n    this.articleForm.publishedDate = this.formatDateForInput(new Date());\n  },\n  \n  beforeUnmount() {\n    window.removeEventListener('scroll', this.handleScroll);\n  },\n  \n  methods: {\n    // 处理滚动事件\n    handleScroll() {\n      this.isScrolled = window.scrollY > 10;\n    },\n    \n    // 切换视图\n    switchView(view) {\n      this.currentView = view;\n      this.filteredCategory = null;\n      // 滚动到顶部\n      window.scrollTo(0, 0);\n    },\n    \n    // 切换前后台视图\n    toggleAdminView() {\n      this.isAdminView = !this.isAdminView;\n      // 滚动到顶部\n      window.scrollTo(0, 0);\n    },\n    \n    // 根据分类筛选文章\n    filterArticlesByCategory(category) {\n      this.filteredCategory = category;\n      this.currentView = 'articles';\n      // 滚动到顶部\n      window.scrollTo(0, 0);\n    },\n    \n    // 清除分类筛选\n    clearCategoryFilter() {\n      this.filteredCategory = null;\n    },\n    \n    // API调用 - 获取文章列表\n    async fetchArticles(search = '') {\n      this.loading = true;\n      try {\n        let url = 'http://localhost:5000/api/articles';\n        if (search) {\n          url += `?search=${encodeURIComponent(search)}`;\n        }\n        \n        const response = await fetch(url);\n        if (!response.ok) {\n          throw new Error('Failed to fetch articles');\n        }\n        \n        var articles = await response.json();\n        console.log(articles['articles']);\n        this.articles = articles['articles'];\n        // 简单处理热门文章（取前3篇）\n        this.popularArticles = [...this.articles].slice(0, 3);\n        \n        // 为每篇文章添加评论计数\n        for (const article of this.articles) {\n          const commentsResponse = await fetch(`http://localhost:5000/api/articles/${article.id}/comments`);\n          if (commentsResponse.ok) {\n            const comments = await commentsResponse.json();\n            article.commentsCount = comments.length;\n          } else {\n            article.commentsCount = 0;\n          }\n        }\n      } catch (error) {\n        console.error('Error fetching articles:', error);\n        alert('获取文章失败，请稍后重试');\n      } finally {\n        this.loading = false;\n      }\n    },\n    \n    // API调用 - 获取分类列表\n    async fetchCategories() {\n      try {\n        const url = 'http://localhost:5000/api/categories';\n        const response = await fetch(url);\n        if (!response.ok) {\n          throw new Error('Failed to fetch categories');\n        }\n        \n        this.categories = await response.json() || [];\n        console.log(this.categories);\n      } catch (error) {\n        console.error('Error fetching categories:', error);\n        // 如果API调用失败，使用本地示例数据\n        this.categories = [\n          { id: 1, name: '前端开发', description: '包括HTML、CSS、JavaScript等前端技术和框架相关内容', icon: 'fa-code', count: 28, lastUpdated: '2023-06-15' },\n          { id: 2, name: '后端开发', description: '服务器端开发技术、数据库、API设计等相关内容', icon: 'fa-server', count: 21, lastUpdated: '2023-05-20' },\n          { id: 3, name: '数据分析', description: '数据处理、分析、可视化等相关技术和工具', icon: 'fa-bar-chart', count: 15, lastUpdated: '2023-06-10' },\n          { id: 4, name: '人工智能', description: '机器学习、深度学习、自然语言处理等AI相关内容', icon: 'fa-brain', count: 19, lastUpdated: '2023-05-28' },\n          { id: 5, name: '设计', description: 'UI/UX设计、交互设计、视觉设计等相关内容', icon: 'fa-paint-brush', count: 12, lastUpdated: '2023-05-15' },\n          { id: 6, name: '移动开发', description: 'iOS、Android应用开发相关技术和框架', icon: 'fa-mobile', count: 8, lastUpdated: '2023-05-10' }\n        ];\n      }\n    },\n\n    // 查看文章详情\n    viewArticle(id) {\n      this.currentArticle = this.articles.find(article => article.id === id);\n      if (this.currentArticle) {\n        // 查找相关文章（同分类，排除当前文章）\n        this.relatedArticles = this.articles\n          .filter(article => article.category === this.currentArticle.category && article.id !== id)\n          .slice(0, 3);\n        \n        this.currentView = 'articleDetail';\n        // 滚动到顶部\n        window.scrollTo(0, 0);\n      }\n    },\n    \n    // 获取分类颜色\n    getCategoryColor(category) {\n      const colorMap = {\n        '前端开发': 'bg-blue-500',\n        '后端开发': 'bg-green-500',\n        '数据分析': 'bg-yellow-500',\n        '人工智能': 'bg-purple-500',\n        '设计': 'bg-pink-500',\n        '移动开发': 'bg-red-500'\n      };\n      return colorMap[category] || 'bg-gray-500';\n    },\n    \n    // 初始化认证状态\n    initAuth() {\n      // 从localStorage获取用户信息\n      const storedUser = localStorage.getItem('currentUser');\n      if (storedUser) {\n        try {\n          this.currentUser = JSON.parse(storedUser);\n        } catch (e) {\n          console.error('Error parsing stored user:', e);\n          localStorage.removeItem('currentUser');\n        }\n      }\n    },\n    \n    // 显示认证视图\n    showAuthView(view = 'login') {\n      this.isAuthView = true;\n      this.currentAuthView = view;\n    },\n    \n    // 提交评论\n    async submitComment() {\n      if (!this.currentUser || !this.commentContent.trim() || this.isSubmittingComment) {\n        return;\n      }\n      \n      this.isSubmittingComment = true;\n      try {\n        const newComment = {\n          content: this.commentContent.trim(),\n          articleId: this.currentArticle.id,\n          author: this.currentUser.username,\n          authorAvatar: this.currentUser.avatar || 'https://picsum.photos/id/64/100/100',\n          timestamp: new Date().toISOString(),\n          likes: 0,\n          isLiked: false,\n          replies: []\n        };\n        \n        // 尝试发送到服务器\n        try {\n          const response = await fetch('http://localhost:5000/api/comments', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${this.currentUser.token}`\n            },\n            body: JSON.stringify({\n              article_id: this.currentArticle.id,\n              content: newComment.content\n            })\n          });\n          \n          if (response.ok) {\n            const savedComment = await response.json();\n            // 合并服务器返回的数据和本地数据\n            newComment.id = savedComment.id;\n          }\n        } catch (error) {\n          console.error('Error submitting comment to server:', error);\n          // 如果API调用失败，使用本地生成的ID\n          newComment.id = Date.now();\n        }\n        \n        // 更新本地数据\n        if (!this.currentArticle.comments) {\n          this.currentArticle.comments = [];\n        }\n        this.currentArticle.comments.unshift(newComment);\n        this.currentArticle.commentsCount++;\n        this.commentContent = '';\n        \n        // 显示成功通知\n        this.showNotification('评论发表成功！', 'success');\n      } catch (error) {\n        console.error('Error submitting comment:', error);\n        this.showNotification('发表评论失败，请稍后重试', 'error');\n      } finally {\n        this.isSubmittingComment = false;\n      }\n    },\n    \n    // 切换回复框\n    toggleReplyBox(comment, replyTo = null) {\n      if (this.replyBoxVisible.commentId === comment.id && !replyTo) {\n        // 如果已经是当前评论的回复框，则关闭\n        this.cancelReply();\n      } else {\n        // 打开回复框\n        this.replyBoxVisible = {\n          commentId: comment.id,\n          replyTo: replyTo,\n          content: ''\n        };\n      }\n    },\n    \n    // 取消回复\n    cancelReply() {\n      this.replyBoxVisible = { commentId: null, replyTo: null, content: '' };\n    },\n    \n    // 提交回复\n    async submitReply(comment) {\n      if (!this.currentUser || !this.replyBoxVisible.content.trim() || this.isSubmittingReply) {\n        return;\n      }\n      \n      this.isSubmittingReply = true;\n      try {\n        const newReply = {\n          content: this.replyBoxVisible.content.trim(),\n          author: this.currentUser.username,\n          authorAvatar: this.currentUser.avatar || 'https://picsum.photos/id/64/100/100',\n          timestamp: new Date().toISOString(),\n          likes: 0,\n          isLiked: false\n        };\n        \n        // 尝试发送到服务器\n        try {\n          const response = await fetch('http://localhost:5000/api/comments', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${this.currentUser.token}`\n            },\n            body: JSON.stringify({\n              article_id: this.currentArticle.id,\n              content: newReply.content,\n              parent_id: comment.id\n            })\n          });\n          \n          if (response.ok) {\n            const savedReply = await response.json();\n            // 合并服务器返回的数据\n            newReply.id = savedReply.id;\n          }\n        } catch (error) {\n          console.error('Error submitting reply to server:', error);\n          // 如果API调用失败，使用本地生成的ID\n          newReply.id = Date.now();\n        }\n        \n        // 更新本地数据\n        if (!comment.replies) {\n          comment.replies = [];\n        }\n        comment.replies.push(newReply);\n        this.currentArticle.commentsCount++;\n        \n        // 关闭回复框\n        this.cancelReply();\n        \n        // 显示成功通知\n        this.showNotification('回复发表成功！', 'success');\n      } catch (error) {\n        console.error('Error submitting reply:', error);\n        this.showNotification('发表回复失败，请稍后重试', 'error');\n      } finally {\n        this.isSubmittingReply = false;\n      }\n    },\n    \n    // 点赞/取消点赞\n    async toggleLike(item, parentComment = null) {\n      try {\n        // 切换本地点赞状态\n        item.isLiked = !item.isLiked;\n        item.likes += item.isLiked ? 1 : -1;\n        \n        // 尝试发送到服务器\n        if (this.currentUser) {\n          try {\n            const response = await fetch(`http://localhost:5000/api/comments/${item.id}/like`, {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${this.currentUser.token}`\n              }\n            });\n            \n            if (!response.ok) {\n              // 如果服务器操作失败，恢复本地状态\n              item.isLiked = !item.isLiked;\n              item.likes += item.isLiked ? 1 : -1;\n              throw new Error('Server operation failed');\n            }\n          } catch (error) {\n            console.error('Error toggling like:', error);\n          }\n        } else {\n          // 如果未登录，显示提示\n          this.showNotification('请登录后再进行点赞操作', 'info');\n          // 恢复本地状态\n          item.isLiked = !item.isLiked;\n          item.likes += item.isLiked ? 1 : -1;\n        }\n      } catch (error) {\n        console.error('Error toggling like:', error);\n      }\n    },\n    \n    // 格式化日期\n    formatDate(dateString) {\n      const date = new Date(dateString);\n      return date.toLocaleDateString('zh-CN', { year: 'numeric', month: 'long', day: 'numeric' });\n    },\n    \n    // 为输入框格式化日期\n    formatDateForInput(date) {\n      const year = date.getFullYear();\n      const month = String(date.getMonth() + 1).padStart(2, '0');\n      const day = String(date.getDate()).padStart(2, '0');\n      return `${year}-${month}-${day}`;\n    },\n    \n    // 格式化相对时间\n    formatRelativeTime(timestamp) {\n      const now = new Date();\n      const past = new Date(timestamp);\n      const diffMs = now - past;\n      const diffMins = Math.floor(diffMs / (1000 * 60));\n      const diffHours = Math.floor(diffMins / 60);\n      const diffDays = Math.floor(diffHours / 24);\n      \n      if (diffMins < 1) {\n        return '刚刚';\n      } else if (diffMins < 60) {\n        return `${diffMins}分钟前`;\n      } else if (diffHours < 24) {\n        return `${diffHours}小时前`;\n      } else if (diffDays < 30) {\n        return `${diffDays}天前`;\n      } else {\n        return this.formatDate(timestamp);\n      }\n    },\n    \n    // 根据ID获取文章标题\n    getArticleTitleById(id) {\n      const article = this.articles.find(a => a.id === id);\n      return article ? article.title : '未知文章';\n    },\n    \n    // 编辑文章\n    editArticle(id) {\n      const article = this.articles.find(a => a.id === id);\n      if (article) {\n        // 根据文章分类名称查找对应的分类ID\n        const categoryId = this.categories.find(c => c.name === article.category)?.id || '';\n        \n        this.articleForm = {\n          id: article.id,\n          title: article.title,\n          category_id: categoryId,\n          tagsStr: article.tags.join(','),\n          coverImage: article.coverImage,\n          content: article.content,\n          status: 'published',\n          publishedDate: this.formatDateForInput(new Date(article.publishedDate)),\n          media: []\n        };\n        this.isEditingArticle = true;\n        this.showArticleEditor = true;\n        \n        // 将内容设置到编辑器 - 使用nextTick确保DOM完全渲染\n        this.$nextTick(() => {\n          if (this.$refs.editorContent) {\n            this.$refs.editorContent.innerHTML = article.content || '<p></p>';\n          }\n        });\n      }\n    },\n    \n    // 重置文章表单\n    resetArticleForm() {\n      this.articleForm = {\n        id: null,\n        title: '',\n        category_id: '',\n        tagsStr: '',\n        coverImage: '',\n        content: '<p>开始撰写您的文章内容...</p>',\n        status: 'published',\n        publishedDate: this.formatDateForInput(new Date()),\n        media: []\n      };\n      \n      // 使用nextTick确保DOM渲染完成后再设置编辑器内容\n      this.$nextTick(() => {\n        if (this.$refs.editorContent) {\n          this.$refs.editorContent.innerHTML = this.articleForm.content;\n        }\n      });\n    },\n    \n    // 同步编辑器内容到articleForm\n    syncEditorContent() {\n      if (this.$refs.editorContent) {\n        this.articleForm.content = this.$refs.editorContent.innerHTML;\n      }\n    },\n    \n    // 富文本编辑核心方法\n    formatText(command, value = null) {\n      // 先确保编辑器获得焦点\n      if (this.$refs.editorContent) {\n        this.$refs.editorContent.focus();\n        \n        // 尝试执行命令\n        try {\n          // 对于formatBlock命令，需要特殊处理\n          if (command === 'formatBlock' && value) {\n            document.execCommand('formatBlock', false, `<${value}>`);\n          } else {\n            document.execCommand(command, false, value);\n          }\n          this.syncEditorContent();\n        } catch (error) {\n          console.error('编辑器命令执行失败:', error);\n        }\n      }\n    },\n    \n    // 插入链接\n    insertLink() {\n      const url = prompt('请输入链接地址:', 'http://');\n      if (url) {\n        this.formatText('createLink', url);\n      }\n    },\n    \n    // 处理封面图片上传\n    handleCoverImageUpload(e) {\n      const file = e.target.files[0];\n      if (file) {\n        // 这里只是模拟上传，实际项目中应该发送到服务器\n        const reader = new FileReader();\n        reader.onload = (event) => {\n          this.articleForm.coverImage = event.target.result;\n        };\n        reader.readAsDataURL(file);\n      }\n    },\n    \n    // 触发图片上传\n    triggerImageUpload() {\n      document.getElementById('imageUpload').click();\n    },\n    \n    // 触发视频上传\n    triggerVideoUpload() {\n      document.getElementById('videoUpload').click();\n    },\n    \n    // 触发音频上传\n    triggerAudioUpload() {\n      document.getElementById('audioUpload').click();\n    },\n    \n    // 处理图片上传\n    handleImageUpload(e) {\n      const file = e.target.files[0];\n      if (file) {\n        // 模拟上传\n        const reader = new FileReader();\n        reader.onload = (event) => {\n          this.articleForm.media.push({\n            id: Date.now(),\n            type: 'image',\n            url: event.target.result,\n            name: file.name\n          });\n        };\n        reader.readAsDataURL(file);\n      }\n      // 重置input，允许重复上传同一文件\n      e.target.value = '';\n    },\n    \n    // 处理视频上传\n    handleVideoUpload(e) {\n      const file = e.target.files[0];\n      if (file) {\n        // 模拟上传\n        this.articleForm.media.push({\n          id: Date.now(),\n          type: 'video',\n          url: '#',\n          name: file.name\n        });\n      }\n      e.target.value = '';\n    },\n    \n    // 处理音频上传\n    handleAudioUpload(e) {\n      const file = e.target.files[0];\n      if (file) {\n        // 模拟上传\n        this.articleForm.media.push({\n          id: Date.now(),\n          type: 'audio',\n          url: '#',\n          name: file.name\n        });\n      }\n      e.target.value = '';\n    },\n    \n    // 移除媒体\n    removeMedia(id) {\n      this.articleForm.media = this.articleForm.media.filter(media => media.id !== id);\n    },\n    \n    // 更新文章\n    async updateArticle() {\n      if (!this.articleForm.id) {\n        alert('请先编辑文章');\n        return;\n      }\n      \n      // 转换标签字符串为数组\n      this.articleForm.tags = this.articleForm.tagsStr.split(',').map(tag => tag.trim());\n      alert(this.articleForm.content);\n      // 发送PUT请求更新文章\n      try {\n        const url = `http://localhost:5000/api/articles/${this.articleForm.id}`;\n        const response = await fetch(url, {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(this.articleForm)\n        });\n        \n        if (!response.ok) {\n          throw new Error('Failed to update article');\n        }\n        \n        // 重置表单\n        this.resetArticleForm();\n        this.showArticleEditor = false;\n        alert('文章更新成功');\n      } catch (error) {\n        console.error('Error updating article:', error);\n        alert('更新文章失败，请稍后重试');\n      }\n    },\n\n    // 发布文章\n    async postArticle() {\n      if (!this.articleForm.title.trim()) {\n        alert('请输入文章标题');\n        return;\n      }\n      if (!this.articleForm.content.trim()) {\n        alert('请输入文章内容');\n        return;\n      }\n      if (!this.articleForm.category_id) {\n        alert('请选择文章分类');\n        return;\n      }\n      \n      // 转换标签字符串为数组\n      this.articleForm.tags = this.articleForm.tagsStr.split(',').map(tag => tag.trim());\n      \n      // 发送POST请求创建文章\n      try {\n        const url = 'http://localhost:5000/api/articles/post';\n        const response = await fetch(url, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({ ...this.articleForm, author_id: '1' })\n        });\n        \n        const data = await response.json();\n        console.log(data)\n        \n        if (!response.ok) {\n          throw new Error('Failed to post article');\n        }\n        \n        // 重置表单\n        this.resetArticleForm();\n        this.showArticleEditor = false;\n        alert('文章发布成功');\n      } catch (error) {\n        console.error('Error posting article:', error);\n        alert('发布文章失败，请稍后重试');\n      }\n    },\n\n    // 编辑分类\n    editCategory(id) {\n      const category = this.categories.find(c => c.id === id);\n      if (category) {\n        this.categoryForm = { ...category };\n        this.isEditingCategory = true;\n        this.showCategoryModal = true;\n      }\n    },\n    \n    // 重置分类表单\n    resetCategoryForm() {\n      this.categoryForm = {\n        id: null,\n        name: '',\n        description: '',\n        icon: 'fa-file-text-o'\n      };\n      this.isEditingCategory = false;\n    },\n    \n    // API调用 - 更新分类\n    async updateCategory() {\n      if (!this.categoryForm.name.trim()) {\n        alert('请输入分类名称');\n        return;\n      }\n      \n      if (!this.categoryForm.description.trim()) {\n        alert('请输入分类描述');\n        return;\n      }\n      \n      try {\n        const url = `http://localhost:5000/api/categories/${this.categoryForm.id}`;\n        const response = await fetch(url, {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(this.categoryForm)\n        });\n        \n        if (!response.ok) {\n          throw new Error('Failed to update category');\n        }\n        \n        // 更新本地分类列表\n        const updatedCategory = await response.json();\n        const index = this.categories.findIndex(c => c.id === this.categoryForm.id);\n        if (index !== -1) {\n          this.categories.splice(index, 1, updatedCategory);\n        }\n        \n        this.resetCategoryForm();\n        this.showCategoryModal = false;\n        alert('分类更新成功');\n      } catch (error) {\n        console.error('Error updating category:', error);\n        alert('更新分类失败，请稍后重试');\n      }\n    },\n    \n    // API调用 - 创建分类\n    async createCategory() {\n      if (!this.categoryForm.name.trim()) {\n        alert('请输入分类名称');\n        return;\n      }\n      \n      if (!this.categoryForm.description.trim()) {\n        alert('请输入分类描述');\n        return;\n      }\n      \n      try {\n        const url = 'http://localhost:5000/api/categories/create';\n        const response = await fetch(url, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            ...this.categoryForm,\n            count: 0,\n            lastUpdated: new Date().toISOString().split('T')[0]\n          })\n        });\n        \n        if (!response.ok) {\n          throw new Error('Failed to create category');\n        }\n        \n        // 添加新分类到本地列表\n        const newCategory = await response.json();\n        this.categories.push(newCategory);\n        \n        this.resetCategoryForm();\n        this.showCategoryModal = false;\n        alert('分类创建成功');\n      } catch (error) {\n        console.error('Error creating category:', error);\n        // 如果API调用失败，使用本地创建\n        const localCategory = {\n          ...this.categoryForm,\n          id: Date.now(),\n          count: 0,\n          lastUpdated: new Date().toISOString().split('T')[0]\n        };\n        this.categories.push(localCategory);\n        this.resetCategoryForm();\n        this.showCategoryModal = false;\n        alert('分类已创建（本地模式）' + error);\n      }\n    },\n    // 删除文章\n    deleteArticle(id) {\n      const article = this.articles.find(a => a.id === id);\n      if (article) {\n        this.deleteItemId = id;\n        this.deleteItemType = 'article';\n        this.deleteConfirmMessage = `确定要删除文章《${article.title}》吗？此操作不可撤销。`;\n        this.showDeleteConfirm = true;\n      }\n    },\n    \n    // 删除分类\n    deleteCategory(id) {\n      const category = this.categories.find(c => c.id === id);\n      if (category) {\n        this.deleteItemId = id;\n        this.deleteItemType = 'category';\n        this.deleteConfirmMessage = `确定要删除分类《${category.name}》吗？该分类下的${category.count}篇文章将受到影响。`;\n        this.showDeleteConfirm = true;\n      }\n    },\n    \n    // 认证相关方法\n    switchToAuth(view) {\n      this.isAuthView = true;\n      this.currentAuthView = view;\n      this.mobileMenuOpen = false;\n      // 滚动到页面顶部\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n    },\n    \n    handleLoginSuccess(user) {\n      // 保存用户信息到本地存储\n      localStorage.setItem('currentUser', JSON.stringify(user));\n      this.currentUser = user;\n      this.isAuthView = false;\n      this.currentView = 'home';\n      \n      // 显示成功消息\n      this.showNotification('登录成功！', 'success');\n    },\n    \n    handleRegisterSuccess() {\n      // 注册成功后切换到登录页面\n      this.currentAuthView = 'login';\n      this.showNotification('注册成功，请登录！', 'success');\n    },\n    \n    handleLogout() {\n      // 清除本地存储的用户信息\n      localStorage.removeItem('currentUser');\n      this.currentUser = null;\n      this.isAuthView = false;\n      this.currentView = 'home';\n      \n      // 如果在管理后台视图，切换到前台\n      if (this.isAdminView) {\n        this.isAdminView = false;\n      }\n      \n      this.showNotification('已成功退出登录', 'success');\n    },\n    \n    showUserProfile() {\n      // 这里可以实现显示用户资料的逻辑\n      this.mobileMenuOpen = false;\n      // 目前简单切换到首页\n      this.switchView('home');\n      this.showNotification('用户资料功能正在开发中...', 'info');\n    },\n    \n    checkUserLoginStatus() {\n      // 从本地存储检查用户登录状态\n      const savedUser = localStorage.getItem('currentUser');\n      if (savedUser) {\n        try {\n          this.currentUser = JSON.parse(savedUser);\n        } catch (e) {\n          console.error('解析用户信息失败:', e);\n          localStorage.removeItem('currentUser');\n        }\n      }\n    },\n    \n    showNotification(message, type = 'info') {\n      // 简单的通知提示函数\n      const notification = document.createElement('div');\n      notification.className = `fixed bottom-4 right-4 px-6 py-3 rounded-md shadow-lg z-50 transition-all duration-300 transform translate-y-0`;\n      \n      // 根据类型设置样式\n      if (type === 'success') {\n        notification.classList.add('bg-green-500', 'text-white');\n      } else if (type === 'error') {\n        notification.classList.add('bg-red-500', 'text-white');\n      } else if (type === 'warning') {\n        notification.classList.add('bg-yellow-500', 'text-white');\n      } else {\n        notification.classList.add('bg-blue-500', 'text-white');\n      }\n      \n      notification.textContent = message;\n      document.body.appendChild(notification);\n      \n      // 3秒后移除通知\n      setTimeout(() => {\n        notification.classList.add('opacity-0', 'translate-y-4');\n        setTimeout(() => {\n          document.body.removeChild(notification);\n        }, 300);\n      }, 3000);\n    },\n    \n    // 初始化函数 - 在组件挂载时调用\n    initAuth() {\n      // 检查本地存储中的用户信息\n      this.checkUserLoginStatus();\n    },\n    \n    // 确认删除\n    async confirmDelete() {\n      try {\n        if (this.deleteItemType === 'article') {\n          // 调用API删除文章\n          const url = `http://localhost:5000/api/articles/${this.deleteItemId}`;\n          const response = await fetch(url, {\n            method: 'DELETE',\n            headers: {\n              'Content-Type': 'application/json'\n            }\n          });\n          \n          if (!response.ok) {\n            throw new Error('Failed to delete article');\n          }\n          \n          // 更新本地数据\n          this.articles = this.articles.filter(a => a.id !== this.deleteItemId);\n          alert('文章删除成功');\n        } else if (this.deleteItemType === 'category') {\n          this.categories = this.categories.filter(c => c.id !== this.deleteItemId);\n        }\n      } catch (error) {\n        console.error(`Error deleting ${this.deleteItemType}:`, error);\n        alert(`删除${this.deleteItemType === 'article' ? '文章' : '分类'}失败，请稍后重试`);\n      } finally {\n        this.showDeleteConfirm = false;\n      }\n    },  \n    \n    // 生命周期钩子 - 组件挂载时\n    mounted() {\n      // 初始化认证状态\n      this.initAuth();\n    }\n  }\n}\n</script>\n\n<style>\n\n@import '@fortawesome/fontawesome-free/css/all.css';\n\n/* 全局样式 */\n#app {\n  font-family: 'Inter', system-ui, -apple-system, sans-serif;\n}\n\n/* 自定义动画 */\n@keyframes fadeIn {\n  from { opacity: 0; transform: translateY(10px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n.animate-fadeIn {\n  animation: fadeIn 0.3s ease-out forwards;\n}\n\n/* 文章内容样式 */\n.article-content h2 {\n  font-size: 1.5rem;\n  font-weight: bold;\n  margin-top: 1.5rem;\n  margin-bottom: 1rem;\n  color: #1a202c;\n}\n\n.article-content h3 {\n  font-size: 1.25rem;\n  font-weight: bold;\n  margin-top: 1.25rem;\n  margin-bottom: 0.75rem;\n  color: #1a202c;\n}\n\n.article-content p {\n  margin-bottom: 1rem;\n  line-height: 1.6;\n}\n\n.article-content ul {\n  margin-bottom: 1rem;\n  padding-left: 1.5rem;\n  list-style-type: disc;\n}\n\n.article-content li {\n  margin-bottom: 0.5rem;\n}\n\n.article-content pre {\n  background-color: #f7fafc;\n  padding: 1rem;\n  border-radius: 0.375rem;\n  overflow-x: auto;\n  margin-bottom: 1rem;\n}\n\n.article-content code {\n  font-family: 'Fira Code', monospace;\n  font-size: 0.875rem;\n}\n\n/* 评论区域样式 */\n.article-comments {\n  margin-top: 2rem;\n}\n\n.comment-item {\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n  border-radius: 8px;\n  padding: 1rem;\n  margin-bottom: 1rem;\n  background-color: #ffffff;\n  border: 1px solid #f1f1f1;\n}\n\n.comment-item:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n}\n\n.comment-author-avatar {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  object-fit: cover;\n}\n\n.comment-content {\n  background-color: #f9fafb;\n  border-radius: 8px;\n  padding: 0.75rem 1rem;\n  font-size: 0.95rem;\n  line-height: 1.6;\n  color: #374151;\n}\n\n.comment-actions {\n  margin-top: 0.5rem;\n}\n\n.comment-actions button {\n  transition: all 0.2s ease;\n  padding: 0.25rem 0.5rem;\n  border-radius: 4px;\n  border: none;\n  background: none;\n  cursor: pointer;\n}\n\n.comment-actions button:hover {\n  background-color: #f3f4f6;\n}\n\n.comment-like-btn i {\n  transition: color 0.2s ease;\n}\n\n.comment-like-btn:hover i {\n  color: #f87171;\n  transform: scale(1.1);\n}\n\n.comment-like-btn.active i {\n  color: #f87171;\n}\n\n.comment-reply-btn:hover {\n  text-decoration: underline;\n  color: #4f46e5;\n}\n\n.reply-item {\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n  margin-left: 1.5rem;\n  border-radius: 8px;\n  padding: 0.75rem;\n  background-color: #f9fafb;\n  border: 1px solid #f1f1f1;\n}\n\n.reply-item:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n}\n\n.reply-author-avatar {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  object-fit: cover;\n}\n\n.reply-content {\n  font-size: 0.875rem;\n  line-height: 1.5;\n  color: #374151;\n}\n\n.comment-form textarea,\n.reply-form textarea {\n  transition: border-color 0.2s ease, box-shadow 0.2s ease;\n  font-family: inherit;\n  font-size: 0.95rem;\n  resize: vertical;\n  min-height: 80px;\n}\n\n.comment-form textarea:focus,\n.reply-form textarea:focus {\n  border-color: #4f46e5;\n  box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);\n}\n\n.comment-form textarea:disabled,\n.reply-form textarea:disabled {\n  background-color: #f9fafb;\n  cursor: not-allowed;\n  opacity: 0.7;\n}\n\n.btn-primary {\n  transition: all 0.2s ease;\n}\n\n.btn-primary:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(79, 70, 229, 0.2);\n}\n\n.btn-primary:active {\n  transform: translateY(0);\n}\n\n.btn-secondary {\n  transition: all 0.2s ease;\n}\n\n.btn-secondary:hover {\n  background-color: #f3f4f6;\n}\n\n.not-logged-in-notice {\n  text-align: center;\n  padding: 1.5rem;\n  background-color: #fef3c7;\n  border: 1px solid #fcd34d;\n  border-radius: 8px;\n  color: #92400e;\n  font-size: 0.95rem;\n}\n</style>\n"],"mappings":";;;;;;AAunCA;AACA,OAAOA,SAAQ,MAAO,4BAA2B;AACjD,OAAOC,YAAW,MAAO,+BAA8B;AAEvD,eAAe;EACbC,UAAU,EAAE;IACV;IACA;IACAF,SAAS;IACTC;EACF,CAAC;EACDE,IAAIA,CAAA,EAAG;IACL,OAAO;MACL;MACAC,WAAW,EAAE,KAAK;MAClBC,WAAW,EAAE,MAAM;MACnBC,cAAc,EAAE,KAAK;MACrBC,UAAU,EAAE,KAAK;MACjBC,QAAQ,EAAE,UAAU;MACpB;MACAC,UAAU,EAAE,KAAK;MACjBC,eAAe,EAAE,OAAO;MAAE;MAC1BC,WAAW,EAAE,IAAI;MACjB;MACAC,cAAc,EAAE,EAAE;MAClBC,mBAAmB,EAAE,KAAK;MAC1BC,iBAAiB,EAAE,KAAK;MACxBC,eAAe,EAAE;QAAEC,OAAO,EAAE,KAAK;QAAEC,SAAS,EAAE,IAAI;QAAEC,OAAO,EAAE,IAAI;QAAEC,OAAO,EAAE;MAAG,CAAC;MAEhF;MACAC,gBAAgB,EAAE,IAAI;MAEtB;MACAC,iBAAiB,EAAE,KAAK;MACxBC,gBAAgB,EAAE,KAAK;MACvBC,iBAAiB,EAAE,KAAK;MACxBC,iBAAiB,EAAE,KAAK;MACxBC,iBAAiB,EAAE,KAAK;MACxBC,oBAAoB,EAAE,EAAE;MACxBC,YAAY,EAAE,IAAI;MAClBC,cAAc,EAAE,IAAI;MAEpB;MACAC,WAAW,EAAE;QACXC,EAAE,EAAE,IAAI;QACRC,SAAS,EAAE,GAAG;QACdC,KAAK,EAAE,EAAE;QACTC,WAAW,EAAE,EAAE;QACfC,OAAO,EAAE,EAAE;QACXC,UAAU,EAAE,EAAE;QACdhB,OAAO,EAAE,EAAE;QACXiB,MAAM,EAAE,WAAW;QACnBC,aAAa,EAAE,EAAE;QACjBC,KAAK,EAAE;MACT,CAAC;MAEDC,YAAY,EAAE;QACZT,EAAE,EAAE,IAAI;QACRU,IAAI,EAAE,EAAE;QACRC,WAAW,EAAE,EAAE;QACfC,IAAI,EAAE;MACR,CAAC;MAED;MACAC,QAAQ,EAAE,EAAE;MACV;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA;;MAEA;MACA;MACA;MACA;MACA;;MAEA;MACA;;MAEA;MACA;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACF;;MAEA;MACAC,UAAU,EAAE,EAAE;MACZ;MACA;MACA;MACA;MACA;MACA;MACF;;MAEA;MACAC,cAAc,EAAE,CACd,SAAS,EAAE,WAAW,EAAE,cAAc,EAAE,UAAU,EAClD,gBAAgB,EAAE,WAAW,EAAE,aAAa,EAAE,UAAU,EACxD,gBAAgB,EAAE,UAAU,EAAE,iBAAiB,EAAE,UAAS,CAC3D;MAED;MACAC,cAAc,EAAE,IAAI;MAEpB;MACAC,eAAe,EAAE;IACnB;EACF,CAAC;EAEDC,QAAQ,EAAE;IACR;IACAC,gBAAgBA,CAAA,EAAG;MACjB,OAAO,IAAI,CAACN,QAAQ,CAACO,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;IAClC,CAAC;IAED;IACAC,cAAcA,CAAA,EAAG;MACf,OAAO,CAAC,GAAG,IAAI,CAACR,QAAQ,CAAC,CAACS,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK,IAAIC,IAAI,CAACD,CAAC,CAACjB,aAAa,IAAI,IAAIkB,IAAI,CAACF,CAAC,CAAChB,aAAa,CAAC,CAAC,CAACa,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;IAC7G,CAAC;IAED;IACAM,gBAAgBA,CAAA,EAAG;MACjB,IAAI,CAAC,IAAI,CAACpC,gBAAgB,EAAE;QAC1B,OAAO,IAAI,CAACuB,QAAQ;MACtB;MACA,OAAO,IAAI,CAACA,QAAQ,CAACc,MAAM,CAACC,OAAM,IAAKA,OAAO,CAACC,QAAO,KAAM,IAAI,CAACvC,gBAAgB,CAAC;IACpF,CAAC;IAED;IACAwC,WAAWA,CAAA,EAAG;MACZ,IAAIC,QAAO,GAAI,EAAE;MACjB,IAAI,IAAI,CAAClB,QAAO,IAAKmB,KAAK,CAACC,OAAO,CAAC,IAAI,CAACpB,QAAQ,CAAC,EAAE;QACjD,IAAI,CAACA,QAAQ,CAACqB,OAAO,CAACN,OAAM,IAAK;UAC/B,IAAIA,OAAO,CAACG,QAAO,IAAKC,KAAK,CAACC,OAAO,CAACL,OAAO,CAACG,QAAQ,CAAC,EAAE;YACvDH,OAAO,CAACG,QAAQ,CAACG,OAAO,CAACC,OAAM,IAAK;cAClCJ,QAAQ,CAACK,IAAI,CAAC;gBAAC,GAAGD,OAAO;gBAAEE,SAAS,EAAET,OAAO,CAAC5B;cAAE,CAAC,CAAC;cAClD,IAAImC,OAAO,CAACG,OAAM,IAAKN,KAAK,CAACC,OAAO,CAACE,OAAO,CAACG,OAAO,CAAC,EAAE;gBACrDH,OAAO,CAACG,OAAO,CAACJ,OAAO,CAACK,KAAI,IAAK;kBAC/BR,QAAQ,CAACK,IAAI,CAAC;oBAAC,GAAGG,KAAK;oBAAEF,SAAS,EAAET,OAAO,CAAC5B,EAAE;oBAAEwC,OAAO,EAAE,IAAI;oBAAEC,QAAQ,EAAEN,OAAO,CAACnC;kBAAE,CAAC,CAAC;gBACvF,CAAC,CAAC;cACJ;YACF,CAAC,CAAC;UACJ;QACF,CAAC,CAAC;MACJ;MACA,OAAO+B,QAAQ,CAACT,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK,IAAIC,IAAI,CAACD,CAAC,CAACkB,SAAS,IAAI,IAAIjB,IAAI,CAACF,CAAC,CAACmB,SAAS,CAAC,CAAC,CAACtB,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;IAC3F,CAAC;IAED;IACAuB,aAAaA,CAAA,EAAG;MACd,IAAIC,KAAI,GAAI,CAAC;MACb,IAAI,CAAC/B,QAAQ,CAACqB,OAAO,CAACN,OAAM,IAAK;QAC/BgB,KAAI,IAAKhB,OAAO,CAACiB,aAAa;MAChC,CAAC,CAAC;MACF,OAAOD,KAAK;IACd,CAAC;IAED;IACAE,UAAUA,CAAA,EAAG;MACX,IAAIF,KAAI,GAAI,CAAC;MACb,IAAI,CAAC/B,QAAQ,CAACqB,OAAO,CAACN,OAAM,IAAK;QAC/BgB,KAAI,IAAKhB,OAAO,CAACmB,KAAK;MACxB,CAAC,CAAC;MACF,OAAOH,KAAK;IACd;EACF,CAAC;EAEDI,OAAOA,CAAA,EAAG;IACR;IACA,IAAI,CAACC,QAAQ,CAAC,CAAC;IACf;IACA,IAAI,CAACC,aAAa,CAAC,CAAC;IACpB,IAAI,CAACC,eAAe,CAAC,CAAC;IACtB;IACAC,MAAM,CAACC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAACC,YAAY,CAAC;;IAEpD;IACA,IAAI,CAACvD,WAAW,CAACQ,aAAY,GAAI,IAAI,CAACgD,kBAAkB,CAAC,IAAI9B,IAAI,CAAC,CAAC,CAAC;EACtE,CAAC;EAED+B,aAAaA,CAAA,EAAG;IACdJ,MAAM,CAACK,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAACH,YAAY,CAAC;EACzD,CAAC;EAEDI,OAAO,EAAE;IACP;IACAJ,YAAYA,CAAA,EAAG;MACb,IAAI,CAAC7E,UAAS,GAAI2E,MAAM,CAACO,OAAM,GAAI,EAAE;IACvC,CAAC;IAED;IACAC,UAAUA,CAACC,IAAI,EAAE;MACf,IAAI,CAACtF,WAAU,GAAIsF,IAAI;MACvB,IAAI,CAACvE,gBAAe,GAAI,IAAI;MAC5B;MACA8D,MAAM,CAACU,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;IACvB,CAAC;IAED;IACAC,eAAeA,CAAA,EAAG;MAChB,IAAI,CAACzF,WAAU,GAAI,CAAC,IAAI,CAACA,WAAW;MACpC;MACA8E,MAAM,CAACU,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;IACvB,CAAC;IAED;IACAE,wBAAwBA,CAACnC,QAAQ,EAAE;MACjC,IAAI,CAACvC,gBAAe,GAAIuC,QAAQ;MAChC,IAAI,CAACtD,WAAU,GAAI,UAAU;MAC7B;MACA6E,MAAM,CAACU,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;IACvB,CAAC;IAED;IACAG,mBAAmBA,CAAA,EAAG;MACpB,IAAI,CAAC3E,gBAAe,GAAI,IAAI;IAC9B,CAAC;IAED;IACA,MAAM4D,aAAaA,CAACgB,MAAK,GAAI,EAAE,EAAE;MAC/B,IAAI,CAACC,OAAM,GAAI,IAAI;MACnB,IAAI;QACF,IAAIC,GAAE,GAAI,oCAAoC;QAC9C,IAAIF,MAAM,EAAE;UACVE,GAAE,IAAK,WAAWC,kBAAkB,CAACH,MAAM,CAAC,EAAE;QAChD;QAEA,MAAMI,QAAO,GAAI,MAAMC,KAAK,CAACH,GAAG,CAAC;QACjC,IAAI,CAACE,QAAQ,CAACE,EAAE,EAAE;UAChB,MAAM,IAAIC,KAAK,CAAC,0BAA0B,CAAC;QAC7C;QAEA,IAAI5D,QAAO,GAAI,MAAMyD,QAAQ,CAACI,IAAI,CAAC,CAAC;QACpCC,OAAO,CAACC,GAAG,CAAC/D,QAAQ,CAAC,UAAU,CAAC,CAAC;QACjC,IAAI,CAACA,QAAO,GAAIA,QAAQ,CAAC,UAAU,CAAC;QACpC;QACA,IAAI,CAACgE,eAAc,GAAI,CAAC,GAAG,IAAI,CAAChE,QAAQ,CAAC,CAACO,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;;QAErD;QACA,KAAK,MAAMQ,OAAM,IAAK,IAAI,CAACf,QAAQ,EAAE;UACnC,MAAMiE,gBAAe,GAAI,MAAMP,KAAK,CAAC,sCAAsC3C,OAAO,CAAC5B,EAAE,WAAW,CAAC;UACjG,IAAI8E,gBAAgB,CAACN,EAAE,EAAE;YACvB,MAAMzC,QAAO,GAAI,MAAM+C,gBAAgB,CAACJ,IAAI,CAAC,CAAC;YAC9C9C,OAAO,CAACiB,aAAY,GAAId,QAAQ,CAACgD,MAAM;UACzC,OAAO;YACLnD,OAAO,CAACiB,aAAY,GAAI,CAAC;UAC3B;QACF;MACF,EAAE,OAAOmC,KAAK,EAAE;QACdL,OAAO,CAACK,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;QAChDC,KAAK,CAAC,cAAc,CAAC;MACvB,UAAU;QACR,IAAI,CAACd,OAAM,GAAI,KAAK;MACtB;IACF,CAAC;IAED;IACA,MAAMhB,eAAeA,CAAA,EAAG;MACtB,IAAI;QACF,MAAMiB,GAAE,GAAI,sCAAsC;QAClD,MAAME,QAAO,GAAI,MAAMC,KAAK,CAACH,GAAG,CAAC;QACjC,IAAI,CAACE,QAAQ,CAACE,EAAE,EAAE;UAChB,MAAM,IAAIC,KAAK,CAAC,4BAA4B,CAAC;QAC/C;QAEA,IAAI,CAAC3D,UAAS,GAAI,OAAMwD,QAAQ,CAACI,IAAI,CAAC,MAAK,EAAE;QAC7CC,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC9D,UAAU,CAAC;MAC9B,EAAE,OAAOkE,KAAK,EAAE;QACdL,OAAO,CAACK,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;QAClD;QACA,IAAI,CAAClE,UAAS,GAAI,CAChB;UAAEd,EAAE,EAAE,CAAC;UAAEU,IAAI,EAAE,MAAM;UAAEC,WAAW,EAAE,mCAAmC;UAAEC,IAAI,EAAE,SAAS;UAAEgC,KAAK,EAAE,EAAE;UAAEsC,WAAW,EAAE;QAAa,CAAC,EAChI;UAAElF,EAAE,EAAE,CAAC;UAAEU,IAAI,EAAE,MAAM;UAAEC,WAAW,EAAE,yBAAyB;UAAEC,IAAI,EAAE,WAAW;UAAEgC,KAAK,EAAE,EAAE;UAAEsC,WAAW,EAAE;QAAa,CAAC,EACxH;UAAElF,EAAE,EAAE,CAAC;UAAEU,IAAI,EAAE,MAAM;UAAEC,WAAW,EAAE,qBAAqB;UAAEC,IAAI,EAAE,cAAc;UAAEgC,KAAK,EAAE,EAAE;UAAEsC,WAAW,EAAE;QAAa,CAAC,EACvH;UAAElF,EAAE,EAAE,CAAC;UAAEU,IAAI,EAAE,MAAM;UAAEC,WAAW,EAAE,yBAAyB;UAAEC,IAAI,EAAE,UAAU;UAAEgC,KAAK,EAAE,EAAE;UAAEsC,WAAW,EAAE;QAAa,CAAC,EACvH;UAAElF,EAAE,EAAE,CAAC;UAAEU,IAAI,EAAE,IAAI;UAAEC,WAAW,EAAE,wBAAwB;UAAEC,IAAI,EAAE,gBAAgB;UAAEgC,KAAK,EAAE,EAAE;UAAEsC,WAAW,EAAE;QAAa,CAAC,EAC1H;UAAElF,EAAE,EAAE,CAAC;UAAEU,IAAI,EAAE,MAAM;UAAEC,WAAW,EAAE,wBAAwB;UAAEC,IAAI,EAAE,WAAW;UAAEgC,KAAK,EAAE,CAAC;UAAEsC,WAAW,EAAE;QAAa,EACtH;MACH;IACF,CAAC;IAED;IACAC,WAAWA,CAACnF,EAAE,EAAE;MACd,IAAI,CAACgB,cAAa,GAAI,IAAI,CAACH,QAAQ,CAACuE,IAAI,CAACxD,OAAM,IAAKA,OAAO,CAAC5B,EAAC,KAAMA,EAAE,CAAC;MACtE,IAAI,IAAI,CAACgB,cAAc,EAAE;QACvB;QACA,IAAI,CAACC,eAAc,GAAI,IAAI,CAACJ,QAAO,CAChCc,MAAM,CAACC,OAAM,IAAKA,OAAO,CAACC,QAAO,KAAM,IAAI,CAACb,cAAc,CAACa,QAAO,IAAKD,OAAO,CAAC5B,EAAC,KAAMA,EAAE,EACxFoB,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;QAEd,IAAI,CAAC7C,WAAU,GAAI,eAAe;QAClC;QACA6E,MAAM,CAACU,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;MACvB;IACF,CAAC;IAED;IACAuB,gBAAgBA,CAACxD,QAAQ,EAAE;MACzB,MAAMyD,QAAO,GAAI;QACf,MAAM,EAAE,aAAa;QACrB,MAAM,EAAE,cAAc;QACtB,MAAM,EAAE,eAAe;QACvB,MAAM,EAAE,eAAe;QACvB,IAAI,EAAE,aAAa;QACnB,MAAM,EAAE;MACV,CAAC;MACD,OAAOA,QAAQ,CAACzD,QAAQ,KAAK,aAAa;IAC5C,CAAC;IAED;IACAoB,QAAQA,CAAA,EAAG;MACT;MACA,MAAMsC,UAAS,GAAIC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;MACtD,IAAIF,UAAU,EAAE;QACd,IAAI;UACF,IAAI,CAAC1G,WAAU,GAAI6G,IAAI,CAACC,KAAK,CAACJ,UAAU,CAAC;QAC3C,EAAE,OAAOK,CAAC,EAAE;UACVjB,OAAO,CAACK,KAAK,CAAC,4BAA4B,EAAEY,CAAC,CAAC;UAC9CJ,YAAY,CAACK,UAAU,CAAC,aAAa,CAAC;QACxC;MACF;IACF,CAAC;IAED;IACAC,YAAYA,CAACjC,IAAG,GAAI,OAAO,EAAE;MAC3B,IAAI,CAAClF,UAAS,GAAI,IAAI;MACtB,IAAI,CAACC,eAAc,GAAIiF,IAAI;IAC7B,CAAC;IAED;IACA,MAAMkC,aAAaA,CAAA,EAAG;MACpB,IAAI,CAAC,IAAI,CAAClH,WAAU,IAAK,CAAC,IAAI,CAACC,cAAc,CAACkH,IAAI,CAAC,KAAK,IAAI,CAACjH,mBAAmB,EAAE;QAChF;MACF;MAEA,IAAI,CAACA,mBAAkB,GAAI,IAAI;MAC/B,IAAI;QACF,MAAMkH,UAAS,GAAI;UACjB5G,OAAO,EAAE,IAAI,CAACP,cAAc,CAACkH,IAAI,CAAC,CAAC;UACnC3D,SAAS,EAAE,IAAI,CAACrB,cAAc,CAAChB,EAAE;UACjCkG,MAAM,EAAE,IAAI,CAACrH,WAAW,CAACsH,QAAQ;UACjCC,YAAY,EAAE,IAAI,CAACvH,WAAW,CAACwH,MAAK,IAAK,qCAAqC;UAC9E3D,SAAS,EAAE,IAAIjB,IAAI,CAAC,CAAC,CAAC6E,WAAW,CAAC,CAAC;UACnCC,KAAK,EAAE,CAAC;UACRC,OAAO,EAAE,KAAK;UACdlE,OAAO,EAAE;QACX,CAAC;;QAED;QACA,IAAI;UACF,MAAMgC,QAAO,GAAI,MAAMC,KAAK,CAAC,oCAAoC,EAAE;YACjEkC,MAAM,EAAE,MAAM;YACdC,OAAO,EAAE;cACP,cAAc,EAAE,kBAAkB;cAClC,eAAe,EAAE,UAAU,IAAI,CAAC7H,WAAW,CAAC8H,KAAK;YACnD,CAAC;YACDC,IAAI,EAAElB,IAAI,CAACmB,SAAS,CAAC;cACnBC,UAAU,EAAE,IAAI,CAAC9F,cAAc,CAAChB,EAAE;cAClCX,OAAO,EAAE4G,UAAU,CAAC5G;YACtB,CAAC;UACH,CAAC,CAAC;UAEF,IAAIiF,QAAQ,CAACE,EAAE,EAAE;YACf,MAAMuC,YAAW,GAAI,MAAMzC,QAAQ,CAACI,IAAI,CAAC,CAAC;YAC1C;YACAuB,UAAU,CAACjG,EAAC,GAAI+G,YAAY,CAAC/G,EAAE;UACjC;QACF,EAAE,OAAOgF,KAAK,EAAE;UACdL,OAAO,CAACK,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;UAC3D;UACAiB,UAAU,CAACjG,EAAC,GAAIyB,IAAI,CAACuF,GAAG,CAAC,CAAC;QAC5B;;QAEA;QACA,IAAI,CAAC,IAAI,CAAChG,cAAc,CAACe,QAAQ,EAAE;UACjC,IAAI,CAACf,cAAc,CAACe,QAAO,GAAI,EAAE;QACnC;QACA,IAAI,CAACf,cAAc,CAACe,QAAQ,CAACkF,OAAO,CAAChB,UAAU,CAAC;QAChD,IAAI,CAACjF,cAAc,CAAC6B,aAAa,EAAE;QACnC,IAAI,CAAC/D,cAAa,GAAI,EAAE;;QAExB;QACA,IAAI,CAACoI,gBAAgB,CAAC,SAAS,EAAE,SAAS,CAAC;MAC7C,EAAE,OAAOlC,KAAK,EAAE;QACdL,OAAO,CAACK,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;QACjD,IAAI,CAACkC,gBAAgB,CAAC,cAAc,EAAE,OAAO,CAAC;MAChD,UAAU;QACR,IAAI,CAACnI,mBAAkB,GAAI,KAAK;MAClC;IACF,CAAC;IAED;IACAoI,cAAcA,CAAChF,OAAO,EAAE/C,OAAM,GAAI,IAAI,EAAE;MACtC,IAAI,IAAI,CAACH,eAAe,CAACE,SAAQ,KAAMgD,OAAO,CAACnC,EAAC,IAAK,CAACZ,OAAO,EAAE;QAC7D;QACA,IAAI,CAACgI,WAAW,CAAC,CAAC;MACpB,OAAO;QACL;QACA,IAAI,CAACnI,eAAc,GAAI;UACrBE,SAAS,EAAEgD,OAAO,CAACnC,EAAE;UACrBZ,OAAO,EAAEA,OAAO;UAChBC,OAAO,EAAE;QACX,CAAC;MACH;IACF,CAAC;IAED;IACA+H,WAAWA,CAAA,EAAG;MACZ,IAAI,CAACnI,eAAc,GAAI;QAAEE,SAAS,EAAE,IAAI;QAAEC,OAAO,EAAE,IAAI;QAAEC,OAAO,EAAE;MAAG,CAAC;IACxE,CAAC;IAED;IACA,MAAMgI,WAAWA,CAAClF,OAAO,EAAE;MACzB,IAAI,CAAC,IAAI,CAACtD,WAAU,IAAK,CAAC,IAAI,CAACI,eAAe,CAACI,OAAO,CAAC2G,IAAI,CAAC,KAAK,IAAI,CAAChH,iBAAiB,EAAE;QACvF;MACF;MAEA,IAAI,CAACA,iBAAgB,GAAI,IAAI;MAC7B,IAAI;QACF,MAAMsI,QAAO,GAAI;UACfjI,OAAO,EAAE,IAAI,CAACJ,eAAe,CAACI,OAAO,CAAC2G,IAAI,CAAC,CAAC;UAC5CE,MAAM,EAAE,IAAI,CAACrH,WAAW,CAACsH,QAAQ;UACjCC,YAAY,EAAE,IAAI,CAACvH,WAAW,CAACwH,MAAK,IAAK,qCAAqC;UAC9E3D,SAAS,EAAE,IAAIjB,IAAI,CAAC,CAAC,CAAC6E,WAAW,CAAC,CAAC;UACnCC,KAAK,EAAE,CAAC;UACRC,OAAO,EAAE;QACX,CAAC;;QAED;QACA,IAAI;UACF,MAAMlC,QAAO,GAAI,MAAMC,KAAK,CAAC,oCAAoC,EAAE;YACjEkC,MAAM,EAAE,MAAM;YACdC,OAAO,EAAE;cACP,cAAc,EAAE,kBAAkB;cAClC,eAAe,EAAE,UAAU,IAAI,CAAC7H,WAAW,CAAC8H,KAAK;YACnD,CAAC;YACDC,IAAI,EAAElB,IAAI,CAACmB,SAAS,CAAC;cACnBC,UAAU,EAAE,IAAI,CAAC9F,cAAc,CAAChB,EAAE;cAClCX,OAAO,EAAEiI,QAAQ,CAACjI,OAAO;cACzBkI,SAAS,EAAEpF,OAAO,CAACnC;YACrB,CAAC;UACH,CAAC,CAAC;UAEF,IAAIsE,QAAQ,CAACE,EAAE,EAAE;YACf,MAAMgD,UAAS,GAAI,MAAMlD,QAAQ,CAACI,IAAI,CAAC,CAAC;YACxC;YACA4C,QAAQ,CAACtH,EAAC,GAAIwH,UAAU,CAACxH,EAAE;UAC7B;QACF,EAAE,OAAOgF,KAAK,EAAE;UACdL,OAAO,CAACK,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC;UACzD;UACAsC,QAAQ,CAACtH,EAAC,GAAIyB,IAAI,CAACuF,GAAG,CAAC,CAAC;QAC1B;;QAEA;QACA,IAAI,CAAC7E,OAAO,CAACG,OAAO,EAAE;UACpBH,OAAO,CAACG,OAAM,GAAI,EAAE;QACtB;QACAH,OAAO,CAACG,OAAO,CAACF,IAAI,CAACkF,QAAQ,CAAC;QAC9B,IAAI,CAACtG,cAAc,CAAC6B,aAAa,EAAE;;QAEnC;QACA,IAAI,CAACuE,WAAW,CAAC,CAAC;;QAElB;QACA,IAAI,CAACF,gBAAgB,CAAC,SAAS,EAAE,SAAS,CAAC;MAC7C,EAAE,OAAOlC,KAAK,EAAE;QACdL,OAAO,CAACK,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;QAC/C,IAAI,CAACkC,gBAAgB,CAAC,cAAc,EAAE,OAAO,CAAC;MAChD,UAAU;QACR,IAAI,CAAClI,iBAAgB,GAAI,KAAK;MAChC;IACF,CAAC;IAED;IACA,MAAMyI,UAAUA,CAACC,IAAI,EAAEC,aAAY,GAAI,IAAI,EAAE;MAC3C,IAAI;QACF;QACAD,IAAI,CAAClB,OAAM,GAAI,CAACkB,IAAI,CAAClB,OAAO;QAC5BkB,IAAI,CAACnB,KAAI,IAAKmB,IAAI,CAAClB,OAAM,GAAI,IAAI,CAAC,CAAC;;QAEnC;QACA,IAAI,IAAI,CAAC3H,WAAW,EAAE;UACpB,IAAI;YACF,MAAMyF,QAAO,GAAI,MAAMC,KAAK,CAAC,sCAAsCmD,IAAI,CAAC1H,EAAE,OAAO,EAAE;cACjFyG,MAAM,EAAE,MAAM;cACdC,OAAO,EAAE;gBACP,cAAc,EAAE,kBAAkB;gBAClC,eAAe,EAAE,UAAU,IAAI,CAAC7H,WAAW,CAAC8H,KAAK;cACnD;YACF,CAAC,CAAC;YAEF,IAAI,CAACrC,QAAQ,CAACE,EAAE,EAAE;cAChB;cACAkD,IAAI,CAAClB,OAAM,GAAI,CAACkB,IAAI,CAAClB,OAAO;cAC5BkB,IAAI,CAACnB,KAAI,IAAKmB,IAAI,CAAClB,OAAM,GAAI,IAAI,CAAC,CAAC;cACnC,MAAM,IAAI/B,KAAK,CAAC,yBAAyB,CAAC;YAC5C;UACF,EAAE,OAAOO,KAAK,EAAE;YACdL,OAAO,CAACK,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;UAC9C;QACF,OAAO;UACL;UACA,IAAI,CAACkC,gBAAgB,CAAC,aAAa,EAAE,MAAM,CAAC;UAC5C;UACAQ,IAAI,CAAClB,OAAM,GAAI,CAACkB,IAAI,CAAClB,OAAO;UAC5BkB,IAAI,CAACnB,KAAI,IAAKmB,IAAI,CAAClB,OAAM,GAAI,IAAI,CAAC,CAAC;QACrC;MACF,EAAE,OAAOxB,KAAK,EAAE;QACdL,OAAO,CAACK,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC9C;IACF,CAAC;IAED;IACA4C,UAAUA,CAACC,UAAU,EAAE;MACrB,MAAMC,IAAG,GAAI,IAAIrG,IAAI,CAACoG,UAAU,CAAC;MACjC,OAAOC,IAAI,CAACC,kBAAkB,CAAC,OAAO,EAAE;QAAEC,IAAI,EAAE,SAAS;QAAEC,KAAK,EAAE,MAAM;QAAEC,GAAG,EAAE;MAAU,CAAC,CAAC;IAC7F,CAAC;IAED;IACA3E,kBAAkBA,CAACuE,IAAI,EAAE;MACvB,MAAME,IAAG,GAAIF,IAAI,CAACK,WAAW,CAAC,CAAC;MAC/B,MAAMF,KAAI,GAAIG,MAAM,CAACN,IAAI,CAACO,QAAQ,CAAC,IAAI,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;MAC1D,MAAMJ,GAAE,GAAIE,MAAM,CAACN,IAAI,CAACS,OAAO,CAAC,CAAC,CAAC,CAACD,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;MACnD,OAAO,GAAGN,IAAI,IAAIC,KAAK,IAAIC,GAAG,EAAE;IAClC,CAAC;IAED;IACAM,kBAAkBA,CAAC9F,SAAS,EAAE;MAC5B,MAAMsE,GAAE,GAAI,IAAIvF,IAAI,CAAC,CAAC;MACtB,MAAMgH,IAAG,GAAI,IAAIhH,IAAI,CAACiB,SAAS,CAAC;MAChC,MAAMgG,MAAK,GAAI1B,GAAE,GAAIyB,IAAI;MACzB,MAAME,QAAO,GAAIC,IAAI,CAACC,KAAK,CAACH,MAAK,IAAK,IAAG,GAAI,EAAE,CAAC,CAAC;MACjD,MAAMI,SAAQ,GAAIF,IAAI,CAACC,KAAK,CAACF,QAAO,GAAI,EAAE,CAAC;MAC3C,MAAMI,QAAO,GAAIH,IAAI,CAACC,KAAK,CAACC,SAAQ,GAAI,EAAE,CAAC;MAE3C,IAAIH,QAAO,GAAI,CAAC,EAAE;QAChB,OAAO,IAAI;MACb,OAAO,IAAIA,QAAO,GAAI,EAAE,EAAE;QACxB,OAAO,GAAGA,QAAQ,KAAK;MACzB,OAAO,IAAIG,SAAQ,GAAI,EAAE,EAAE;QACzB,OAAO,GAAGA,SAAS,KAAK;MAC1B,OAAO,IAAIC,QAAO,GAAI,EAAE,EAAE;QACxB,OAAO,GAAGA,QAAQ,IAAI;MACxB,OAAO;QACL,OAAO,IAAI,CAACnB,UAAU,CAAClF,SAAS,CAAC;MACnC;IACF,CAAC;IAED;IACAsG,mBAAmBA,CAAChJ,EAAE,EAAE;MACtB,MAAM4B,OAAM,GAAI,IAAI,CAACf,QAAQ,CAACuE,IAAI,CAAC7D,CAAA,IAAKA,CAAC,CAACvB,EAAC,KAAMA,EAAE,CAAC;MACpD,OAAO4B,OAAM,GAAIA,OAAO,CAAC1B,KAAI,GAAI,MAAM;IACzC,CAAC;IAED;IACA+I,WAAWA,CAACjJ,EAAE,EAAE;MACd,MAAM4B,OAAM,GAAI,IAAI,CAACf,QAAQ,CAACuE,IAAI,CAAC7D,CAAA,IAAKA,CAAC,CAACvB,EAAC,KAAMA,EAAE,CAAC;MACpD,IAAI4B,OAAO,EAAE;QACX;QACA,MAAMsH,UAAS,GAAI,IAAI,CAACpI,UAAU,CAACsE,IAAI,CAAC+D,CAAA,IAAKA,CAAC,CAACzI,IAAG,KAAMkB,OAAO,CAACC,QAAQ,CAAC,EAAE7B,EAAC,IAAK,EAAE;QAEnF,IAAI,CAACD,WAAU,GAAI;UACjBC,EAAE,EAAE4B,OAAO,CAAC5B,EAAE;UACdE,KAAK,EAAE0B,OAAO,CAAC1B,KAAK;UACpBC,WAAW,EAAE+I,UAAU;UACvB9I,OAAO,EAAEwB,OAAO,CAACwH,IAAI,CAACC,IAAI,CAAC,GAAG,CAAC;UAC/BhJ,UAAU,EAAEuB,OAAO,CAACvB,UAAU;UAC9BhB,OAAO,EAAEuC,OAAO,CAACvC,OAAO;UACxBiB,MAAM,EAAE,WAAW;UACnBC,aAAa,EAAE,IAAI,CAACgD,kBAAkB,CAAC,IAAI9B,IAAI,CAACG,OAAO,CAACrB,aAAa,CAAC,CAAC;UACvEC,KAAK,EAAE;QACT,CAAC;QACD,IAAI,CAAChB,gBAAe,GAAI,IAAI;QAC5B,IAAI,CAACD,iBAAgB,GAAI,IAAI;;QAE7B;QACA,IAAI,CAAC+J,SAAS,CAAC,MAAM;UACnB,IAAI,IAAI,CAACC,KAAK,CAACC,aAAa,EAAE;YAC5B,IAAI,CAACD,KAAK,CAACC,aAAa,CAACC,SAAQ,GAAI7H,OAAO,CAACvC,OAAM,IAAK,SAAS;UACnE;QACF,CAAC,CAAC;MACJ;IACF,CAAC;IAED;IACAqK,gBAAgBA,CAAA,EAAG;MACjB,IAAI,CAAC3J,WAAU,GAAI;QACjBC,EAAE,EAAE,IAAI;QACRE,KAAK,EAAE,EAAE;QACTC,WAAW,EAAE,EAAE;QACfC,OAAO,EAAE,EAAE;QACXC,UAAU,EAAE,EAAE;QACdhB,OAAO,EAAE,sBAAsB;QAC/BiB,MAAM,EAAE,WAAW;QACnBC,aAAa,EAAE,IAAI,CAACgD,kBAAkB,CAAC,IAAI9B,IAAI,CAAC,CAAC,CAAC;QAClDjB,KAAK,EAAE;MACT,CAAC;;MAED;MACA,IAAI,CAAC8I,SAAS,CAAC,MAAM;QACnB,IAAI,IAAI,CAACC,KAAK,CAACC,aAAa,EAAE;UAC5B,IAAI,CAACD,KAAK,CAACC,aAAa,CAACC,SAAQ,GAAI,IAAI,CAAC1J,WAAW,CAACV,OAAO;QAC/D;MACF,CAAC,CAAC;IACJ,CAAC;IAED;IACAsK,iBAAiBA,CAAA,EAAG;MAClB,IAAI,IAAI,CAACJ,KAAK,CAACC,aAAa,EAAE;QAC5B,IAAI,CAACzJ,WAAW,CAACV,OAAM,GAAI,IAAI,CAACkK,KAAK,CAACC,aAAa,CAACC,SAAS;MAC/D;IACF,CAAC;IAED;IACAG,UAAUA,CAACC,OAAO,EAAEC,KAAI,GAAI,IAAI,EAAE;MAChC;MACA,IAAI,IAAI,CAACP,KAAK,CAACC,aAAa,EAAE;QAC5B,IAAI,CAACD,KAAK,CAACC,aAAa,CAACO,KAAK,CAAC,CAAC;;QAEhC;QACA,IAAI;UACF;UACA,IAAIF,OAAM,KAAM,aAAY,IAAKC,KAAK,EAAE;YACtCE,QAAQ,CAACC,WAAW,CAAC,aAAa,EAAE,KAAK,EAAE,IAAIH,KAAK,GAAG,CAAC;UAC1D,OAAO;YACLE,QAAQ,CAACC,WAAW,CAACJ,OAAO,EAAE,KAAK,EAAEC,KAAK,CAAC;UAC7C;UACA,IAAI,CAACH,iBAAiB,CAAC,CAAC;QAC1B,EAAE,OAAO3E,KAAK,EAAE;UACdL,OAAO,CAACK,KAAK,CAAC,YAAY,EAAEA,KAAK,CAAC;QACpC;MACF;IACF,CAAC;IAED;IACAkF,UAAUA,CAAA,EAAG;MACX,MAAM9F,GAAE,GAAI+F,MAAM,CAAC,UAAU,EAAE,SAAS,CAAC;MACzC,IAAI/F,GAAG,EAAE;QACP,IAAI,CAACwF,UAAU,CAAC,YAAY,EAAExF,GAAG,CAAC;MACpC;IACF,CAAC;IAED;IACAgG,sBAAsBA,CAACxE,CAAC,EAAE;MACxB,MAAMyE,IAAG,GAAIzE,CAAC,CAAC0E,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAC9B,IAAIF,IAAI,EAAE;QACR;QACA,MAAMG,MAAK,GAAI,IAAIC,UAAU,CAAC,CAAC;QAC/BD,MAAM,CAACE,MAAK,GAAKC,KAAK,IAAK;UACzB,IAAI,CAAC5K,WAAW,CAACM,UAAS,GAAIsK,KAAK,CAACL,MAAM,CAACM,MAAM;QACnD,CAAC;QACDJ,MAAM,CAACK,aAAa,CAACR,IAAI,CAAC;MAC5B;IACF,CAAC;IAED;IACAS,kBAAkBA,CAAA,EAAG;MACnBd,QAAQ,CAACe,cAAc,CAAC,aAAa,CAAC,CAACC,KAAK,CAAC,CAAC;IAChD,CAAC;IAED;IACAC,kBAAkBA,CAAA,EAAG;MACnBjB,QAAQ,CAACe,cAAc,CAAC,aAAa,CAAC,CAACC,KAAK,CAAC,CAAC;IAChD,CAAC;IAED;IACAE,kBAAkBA,CAAA,EAAG;MACnBlB,QAAQ,CAACe,cAAc,CAAC,aAAa,CAAC,CAACC,KAAK,CAAC,CAAC;IAChD,CAAC;IAED;IACAG,iBAAiBA,CAACvF,CAAC,EAAE;MACnB,MAAMyE,IAAG,GAAIzE,CAAC,CAAC0E,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAC9B,IAAIF,IAAI,EAAE;QACR;QACA,MAAMG,MAAK,GAAI,IAAIC,UAAU,CAAC,CAAC;QAC/BD,MAAM,CAACE,MAAK,GAAKC,KAAK,IAAK;UACzB,IAAI,CAAC5K,WAAW,CAACS,KAAK,CAAC4B,IAAI,CAAC;YAC1BpC,EAAE,EAAEyB,IAAI,CAACuF,GAAG,CAAC,CAAC;YACdoE,IAAI,EAAE,OAAO;YACbhH,GAAG,EAAEuG,KAAK,CAACL,MAAM,CAACM,MAAM;YACxBlK,IAAI,EAAE2J,IAAI,CAAC3J;UACb,CAAC,CAAC;QACJ,CAAC;QACD8J,MAAM,CAACK,aAAa,CAACR,IAAI,CAAC;MAC5B;MACA;MACAzE,CAAC,CAAC0E,MAAM,CAACR,KAAI,GAAI,EAAE;IACrB,CAAC;IAED;IACAuB,iBAAiBA,CAACzF,CAAC,EAAE;MACnB,MAAMyE,IAAG,GAAIzE,CAAC,CAAC0E,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAC9B,IAAIF,IAAI,EAAE;QACR;QACA,IAAI,CAACtK,WAAW,CAACS,KAAK,CAAC4B,IAAI,CAAC;UAC1BpC,EAAE,EAAEyB,IAAI,CAACuF,GAAG,CAAC,CAAC;UACdoE,IAAI,EAAE,OAAO;UACbhH,GAAG,EAAE,GAAG;UACR1D,IAAI,EAAE2J,IAAI,CAAC3J;QACb,CAAC,CAAC;MACJ;MACAkF,CAAC,CAAC0E,MAAM,CAACR,KAAI,GAAI,EAAE;IACrB,CAAC;IAED;IACAwB,iBAAiBA,CAAC1F,CAAC,EAAE;MACnB,MAAMyE,IAAG,GAAIzE,CAAC,CAAC0E,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAC9B,IAAIF,IAAI,EAAE;QACR;QACA,IAAI,CAACtK,WAAW,CAACS,KAAK,CAAC4B,IAAI,CAAC;UAC1BpC,EAAE,EAAEyB,IAAI,CAACuF,GAAG,CAAC,CAAC;UACdoE,IAAI,EAAE,OAAO;UACbhH,GAAG,EAAE,GAAG;UACR1D,IAAI,EAAE2J,IAAI,CAAC3J;QACb,CAAC,CAAC;MACJ;MACAkF,CAAC,CAAC0E,MAAM,CAACR,KAAI,GAAI,EAAE;IACrB,CAAC;IAED;IACAyB,WAAWA,CAACvL,EAAE,EAAE;MACd,IAAI,CAACD,WAAW,CAACS,KAAI,GAAI,IAAI,CAACT,WAAW,CAACS,KAAK,CAACmB,MAAM,CAACnB,KAAI,IAAKA,KAAK,CAACR,EAAC,KAAMA,EAAE,CAAC;IAClF,CAAC;IAED;IACA,MAAMwL,aAAaA,CAAA,EAAG;MACpB,IAAI,CAAC,IAAI,CAACzL,WAAW,CAACC,EAAE,EAAE;QACxBiF,KAAK,CAAC,QAAQ,CAAC;QACf;MACF;;MAEA;MACA,IAAI,CAAClF,WAAW,CAACqJ,IAAG,GAAI,IAAI,CAACrJ,WAAW,CAACK,OAAO,CAACqL,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAACC,GAAE,IAAKA,GAAG,CAAC3F,IAAI,CAAC,CAAC,CAAC;MAClFf,KAAK,CAAC,IAAI,CAAClF,WAAW,CAACV,OAAO,CAAC;MAC/B;MACA,IAAI;QACF,MAAM+E,GAAE,GAAI,sCAAsC,IAAI,CAACrE,WAAW,CAACC,EAAE,EAAE;QACvE,MAAMsE,QAAO,GAAI,MAAMC,KAAK,CAACH,GAAG,EAAE;UAChCqC,MAAM,EAAE,KAAK;UACbC,OAAO,EAAE;YACP,cAAc,EAAE;UAClB,CAAC;UACDE,IAAI,EAAElB,IAAI,CAACmB,SAAS,CAAC,IAAI,CAAC9G,WAAW;QACvC,CAAC,CAAC;QAEF,IAAI,CAACuE,QAAQ,CAACE,EAAE,EAAE;UAChB,MAAM,IAAIC,KAAK,CAAC,0BAA0B,CAAC;QAC7C;;QAEA;QACA,IAAI,CAACiF,gBAAgB,CAAC,CAAC;QACvB,IAAI,CAACnK,iBAAgB,GAAI,KAAK;QAC9B0F,KAAK,CAAC,QAAQ,CAAC;MACjB,EAAE,OAAOD,KAAK,EAAE;QACdL,OAAO,CAACK,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;QAC/CC,KAAK,CAAC,cAAc,CAAC;MACvB;IACF,CAAC;IAED;IACA,MAAM2G,WAAWA,CAAA,EAAG;MAClB,IAAI,CAAC,IAAI,CAAC7L,WAAW,CAACG,KAAK,CAAC8F,IAAI,CAAC,CAAC,EAAE;QAClCf,KAAK,CAAC,SAAS,CAAC;QAChB;MACF;MACA,IAAI,CAAC,IAAI,CAAClF,WAAW,CAACV,OAAO,CAAC2G,IAAI,CAAC,CAAC,EAAE;QACpCf,KAAK,CAAC,SAAS,CAAC;QAChB;MACF;MACA,IAAI,CAAC,IAAI,CAAClF,WAAW,CAACI,WAAW,EAAE;QACjC8E,KAAK,CAAC,SAAS,CAAC;QAChB;MACF;;MAEA;MACA,IAAI,CAAClF,WAAW,CAACqJ,IAAG,GAAI,IAAI,CAACrJ,WAAW,CAACK,OAAO,CAACqL,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAACC,GAAE,IAAKA,GAAG,CAAC3F,IAAI,CAAC,CAAC,CAAC;;MAElF;MACA,IAAI;QACF,MAAM5B,GAAE,GAAI,yCAAyC;QACrD,MAAME,QAAO,GAAI,MAAMC,KAAK,CAACH,GAAG,EAAE;UAChCqC,MAAM,EAAE,MAAM;UACdC,OAAO,EAAE;YACP,cAAc,EAAE;UAClB,CAAC;UACDE,IAAI,EAAElB,IAAI,CAACmB,SAAS,CAAC;YAAE,GAAG,IAAI,CAAC9G,WAAW;YAAEE,SAAS,EAAE;UAAI,CAAC;QAC9D,CAAC,CAAC;QAEF,MAAM5B,IAAG,GAAI,MAAMiG,QAAQ,CAACI,IAAI,CAAC,CAAC;QAClCC,OAAO,CAACC,GAAG,CAACvG,IAAI;QAEhB,IAAI,CAACiG,QAAQ,CAACE,EAAE,EAAE;UAChB,MAAM,IAAIC,KAAK,CAAC,wBAAwB,CAAC;QAC3C;;QAEA;QACA,IAAI,CAACiF,gBAAgB,CAAC,CAAC;QACvB,IAAI,CAACnK,iBAAgB,GAAI,KAAK;QAC9B0F,KAAK,CAAC,QAAQ,CAAC;MACjB,EAAE,OAAOD,KAAK,EAAE;QACdL,OAAO,CAACK,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;QAC9CC,KAAK,CAAC,cAAc,CAAC;MACvB;IACF,CAAC;IAED;IACA4G,YAAYA,CAAC7L,EAAE,EAAE;MACf,MAAM6B,QAAO,GAAI,IAAI,CAACf,UAAU,CAACsE,IAAI,CAAC+D,CAAA,IAAKA,CAAC,CAACnJ,EAAC,KAAMA,EAAE,CAAC;MACvD,IAAI6B,QAAQ,EAAE;QACZ,IAAI,CAACpB,YAAW,GAAI;UAAE,GAAGoB;QAAS,CAAC;QACnC,IAAI,CAACnC,iBAAgB,GAAI,IAAI;QAC7B,IAAI,CAACD,iBAAgB,GAAI,IAAI;MAC/B;IACF,CAAC;IAED;IACAqM,iBAAiBA,CAAA,EAAG;MAClB,IAAI,CAACrL,YAAW,GAAI;QAClBT,EAAE,EAAE,IAAI;QACRU,IAAI,EAAE,EAAE;QACRC,WAAW,EAAE,EAAE;QACfC,IAAI,EAAE;MACR,CAAC;MACD,IAAI,CAAClB,iBAAgB,GAAI,KAAK;IAChC,CAAC;IAED;IACA,MAAMqM,cAAcA,CAAA,EAAG;MACrB,IAAI,CAAC,IAAI,CAACtL,YAAY,CAACC,IAAI,CAACsF,IAAI,CAAC,CAAC,EAAE;QAClCf,KAAK,CAAC,SAAS,CAAC;QAChB;MACF;MAEA,IAAI,CAAC,IAAI,CAACxE,YAAY,CAACE,WAAW,CAACqF,IAAI,CAAC,CAAC,EAAE;QACzCf,KAAK,CAAC,SAAS,CAAC;QAChB;MACF;MAEA,IAAI;QACF,MAAMb,GAAE,GAAI,wCAAwC,IAAI,CAAC3D,YAAY,CAACT,EAAE,EAAE;QAC1E,MAAMsE,QAAO,GAAI,MAAMC,KAAK,CAACH,GAAG,EAAE;UAChCqC,MAAM,EAAE,KAAK;UACbC,OAAO,EAAE;YACP,cAAc,EAAE;UAClB,CAAC;UACDE,IAAI,EAAElB,IAAI,CAACmB,SAAS,CAAC,IAAI,CAACpG,YAAY;QACxC,CAAC,CAAC;QAEF,IAAI,CAAC6D,QAAQ,CAACE,EAAE,EAAE;UAChB,MAAM,IAAIC,KAAK,CAAC,2BAA2B,CAAC;QAC9C;;QAEA;QACA,MAAMuH,eAAc,GAAI,MAAM1H,QAAQ,CAACI,IAAI,CAAC,CAAC;QAC7C,MAAMuH,KAAI,GAAI,IAAI,CAACnL,UAAU,CAACoL,SAAS,CAAC/C,CAAA,IAAKA,CAAC,CAACnJ,EAAC,KAAM,IAAI,CAACS,YAAY,CAACT,EAAE,CAAC;QAC3E,IAAIiM,KAAI,KAAM,CAAC,CAAC,EAAE;UAChB,IAAI,CAACnL,UAAU,CAACqL,MAAM,CAACF,KAAK,EAAE,CAAC,EAAED,eAAe,CAAC;QACnD;QAEA,IAAI,CAACF,iBAAiB,CAAC,CAAC;QACxB,IAAI,CAACrM,iBAAgB,GAAI,KAAK;QAC9BwF,KAAK,CAAC,QAAQ,CAAC;MACjB,EAAE,OAAOD,KAAK,EAAE;QACdL,OAAO,CAACK,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;QAChDC,KAAK,CAAC,cAAc,CAAC;MACvB;IACF,CAAC;IAED;IACA,MAAMmH,cAAcA,CAAA,EAAG;MACrB,IAAI,CAAC,IAAI,CAAC3L,YAAY,CAACC,IAAI,CAACsF,IAAI,CAAC,CAAC,EAAE;QAClCf,KAAK,CAAC,SAAS,CAAC;QAChB;MACF;MAEA,IAAI,CAAC,IAAI,CAACxE,YAAY,CAACE,WAAW,CAACqF,IAAI,CAAC,CAAC,EAAE;QACzCf,KAAK,CAAC,SAAS,CAAC;QAChB;MACF;MAEA,IAAI;QACF,MAAMb,GAAE,GAAI,6CAA6C;QACzD,MAAME,QAAO,GAAI,MAAMC,KAAK,CAACH,GAAG,EAAE;UAChCqC,MAAM,EAAE,MAAM;UACdC,OAAO,EAAE;YACP,cAAc,EAAE;UAClB,CAAC;UACDE,IAAI,EAAElB,IAAI,CAACmB,SAAS,CAAC;YACnB,GAAG,IAAI,CAACpG,YAAY;YACpBmC,KAAK,EAAE,CAAC;YACRsC,WAAW,EAAE,IAAIzD,IAAI,CAAC,CAAC,CAAC6E,WAAW,CAAC,CAAC,CAACmF,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;UACpD,CAAC;QACH,CAAC,CAAC;QAEF,IAAI,CAACnH,QAAQ,CAACE,EAAE,EAAE;UAChB,MAAM,IAAIC,KAAK,CAAC,2BAA2B,CAAC;QAC9C;;QAEA;QACA,MAAM4H,WAAU,GAAI,MAAM/H,QAAQ,CAACI,IAAI,CAAC,CAAC;QACzC,IAAI,CAAC5D,UAAU,CAACsB,IAAI,CAACiK,WAAW,CAAC;QAEjC,IAAI,CAACP,iBAAiB,CAAC,CAAC;QACxB,IAAI,CAACrM,iBAAgB,GAAI,KAAK;QAC9BwF,KAAK,CAAC,QAAQ,CAAC;MACjB,EAAE,OAAOD,KAAK,EAAE;QACdL,OAAO,CAACK,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;QAChD;QACA,MAAMsH,aAAY,GAAI;UACpB,GAAG,IAAI,CAAC7L,YAAY;UACpBT,EAAE,EAAEyB,IAAI,CAACuF,GAAG,CAAC,CAAC;UACdpE,KAAK,EAAE,CAAC;UACRsC,WAAW,EAAE,IAAIzD,IAAI,CAAC,CAAC,CAAC6E,WAAW,CAAC,CAAC,CAACmF,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;QACpD,CAAC;QACD,IAAI,CAAC3K,UAAU,CAACsB,IAAI,CAACkK,aAAa,CAAC;QACnC,IAAI,CAACR,iBAAiB,CAAC,CAAC;QACxB,IAAI,CAACrM,iBAAgB,GAAI,KAAK;QAC9BwF,KAAK,CAAC,aAAY,GAAID,KAAK,CAAC;MAC9B;IACF,CAAC;IACD;IACAuH,aAAaA,CAACvM,EAAE,EAAE;MAChB,MAAM4B,OAAM,GAAI,IAAI,CAACf,QAAQ,CAACuE,IAAI,CAAC7D,CAAA,IAAKA,CAAC,CAACvB,EAAC,KAAMA,EAAE,CAAC;MACpD,IAAI4B,OAAO,EAAE;QACX,IAAI,CAAC/B,YAAW,GAAIG,EAAE;QACtB,IAAI,CAACF,cAAa,GAAI,SAAS;QAC/B,IAAI,CAACF,oBAAmB,GAAI,WAAWgC,OAAO,CAAC1B,KAAK,aAAa;QACjE,IAAI,CAACP,iBAAgB,GAAI,IAAI;MAC/B;IACF,CAAC;IAED;IACA6M,cAAcA,CAACxM,EAAE,EAAE;MACjB,MAAM6B,QAAO,GAAI,IAAI,CAACf,UAAU,CAACsE,IAAI,CAAC+D,CAAA,IAAKA,CAAC,CAACnJ,EAAC,KAAMA,EAAE,CAAC;MACvD,IAAI6B,QAAQ,EAAE;QACZ,IAAI,CAAChC,YAAW,GAAIG,EAAE;QACtB,IAAI,CAACF,cAAa,GAAI,UAAU;QAChC,IAAI,CAACF,oBAAmB,GAAI,WAAWiC,QAAQ,CAACnB,IAAI,WAAWmB,QAAQ,CAACe,KAAK,WAAW;QACxF,IAAI,CAACjD,iBAAgB,GAAI,IAAI;MAC/B;IACF,CAAC;IAED;IACA8M,YAAYA,CAAC5I,IAAI,EAAE;MACjB,IAAI,CAAClF,UAAS,GAAI,IAAI;MACtB,IAAI,CAACC,eAAc,GAAIiF,IAAI;MAC3B,IAAI,CAACrF,cAAa,GAAI,KAAK;MAC3B;MACA4E,MAAM,CAACU,QAAQ,CAAC;QAAE4I,GAAG,EAAE,CAAC;QAAEC,QAAQ,EAAE;MAAS,CAAC,CAAC;IACjD,CAAC;IAEDC,kBAAkBA,CAACC,IAAI,EAAE;MACvB;MACArH,YAAY,CAACsH,OAAO,CAAC,aAAa,EAAEpH,IAAI,CAACmB,SAAS,CAACgG,IAAI,CAAC,CAAC;MACzD,IAAI,CAAChO,WAAU,GAAIgO,IAAI;MACvB,IAAI,CAAClO,UAAS,GAAI,KAAK;MACvB,IAAI,CAACJ,WAAU,GAAI,MAAM;;MAEzB;MACA,IAAI,CAAC2I,gBAAgB,CAAC,OAAO,EAAE,SAAS,CAAC;IAC3C,CAAC;IAED6F,qBAAqBA,CAAA,EAAG;MACtB;MACA,IAAI,CAACnO,eAAc,GAAI,OAAO;MAC9B,IAAI,CAACsI,gBAAgB,CAAC,WAAW,EAAE,SAAS,CAAC;IAC/C,CAAC;IAED8F,YAAYA,CAAA,EAAG;MACb;MACAxH,YAAY,CAACK,UAAU,CAAC,aAAa,CAAC;MACtC,IAAI,CAAChH,WAAU,GAAI,IAAI;MACvB,IAAI,CAACF,UAAS,GAAI,KAAK;MACvB,IAAI,CAACJ,WAAU,GAAI,MAAM;;MAEzB;MACA,IAAI,IAAI,CAACD,WAAW,EAAE;QACpB,IAAI,CAACA,WAAU,GAAI,KAAK;MAC1B;MAEA,IAAI,CAAC4I,gBAAgB,CAAC,SAAS,EAAE,SAAS,CAAC;IAC7C,CAAC;IAED+F,eAAeA,CAAA,EAAG;MAChB;MACA,IAAI,CAACzO,cAAa,GAAI,KAAK;MAC3B;MACA,IAAI,CAACoF,UAAU,CAAC,MAAM,CAAC;MACvB,IAAI,CAACsD,gBAAgB,CAAC,gBAAgB,EAAE,MAAM,CAAC;IACjD,CAAC;IAEDgG,oBAAoBA,CAAA,EAAG;MACrB;MACA,MAAMC,SAAQ,GAAI3H,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;MACrD,IAAI0H,SAAS,EAAE;QACb,IAAI;UACF,IAAI,CAACtO,WAAU,GAAI6G,IAAI,CAACC,KAAK,CAACwH,SAAS,CAAC;QAC1C,EAAE,OAAOvH,CAAC,EAAE;UACVjB,OAAO,CAACK,KAAK,CAAC,WAAW,EAAEY,CAAC,CAAC;UAC7BJ,YAAY,CAACK,UAAU,CAAC,aAAa,CAAC;QACxC;MACF;IACF,CAAC;IAEDqB,gBAAgBA,CAACkG,OAAO,EAAEhC,IAAG,GAAI,MAAM,EAAE;MACvC;MACA,MAAMiC,YAAW,GAAIrD,QAAQ,CAACsD,aAAa,CAAC,KAAK,CAAC;MAClDD,YAAY,CAACE,SAAQ,GAAI,gHAAgH;;MAEzI;MACA,IAAInC,IAAG,KAAM,SAAS,EAAE;QACtBiC,YAAY,CAACG,SAAS,CAACC,GAAG,CAAC,cAAc,EAAE,YAAY,CAAC;MAC1D,OAAO,IAAIrC,IAAG,KAAM,OAAO,EAAE;QAC3BiC,YAAY,CAACG,SAAS,CAACC,GAAG,CAAC,YAAY,EAAE,YAAY,CAAC;MACxD,OAAO,IAAIrC,IAAG,KAAM,SAAS,EAAE;QAC7BiC,YAAY,CAACG,SAAS,CAACC,GAAG,CAAC,eAAe,EAAE,YAAY,CAAC;MAC3D,OAAO;QACLJ,YAAY,CAACG,SAAS,CAACC,GAAG,CAAC,aAAa,EAAE,YAAY,CAAC;MACzD;MAEAJ,YAAY,CAACK,WAAU,GAAIN,OAAO;MAClCpD,QAAQ,CAACpD,IAAI,CAAC+G,WAAW,CAACN,YAAY,CAAC;;MAEvC;MACAO,UAAU,CAAC,MAAM;QACfP,YAAY,CAACG,SAAS,CAACC,GAAG,CAAC,WAAW,EAAE,eAAe,CAAC;QACxDG,UAAU,CAAC,MAAM;UACf5D,QAAQ,CAACpD,IAAI,CAACiH,WAAW,CAACR,YAAY,CAAC;QACzC,CAAC,EAAE,GAAG,CAAC;MACT,CAAC,EAAE,IAAI,CAAC;IACV,CAAC;IAED;IACApK,QAAQA,CAAA,EAAG;MACT;MACA,IAAI,CAACiK,oBAAoB,CAAC,CAAC;IAC7B,CAAC;IAED;IACA,MAAMY,aAAaA,CAAA,EAAG;MACpB,IAAI;QACF,IAAI,IAAI,CAAChO,cAAa,KAAM,SAAS,EAAE;UACrC;UACA,MAAMsE,GAAE,GAAI,sCAAsC,IAAI,CAACvE,YAAY,EAAE;UACrE,MAAMyE,QAAO,GAAI,MAAMC,KAAK,CAACH,GAAG,EAAE;YAChCqC,MAAM,EAAE,QAAQ;YAChBC,OAAO,EAAE;cACP,cAAc,EAAE;YAClB;UACF,CAAC,CAAC;UAEF,IAAI,CAACpC,QAAQ,CAACE,EAAE,EAAE;YAChB,MAAM,IAAIC,KAAK,CAAC,0BAA0B,CAAC;UAC7C;;UAEA;UACA,IAAI,CAAC5D,QAAO,GAAI,IAAI,CAACA,QAAQ,CAACc,MAAM,CAACJ,CAAA,IAAKA,CAAC,CAACvB,EAAC,KAAM,IAAI,CAACH,YAAY,CAAC;UACrEoF,KAAK,CAAC,QAAQ,CAAC;QACjB,OAAO,IAAI,IAAI,CAACnF,cAAa,KAAM,UAAU,EAAE;UAC7C,IAAI,CAACgB,UAAS,GAAI,IAAI,CAACA,UAAU,CAACa,MAAM,CAACwH,CAAA,IAAKA,CAAC,CAACnJ,EAAC,KAAM,IAAI,CAACH,YAAY,CAAC;QAC3E;MACF,EAAE,OAAOmF,KAAK,EAAE;QACdL,OAAO,CAACK,KAAK,CAAC,kBAAkB,IAAI,CAAClF,cAAc,GAAG,EAAEkF,KAAK,CAAC;QAC9DC,KAAK,CAAC,KAAK,IAAI,CAACnF,cAAa,KAAM,SAAQ,GAAI,IAAG,GAAI,IAAI,UAAU,CAAC;MACvE,UAAU;QACR,IAAI,CAACH,iBAAgB,GAAI,KAAK;MAChC;IACF,CAAC;IAED;IACAoO,OAAOA,CAAA,EAAG;MACR;MACA,IAAI,CAAC9K,QAAQ,CAAC,CAAC;IACjB;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}