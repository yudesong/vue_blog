{"ast":null,"code":"export default {\n  name: 'UserRegister',\n  emits: ['switchToLogin', 'registerSuccess'],\n  data() {\n    return {\n      form: {\n        username: '',\n        email: '',\n        password: '',\n        confirmPassword: ''\n      },\n      errors: {},\n      isSubmitting: false\n    };\n  },\n  methods: {\n    // 表单验证\n    validateForm() {\n      this.errors = {};\n      let isValid = true;\n\n      // 验证用户名\n      if (!this.form.username.trim()) {\n        this.errors.username = '用户名不能为空';\n        isValid = false;\n      } else if (this.form.username.length < 3) {\n        this.errors.username = '用户名至少需要3个字符';\n        isValid = false;\n      }\n\n      // 验证邮箱\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      if (!this.form.email.trim()) {\n        this.errors.email = '邮箱不能为空';\n        isValid = false;\n      } else if (!emailRegex.test(this.form.email)) {\n        this.errors.email = '请输入有效的邮箱地址';\n        isValid = false;\n      }\n\n      // 验证密码\n      if (!this.form.password) {\n        this.errors.password = '密码不能为空';\n        isValid = false;\n      } else if (this.form.password.length < 6) {\n        this.errors.password = '密码至少需要6个字符';\n        isValid = false;\n      }\n\n      // 验证确认密码\n      if (!this.form.confirmPassword) {\n        this.errors.confirmPassword = '请确认密码';\n        isValid = false;\n      } else if (this.form.password !== this.form.confirmPassword) {\n        this.errors.confirmPassword = '两次输入的密码不一致';\n        isValid = false;\n      }\n      return isValid;\n    },\n    // 处理注册\n    async handleRegister() {\n      if (!this.validateForm()) {\n        return;\n      }\n      this.isSubmitting = true;\n      try {\n        const response = await fetch('http://localhost:5000/api/auth/register', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            username: this.form.username,\n            email: this.form.email,\n            password: this.form.password\n          })\n        });\n        const data = await response.json();\n        if (!response.ok) {\n          // 处理API返回的错误\n          if (data.error) {\n            if (data.error.includes('Username')) {\n              this.errors.username = '用户名已存在';\n            } else if (data.error.includes('Email')) {\n              this.errors.email = '邮箱已存在';\n            } else {\n              alert('注册失败：' + data.error);\n            }\n          }\n          return;\n        }\n\n        // 注册成功\n        this.$emit('registerSuccess', {\n          id: data.id,\n          username: this.form.username,\n          email: this.form.email\n        });\n\n        // 重置表单\n        this.form = {\n          username: '',\n          email: '',\n          password: '',\n          confirmPassword: ''\n        };\n        alert('注册成功！请登录');\n        this.$emit('switchToLogin');\n      } catch (error) {\n        console.error('注册错误:', error);\n        alert('注册失败，请稍后再试');\n      } finally {\n        this.isSubmitting = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","emits","data","form","username","email","password","confirmPassword","errors","isSubmitting","methods","validateForm","isValid","trim","length","emailRegex","test","handleRegister","response","fetch","method","headers","body","JSON","stringify","json","ok","error","includes","alert","$emit","id","console"],"sources":["/Users/yudesong/Project/Vue/blog/src/components/UserRegister.vue"],"sourcesContent":["<template>\n  <div class=\"flex justify-center items-center min-h-[70vh] py-12\">\n    <div class=\"w-full max-w-md bg-white rounded-xl shadow-lg overflow-hidden\">\n      <div class=\"p-8\">\n        <div class=\"text-center mb-8\">\n          <div class=\"flex justify-center mb-4\">\n            <i class=\"fa fa-user-plus text-indigo-600 text-4xl\"></i>\n          </div>\n          <h2 class=\"text-2xl font-bold text-gray-900\">创建账户</h2>\n          <p class=\"text-gray-600 mt-2\">加入我们的博客社区</p>\n        </div>\n        \n        <form @submit.prevent=\"handleRegister\" class=\"space-y-4\">\n          <!-- 用户名输入 -->\n          <div>\n            <label for=\"username\" class=\"block text-sm font-medium text-gray-700 mb-1\">用户名</label>\n            <input\n              id=\"username\"\n              v-model=\"form.username\"\n              type=\"text\"\n              required\n              class=\"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors\"\n              placeholder=\"请输入用户名\"\n              minlength=\"3\"\n              maxlength=\"30\"\n            >\n            <div v-if=\"errors.username\" class=\"text-red-500 text-xs mt-1\">{{ errors.username }}</div>\n          </div>\n          \n          <!-- 邮箱输入 -->\n          <div>\n            <label for=\"email\" class=\"block text-sm font-medium text-gray-700 mb-1\">邮箱</label>\n            <input\n              id=\"email\"\n              v-model=\"form.email\"\n              type=\"email\"\n              required\n              class=\"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors\"\n              placeholder=\"请输入邮箱地址\"\n            >\n            <div v-if=\"errors.email\" class=\"text-red-500 text-xs mt-1\">{{ errors.email }}</div>\n          </div>\n          \n          <!-- 密码输入 -->\n          <div>\n            <label for=\"password\" class=\"block text-sm font-medium text-gray-700 mb-1\">密码</label>\n            <input\n              id=\"password\"\n              v-model=\"form.password\"\n              type=\"password\"\n              required\n              class=\"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors\"\n              placeholder=\"请输入密码\"\n              minlength=\"6\"\n            >\n            <div v-if=\"errors.password\" class=\"text-red-500 text-xs mt-1\">{{ errors.password }}</div>\n            <p class=\"text-gray-500 text-xs mt-1\">密码至少包含6个字符</p>\n          </div>\n          \n          <!-- 确认密码 -->\n          <div>\n            <label for=\"confirmPassword\" class=\"block text-sm font-medium text-gray-700 mb-1\">确认密码</label>\n            <input\n              id=\"confirmPassword\"\n              v-model=\"form.confirmPassword\"\n              type=\"password\"\n              required\n              class=\"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors\"\n              placeholder=\"请再次输入密码\"\n            >\n            <div v-if=\"errors.confirmPassword\" class=\"text-red-500 text-xs mt-1\">{{ errors.confirmPassword }}</div>\n          </div>\n          \n          <!-- 注册按钮 -->\n          <button\n            type=\"submit\"\n            :disabled=\"isSubmitting\"\n            class=\"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-md transition-colors flex justify-center items-center\"\n          >\n            <span v-if=\"!isSubmitting\">注册</span>\n            <span v-else class=\"flex items-center\">\n              <i class=\"fa fa-spinner fa-spin mr-2\"></i>\n              注册中...\n            </span>\n          </button>\n          \n          <!-- 已有账户 -->\n          <div class=\"text-center text-sm text-gray-600\">\n            已有账户？ <a href=\"#\" @click.prevent=\"$emit('switchToLogin')\" class=\"text-indigo-600 hover:text-indigo-700 font-medium\">登录</a>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'UserRegister',\n  emits: ['switchToLogin', 'registerSuccess'],\n  data() {\n    return {\n      form: {\n        username: '',\n        email: '',\n        password: '',\n        confirmPassword: ''\n      },\n      errors: {},\n      isSubmitting: false\n    }\n  },\n  methods: {\n    // 表单验证\n    validateForm() {\n      this.errors = {}\n      let isValid = true\n      \n      // 验证用户名\n      if (!this.form.username.trim()) {\n        this.errors.username = '用户名不能为空'\n        isValid = false\n      } else if (this.form.username.length < 3) {\n        this.errors.username = '用户名至少需要3个字符'\n        isValid = false\n      }\n      \n      // 验证邮箱\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n      if (!this.form.email.trim()) {\n        this.errors.email = '邮箱不能为空'\n        isValid = false\n      } else if (!emailRegex.test(this.form.email)) {\n        this.errors.email = '请输入有效的邮箱地址'\n        isValid = false\n      }\n      \n      // 验证密码\n      if (!this.form.password) {\n        this.errors.password = '密码不能为空'\n        isValid = false\n      } else if (this.form.password.length < 6) {\n        this.errors.password = '密码至少需要6个字符'\n        isValid = false\n      }\n      \n      // 验证确认密码\n      if (!this.form.confirmPassword) {\n        this.errors.confirmPassword = '请确认密码'\n        isValid = false\n      } else if (this.form.password !== this.form.confirmPassword) {\n        this.errors.confirmPassword = '两次输入的密码不一致'\n        isValid = false\n      }\n      \n      return isValid\n    },\n    \n    // 处理注册\n    async handleRegister() {\n      if (!this.validateForm()) {\n        return\n      }\n      \n      this.isSubmitting = true\n      \n      try {\n        const response = await fetch('http://localhost:5000/api/auth/register', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            username: this.form.username,\n            email: this.form.email,\n            password: this.form.password\n          })\n        })\n        \n        const data = await response.json()\n        \n        if (!response.ok) {\n          // 处理API返回的错误\n          if (data.error) {\n            if (data.error.includes('Username')) {\n              this.errors.username = '用户名已存在'\n            } else if (data.error.includes('Email')) {\n              this.errors.email = '邮箱已存在'\n            } else {\n              alert('注册失败：' + data.error)\n            }\n          }\n          return\n        }\n        \n        // 注册成功\n        this.$emit('registerSuccess', {\n          id: data.id,\n          username: this.form.username,\n          email: this.form.email\n        })\n        \n        // 重置表单\n        this.form = {\n          username: '',\n          email: '',\n          password: '',\n          confirmPassword: ''\n        }\n        \n        alert('注册成功！请登录')\n        this.$emit('switchToLogin')\n        \n      } catch (error) {\n        console.error('注册错误:', error)\n        alert('注册失败，请稍后再试')\n      } finally {\n        this.isSubmitting = false\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n/* 可以添加一些特定的样式 */\ninput:focus {\n  box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.2);\n}\n\nbutton:disabled {\n  opacity: 0.7;\n  cursor: not-allowed;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}