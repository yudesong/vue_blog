{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport UserLogin from './UserLogin.vue';\nimport UserRegister from './UserRegister.vue';\nexport default {\n  name: 'BlogMain',\n  components: {\n    UserLogin,\n    UserRegister\n  },\n  props: {\n    // 视图状态\n    isAdminView: {\n      type: Boolean,\n      default: false\n    },\n    currentView: {\n      type: String,\n      default: 'home'\n    },\n    adminTab: {\n      type: String,\n      default: 'articles'\n    },\n    // 认证相关状态\n    isAuthView: {\n      type: Boolean,\n      default: false\n    },\n    currentAuthView: {\n      type: String,\n      default: 'login'\n    },\n    currentUser: {\n      type: Object,\n      default: null\n    },\n    // 数据\n    articles: {\n      type: Array,\n      default: () => []\n    },\n    categories: {\n      type: Array,\n      default: () => []\n    },\n    currentArticle: {\n      type: Object,\n      default: null\n    },\n    relatedArticles: {\n      type: Array,\n      default: () => []\n    },\n    filteredCategory: {\n      type: String,\n      default: null\n    }\n  },\n  data() {\n    return {\n      // 评论相关状态\n      commentContent: '',\n      isSubmittingComment: false,\n      isSubmittingReply: false,\n      replyBoxVisible: {\n        commentId: null,\n        replyTo: null,\n        content: ''\n      }\n    };\n  },\n  computed: {\n    // 特色文章\n    featuredArticles() {\n      return this.articles.slice(0, 3);\n    },\n    // 最新文章\n    latestArticles() {\n      return [...this.articles].sort((a, b) => new Date(b.publishedDate) - new Date(a.publishedDate)).slice(0, 4);\n    },\n    // 筛选后的文章\n    filteredArticles() {\n      if (!this.filteredCategory) {\n        return this.articles;\n      }\n      return this.articles.filter(article => article.category === this.filteredCategory);\n    },\n    // 总评论数\n    totalComments() {\n      let count = 0;\n      this.articles.forEach(article => {\n        count += article.commentsCount || 0;\n      });\n      return count;\n    },\n    // 总访问量\n    totalViews() {\n      let count = 0;\n      this.articles.forEach(article => {\n        count += article.views || 0;\n      });\n      return count;\n    }\n  },\n  methods: {\n    // 获取分类颜色\n    getCategoryColor(category) {\n      const colorMap = {\n        '前端开发': 'bg-blue-500',\n        '后端开发': 'bg-green-500',\n        '数据分析': 'bg-yellow-500',\n        '人工智能': 'bg-purple-500',\n        '设计': 'bg-pink-500',\n        '移动开发': 'bg-red-500'\n      };\n      return colorMap[category] || 'bg-gray-500';\n    },\n    // 提交评论\n    async submitComment() {\n      if (!this.currentUser || !this.commentContent.trim() || this.isSubmittingComment) {\n        return;\n      }\n      this.isSubmittingComment = true;\n      try {\n        const newComment = {\n          content: this.commentContent.trim(),\n          articleId: this.currentArticle.id,\n          author: this.currentUser.username,\n          authorAvatar: this.currentUser.avatar || 'https://picsum.photos/id/64/100/100',\n          timestamp: new Date().toISOString(),\n          likes: 0,\n          isLiked: false,\n          replies: []\n        };\n\n        // 尝试发送到服务器\n        try {\n          const response = await fetch('http://localhost:5000/api/comments', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${this.currentUser.token}`\n            },\n            body: JSON.stringify({\n              article_id: this.currentArticle.id,\n              content: newComment.content\n            })\n          });\n          if (response.ok) {\n            const savedComment = await response.json();\n            // 合并服务器返回的数据和本地数据\n            newComment.id = savedComment.id;\n          }\n        } catch (error) {\n          console.error('Error submitting comment to server:', error);\n          // 如果API调用失败，使用本地生成的ID\n          newComment.id = Date.now();\n        }\n\n        // 更新本地数据并通过事件通知父组件\n        this.$emit('commentSubmitted', newComment);\n        this.commentContent = '';\n\n        // 显示成功通知\n        this.showNotification('评论发表成功！', 'success');\n      } catch (error) {\n        console.error('Error submitting comment:', error);\n        this.showNotification('发表评论失败，请稍后重试', 'error');\n      } finally {\n        this.isSubmittingComment = false;\n      }\n    },\n    // 切换回复框\n    toggleReplyBox(comment, replyTo = null) {\n      if (this.replyBoxVisible.commentId === comment.id && !replyTo) {\n        // 如果已经是当前评论的回复框，则关闭\n        this.cancelReply();\n      } else {\n        // 打开回复框\n        this.replyBoxVisible = {\n          commentId: comment.id,\n          replyTo: replyTo,\n          content: ''\n        };\n      }\n    },\n    // 取消回复\n    cancelReply() {\n      this.replyBoxVisible = {\n        commentId: null,\n        replyTo: null,\n        content: ''\n      };\n    },\n    // 提交回复\n    async submitReply(comment) {\n      if (!this.currentUser || !this.replyBoxVisible.content.trim() || this.isSubmittingReply) {\n        return;\n      }\n      this.isSubmittingReply = true;\n      try {\n        const newReply = {\n          content: this.replyBoxVisible.content.trim(),\n          author: this.currentUser.username,\n          authorAvatar: this.currentUser.avatar || 'https://picsum.photos/id/64/100/100',\n          timestamp: new Date().toISOString(),\n          likes: 0,\n          isLiked: false\n        };\n\n        // 尝试发送到服务器\n        try {\n          const response = await fetch('http://localhost:5000/api/comments', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${this.currentUser.token}`\n            },\n            body: JSON.stringify({\n              article_id: this.currentArticle.id,\n              content: newReply.content,\n              parent_id: comment.id\n            })\n          });\n          if (response.ok) {\n            const savedReply = await response.json();\n            // 合并服务器返回的数据\n            newReply.id = savedReply.id;\n          }\n        } catch (error) {\n          console.error('Error submitting reply to server:', error);\n          // 如果API调用失败，使用本地生成的ID\n          newReply.id = Date.now();\n        }\n\n        // 更新本地数据并通过事件通知父组件\n        this.$emit('replySubmitted', {\n          comment,\n          reply: newReply\n        });\n\n        // 关闭回复框\n        this.cancelReply();\n\n        // 显示成功通知\n        this.showNotification('回复发表成功！', 'success');\n      } catch (error) {\n        console.error('Error submitting reply:', error);\n        this.showNotification('发表回复失败，请稍后重试', 'error');\n      } finally {\n        this.isSubmittingReply = false;\n      }\n    },\n    // 点赞/取消点赞\n    async toggleLike(item, parentComment = null) {\n      try {\n        // 切换本地点赞状态\n        item.isLiked = !item.isLiked;\n        item.likes += item.isLiked ? 1 : -1;\n\n        // 通知父组件更新\n        this.$emit('likeToggled', {\n          item,\n          parentComment\n        });\n\n        // 尝试发送到服务器\n        if (this.currentUser) {\n          try {\n            const response = await fetch(`http://localhost:5000/api/comments/${item.id}/like`, {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${this.currentUser.token}`\n              }\n            });\n            if (!response.ok) {\n              // 如果服务器操作失败，恢复本地状态\n              item.isLiked = !item.isLiked;\n              item.likes += item.isLiked ? 1 : -1;\n              throw new Error('Server operation failed');\n            }\n          } catch (error) {\n            console.error('Error toggling like:', error);\n          }\n        } else {\n          // 如果未登录，显示提示\n          this.showNotification('请登录后再进行点赞操作', 'info');\n          // 恢复本地状态\n          item.isLiked = !item.isLiked;\n          item.likes += item.isLiked ? 1 : -1;\n        }\n      } catch (error) {\n        console.error('Error toggling like:', error);\n      }\n    },\n    // 格式化日期\n    formatDate(dateString) {\n      const date = new Date(dateString);\n      return date.toLocaleDateString('zh-CN', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      });\n    },\n    // 格式化相对时间\n    formatRelativeTime(timestamp) {\n      const now = new Date();\n      const past = new Date(timestamp);\n      const diffMs = now - past;\n      const diffMins = Math.floor(diffMs / (1000 * 60));\n      const diffHours = Math.floor(diffMins / 60);\n      const diffDays = Math.floor(diffHours / 24);\n      if (diffMins < 1) {\n        return '刚刚';\n      } else if (diffMins < 60) {\n        return `${diffMins}分钟前`;\n      } else if (diffHours < 24) {\n        return `${diffHours}小时前`;\n      } else if (diffDays < 30) {\n        return `${diffDays}天前`;\n      } else {\n        return this.formatDate(timestamp);\n      }\n    },\n    // 显示通知\n    showNotification(message, type = 'success') {\n      const notification = document.createElement('div');\n      notification.className = 'fixed top-4 right-4 py-3 px-5 rounded-md shadow-lg transform transition-all duration-300 z-50';\n      if (type === 'success') {\n        notification.classList.add('bg-green-500', 'text-white');\n      } else if (type === 'error') {\n        notification.classList.add('bg-red-500', 'text-white');\n      } else if (type === 'info') {\n        notification.classList.add('bg-blue-500', 'text-white');\n      }\n      notification.textContent = message;\n      document.body.appendChild(notification);\n\n      // 3秒后移除通知\n      setTimeout(() => {\n        notification.classList.add('opacity-0', 'translate-y-4');\n        setTimeout(() => {\n          document.body.removeChild(notification);\n        }, 300);\n      }, 3000);\n    }\n  }\n};","map":{"version":3,"names":["UserLogin","UserRegister","name","components","props","isAdminView","type","Boolean","default","currentView","String","adminTab","isAuthView","currentAuthView","currentUser","Object","articles","Array","categories","currentArticle","relatedArticles","filteredCategory","data","commentContent","isSubmittingComment","isSubmittingReply","replyBoxVisible","commentId","replyTo","content","computed","featuredArticles","slice","latestArticles","sort","a","b","Date","publishedDate","filteredArticles","filter","article","category","totalComments","count","forEach","commentsCount","totalViews","views","methods","getCategoryColor","colorMap","submitComment","trim","newComment","articleId","id","author","username","authorAvatar","avatar","timestamp","toISOString","likes","isLiked","replies","response","fetch","method","headers","token","body","JSON","stringify","article_id","ok","savedComment","json","error","console","now","$emit","showNotification","toggleReplyBox","comment","cancelReply","submitReply","newReply","parent_id","savedReply","reply","toggleLike","item","parentComment","Error","formatDate","dateString","date","toLocaleDateString","year","month","day","formatRelativeTime","past","diffMs","diffMins","Math","floor","diffHours","diffDays","message","notification","document","createElement","className","classList","add","textContent","appendChild","setTimeout","removeChild"],"sources":["/Users/yudesong/Project/Vue/blog/src/components/BlogMain.vue"],"sourcesContent":["<template>\n  <!-- 主内容区 -->\n  <main class=\"container mx-auto px-4 pt-24 pb-16\">\n    <!-- 认证视图 -->\n    <div v-if=\"isAuthView\">\n      <UserLogin v-if=\"currentAuthView === 'login'\" @switchToRegister=\"$emit('switchToAuth', 'register')\" @loginSuccess=\"$emit('loginSuccess')\" />\n      <UserRegister v-if=\"currentAuthView === 'register'\" @switchToLogin=\"$emit('switchToAuth', 'login')\" @registerSuccess=\"$emit('registerSuccess')\" />\n    </div>\n    <!-- 前台视图 -->\n    <div v-else-if=\"!isAdminView\">\n      <!-- 首页视图 -->\n      <div v-if=\"currentView === 'home'\" class=\"space-y-12\">\n        <!-- 英雄区 -->\n        <section class=\"relative rounded-2xl overflow-hidden bg-gradient-to-r from-indigo-600 to-purple-700 text-white shadow-xl\">\n          <div class=\"absolute inset-0 opacity-20\">\n            <div class=\"absolute inset-0 bg-[url('https://picsum.photos/id/1073/1200/400')] bg-cover bg-center\"></div>\n          </div>\n          <div class=\"relative py-16 px-8 md:py-24 md:px-16 max-w-3xl\">\n            <h2 class=\"text-3xl md:text-5xl font-bold mb-4 leading-tight\">分享知识，连接思想</h2>\n            <p class=\"text-lg md:text-xl opacity-90 mb-8\">探索高质量的文章，参与有意义的讨论，发现新的观点和见解</p>\n            <div class=\"flex flex-wrap gap-4\">\n              <a href=\"#\" class=\"bg-white text-indigo-700 hover:bg-gray-100 px-6 py-3 rounded-md font-medium transition-colors\" @click.prevent=\"$emit('switchView', 'articles')\">浏览文章</a>\n              <a href=\"#\" class=\"bg-transparent border-2 border-white text-white hover:bg-white/10 px-6 py-3 rounded-md font-medium transition-colors\">了解更多</a>\n            </div>\n          </div>\n        </section>\n        \n        <!-- 特色文章 -->\n        <section>\n          <div class=\"flex justify-between items-center mb-8\">\n            <h2 class=\"text-2xl font-bold text-gray-800\">特色文章</h2>\n            <a href=\"#\" class=\"text-indigo-600 hover:text-indigo-700 font-medium flex items-center\" @click.prevent=\"$emit('switchView', 'articles')\">\n              查看全部\n              <i class=\"fa fa-arrow-right ml-2\"></i>\n            </a>\n          </div>\n          \n          <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n            <article v-for=\"article in featuredArticles\" :key=\"article.id\" class=\"bg-white rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-shadow duration-300 transform hover:-translate-y-1\">\n              <div class=\"relative h-48 overflow-hidden\">\n                <img :src=\"article.coverImage\" alt=\"Article cover\" class=\"w-full h-full object-cover transition-transform duration-500 hover:scale-110\">\n                <div class=\"absolute top-4 left-4\">\n                  <span :class=\"`px-3 py-1 rounded-full text-xs font-medium text-white ${getCategoryColor(article.category)}`\">\n                    {{ article.category }}\n                  </span>\n                </div>\n              </div>\n              <div class=\"p-6\">\n                <h3 class=\"text-xl font-bold mb-3 hover:text-indigo-600 transition-colors cursor-pointer\">{{ article.title }}</h3>\n                <p class=\"text-gray-600 mb-4 line-clamp-3\">{{ article.summary }}</p>\n                <div class=\"flex justify-between items-center\">\n                  <div class=\"flex items-center\">\n                    <img :src=\"article.authorAvatar\" alt=\"Author\" class=\"w-8 h-8 rounded-full mr-2\">\n                    <span class=\"text-sm text-gray-500\">{{ article.author }}</span>\n                  </div>\n                  <span class=\"text-sm text-gray-500\">{{ formatDate(article.publishedDate) }}</span>\n                </div>\n                <div class=\"mt-4 pt-4 border-t border-gray-100 flex justify-between items-center\">\n                  <button class=\"text-indigo-600 hover:text-indigo-700 font-medium\" @click.prevent=\"$emit('viewArticle', article.id)\">阅读全文</button>\n                  <div class=\"flex items-center space-x-4 text-gray-500\">\n                    <span class=\"flex items-center\"><i class=\"fa fa-comment-o mr-1\"></i> {{ article.commentsCount }}</span>\n                    <span class=\"flex items-center\"><i class=\"fa fa-eye mr-1\"></i> {{ article.views }}</span>\n                  </div>\n                </div>\n              </div>\n            </article>\n          </div>\n        </section>\n        \n        <!-- 分类导航 -->\n        <section class=\"bg-white rounded-xl shadow-md p-8\">\n          <h2 class=\"text-2xl font-bold mb-6\">文章分类</h2>\n          <div class=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4\">\n            <a v-for=\"category in categories\" :key=\"category.id\" href=\"#\" class=\"flex flex-col items-center p-6 rounded-lg border border-gray-100 hover:border-indigo-200 hover:bg-indigo-50 transition-colors group\" @click.prevent=\"$emit('filterArticlesByCategory', category.name)\">\n              <div class=\"w-12 h-12 rounded-full flex items-center justify-center mb-3 bg-indigo-100 text-indigo-600 group-hover:bg-indigo-600 group-hover:text-white transition-colors\">\n                <i :class=\"category.icon + ' text-xl'\"></i>\n              </div>\n              <h3 class=\"font-medium text-center\">{{ category.name }}</h3>\n              <span class=\"text-sm text-gray-500 mt-1\">{{ category.count }} 篇文章</span>\n            </a>\n          </div>\n        </section>\n        \n        <!-- 最新文章 -->\n        <section>\n          <h2 class=\"text-2xl font-bold mb-8\">最新文章</h2>\n          <div class=\"space-y-6\">\n            <div v-for=\"article in latestArticles\" :key=\"article.id\" class=\"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow p-6 flex flex-col md:flex-row gap-6\">\n              <div class=\"md:w-1/4 lg:w-1/5 relative rounded-lg overflow-hidden\">\n                <img :src=\"article.coverImage\" alt=\"Article cover\" class=\"w-full h-48 object-cover\">\n                <span :class=\"`absolute top-3 left-3 px-3 py-1 rounded-full text-xs font-medium text-white ${getCategoryColor(article.category)}`\">\n                  {{ article.category }}\n                </span>\n              </div>\n              <div class=\"md:w-3/4 lg:w-4/5 flex flex-col\">\n                <h3 class=\"text-xl font-bold mb-2 hover:text-indigo-600 transition-colors cursor-pointer\">{{ article.title }}</h3>\n                <p class=\"text-gray-600 mb-4 flex-grow line-clamp-2\">{{ article.summary }}</p>\n                <div class=\"flex flex-wrap justify-between items-center gap-4\">\n                  <div class=\"flex items-center\">\n                    <img :src=\"article.authorAvatar\" alt=\"Author\" class=\"w-8 h-8 rounded-full mr-2\">\n                    <span class=\"text-sm text-gray-500\">{{ article.author }} · {{ formatDate(article.publishedDate) }}</span>\n                  </div>\n                  <div class=\"flex items-center space-x-4 text-gray-500\">\n                    <span class=\"flex items-center\"><i class=\"fa fa-comment-o mr-1\"></i> {{ article.commentsCount }}</span>\n                    <span class=\"flex items-center\"><i class=\"fa fa-eye mr-1\"></i> {{ article.views }}</span>\n                    <button class=\"text-indigo-600 hover:text-indigo-700 font-medium\" @click.prevent=\"$emit('viewArticle', article.id)\">阅读全文</button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          \n          <div class=\"mt-8 text-center\">\n            <button class=\"bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 px-6 py-3 rounded-md font-medium transition-colors\">\n              加载更多\n              <i class=\"fa fa-refresh ml-2\"></i>\n            </button>\n          </div>\n        </section>\n      </div>\n      \n      <!-- 文章列表视图 -->\n      <div v-if=\"currentView === 'articles'\" class=\"space-y-8\">\n        <div class=\"bg-white rounded-xl shadow-md p-6\">\n          <h2 class=\"text-2xl font-bold mb-6\">所有文章</h2>\n          \n          <!-- 筛选和排序 -->\n          <div class=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4\">\n            <div class=\"flex flex-wrap gap-2\">\n              <button class=\"px-4 py-2 rounded-full text-sm bg-indigo-100 text-indigo-700 hover:bg-indigo-200 transition-colors\" @click=\"$emit('clearCategoryFilter')\">全部</button>\n              <button v-for=\"category in categories\" :key=\"category.id\" class=\"px-4 py-2 rounded-full text-sm\" :class=\"filteredCategory === category.name ? 'bg-indigo-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\" @click=\"$emit('filterArticlesByCategory', category.name)\">\n                {{ category.name }}\n              </button>\n            </div>\n            \n            <div class=\"relative\">\n              <select class=\"appearance-none bg-gray-100 border-0 pl-4 pr-10 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500\">\n                <option>最新发布</option>\n                <option>最多阅读</option>\n                <option>最多评论</option>\n              </select>\n              <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\n                <i class=\"fa fa-chevron-down text-xs\"></i>\n              </div>\n            </div>\n          </div>\n          \n          <!-- 文章网格 -->\n          <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            <article v-for=\"article in filteredArticles\" :key=\"article.id\" class=\"bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow border border-gray-100\">\n              <div class=\"relative h-48 overflow-hidden\">\n                <img :src=\"article.coverImage\" alt=\"Article cover\" class=\"w-full h-full object-cover transition-transform duration-500 hover:scale-110\">\n                <div class=\"absolute top-4 left-4\">\n                  <span :class=\"`px-3 py-1 rounded-full text-xs font-medium text-white ${getCategoryColor(article.category)}`\">\n                    {{ article.category }}\n                  </span>\n                </div>\n              </div>\n              <div class=\"p-5\">\n                <h3 class=\"text-lg font-bold mb-2 hover:text-indigo-600 transition-colors cursor-pointer\">{{ article.title }}</h3>\n                <p class=\"text-gray-600 text-sm mb-3 line-clamp-2\">{{ article.summary }}</p>\n                <div class=\"flex justify-between items-center text-sm text-gray-500\">\n                  <span>{{ formatDate(article.publishedDate) }}</span>\n                  <span class=\"flex items-center\"><i class=\"fa fa-comment-o mr-1\"></i> {{ article.commentsCount }}</span>\n                </div>\n                <button class=\"mt-3 w-full text-center text-indigo-600 hover:text-indigo-700 text-sm font-medium\" @click.prevent=\"$emit('viewArticle', article.id)\">阅读全文</button>\n              </div>\n            </article>\n          </div>\n          \n          <!-- 分页 -->\n          <div class=\"mt-8 flex justify-center\">\n            <nav class=\"inline-flex rounded-md shadow-sm\">\n              <button class=\"px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 rounded-l-md\">\n                <i class=\"fa fa-chevron-left\"></i>\n              </button>\n              <button class=\"px-4 py-2 border-t border-b border-gray-300 bg-indigo-50 text-sm font-medium text-indigo-600\">1</button>\n              <button class=\"px-4 py-2 border-t border-b border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50\">2</button>\n              <button class=\"px-4 py-2 border-t border-b border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50\">3</button>\n              <button class=\"px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 rounded-r-md\">\n                <i class=\"fa fa-chevron-right\"></i>\n              </button>\n            </nav>\n          </div>\n        </div>\n      </div>\n      \n      <!-- 分类视图 -->\n      <div v-if=\"currentView === 'categories'\" class=\"space-y-8\">\n        <div class=\"bg-white rounded-xl shadow-md p-6\">\n          <h2 class=\"text-2xl font-bold mb-6\">文章分类</h2>\n          \n          <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div v-for=\"category in categories\" :key=\"category.id\" class=\"flex items-start p-5 rounded-lg border border-gray-100 hover:border-indigo-200 hover:bg-indigo-50 transition-colors group cursor-pointer\" @click=\"$emit('filterArticlesByCategory', category.name)\">\n              <div class=\"w-12 h-12 rounded-full flex items-center justify-center mr-4 bg-indigo-100 text-indigo-600 group-hover:bg-indigo-600 group-hover:text-white transition-colors flex-shrink-0\">\n                <i :class=\"category.icon + ' text-xl'\"></i>\n              </div>\n              <div class=\"flex-grow\">\n                <h3 class=\"font-bold text-lg mb-1\">{{ category.name }}</h3>\n                <p class=\"text-gray-600 text-sm mb-2\">{{ category.description }}</p>\n                <div class=\"flex items-center text-sm text-gray-500\">\n                  <span>{{ category.count }} 篇文章</span>\n                  <span class=\"mx-2\">•</span>\n                  <span>最后更新: {{ category.lastUpdated }}</span>\n                </div>\n              </div>\n              <div class=\"flex-shrink-0 ml-2 text-indigo-600 opacity-0 group-hover:opacity-100 transition-opacity\">\n                <i class=\"fa fa-arrow-right\"></i>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <!-- 文章详情视图 -->\n      <div v-if=\"currentView === 'articleDetail'\" class=\"space-y-8\">\n        <article class=\"bg-white rounded-xl shadow-md overflow-hidden\">\n          <div class=\"relative h-64 md:h-80 lg:h-96\">\n            <img :src=\"currentArticle?.coverImage\" alt=\"Article cover\" class=\"w-full h-full object-cover\">\n            <div class=\"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent\"></div>\n            <div class=\"absolute bottom-0 left-0 right-0 p-6 md:p-8 text-white\">\n              <span :class=\"`px-3 py-1 rounded-full text-xs font-medium mb-4 inline-block ${getCategoryColor(currentArticle?.category)}`\">\n                {{ currentArticle?.category }}\n              </span>\n              <h1 class=\"text-2xl md:text-3xl lg:text-4xl font-bold mb-3\">{{ currentArticle?.title }}</h1>\n              <div class=\"flex flex-wrap items-center gap-4 text-sm text-white/90\">\n                <div class=\"flex items-center\">\n                  <img :src=\"currentArticle?.authorAvatar\" alt=\"Author\" class=\"w-6 h-6 rounded-full mr-2\">\n                  <span>{{ currentArticle?.author }}</span>\n                </div>\n                <span>{{ currentArticle?.publishedDate && formatDate(currentArticle.publishedDate) }}</span>\n                <span class=\"flex items-center\"><i class=\"fa fa-eye mr-1\"></i> {{ currentArticle?.views }}</span>\n              </div>\n            </div>\n          </div>\n          \n          <div class=\"p-6 md:p-8 lg:p-10\">\n            <div class=\"prose max-w-none\">\n              <div v-html=\"currentArticle?.content\" class=\"article-content space-y-6\"></div>\n            </div>\n            \n            <!-- 标签 -->\n            <div class=\"mt-8 pt-6 border-t border-gray-100\">\n              <div class=\"flex flex-wrap items-center gap-2\">\n                <span class=\"text-gray-500\">标签:</span>\n                <span v-for=\"tag in currentArticle?.tags\" :key=\"tag\" class=\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\">#{{ tag }}</span>\n              </div>\n            </div>\n            \n            <!-- 分享 -->\n            <div class=\"mt-6 flex items-center justify-between\">\n              <div class=\"flex items-center gap-3\">\n                <button class=\"flex items-center gap-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm transition-colors\">\n                  <i class=\"fa fa-heart-o text-red-500\"></i>\n                  <span>喜欢 ({{ currentArticle?.likes }})</span>\n                </button>\n                <button class=\"flex items-center gap-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm transition-colors\">\n                  <i class=\"fa fa-bookmark-o\"></i>\n                  <span>收藏</span>\n                </button>\n              </div>\n              \n              <div class=\"flex items-center gap-2\">\n                <span class=\"text-sm text-gray-500\">分享:</span>\n                <button class=\"w-8 h-8 rounded-full bg-[#1877F2] flex items-center justify-center text-white hover:bg-[#166FE5] transition-colors\">\n                  <i class=\"fa fa-facebook\"></i>\n                </button>\n                <button class=\"w-8 h-8 rounded-full bg-[#1DA1F2] flex items-center justify-center text-white hover:bg-[#1a91da] transition-colors\">\n                  <i class=\"fa fa-twitter\"></i>\n                </button>\n                <button class=\"w-8 h-8 rounded-full bg-[#25D366] flex items-center justify-center text-white hover:bg-[#22c15c] transition-colors\">\n                  <i class=\"fa fa-whatsapp\"></i>\n                </button>\n                <button class=\"w-8 h-8 rounded-full bg-[#0A66C2] flex items-center justify-center text-white hover:bg-[#095cb5] transition-colors\">\n                  <i class=\"fa fa-linkedin\"></i>\n                </button>\n              </div>\n            </div>\n          </div>\n        </article>\n        \n        <!-- 作者信息 -->\n        <div class=\"bg-white rounded-xl shadow-md p-6 flex flex-col md:flex-row items-center gap-6\">\n          <img :src=\"currentArticle?.authorAvatar\" alt=\"Author\" class=\"w-20 h-20 rounded-full object-cover border-4 border-white shadow-md\">\n          <div class=\"text-center md:text-left\">\n            <h3 class=\"text-xl font-bold mb-1\">{{ currentArticle?.author }}</h3>\n            <p class=\"text-gray-600 mb-3\">{{ currentArticle?.authorBio }}</p>\n            <button class=\"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md text-sm transition-colors\">\n              关注作者\n            </button>\n          </div>\n        </div>\n        \n        <!-- 评论区 -->\n        <div class=\"bg-white rounded-xl shadow-md p-6\">\n          <h3 class=\"text-xl font-bold mb-6\">评论 ({{ currentArticle?.commentsCount }})</h3>\n          \n          <!-- 评论输入 -->\n          <div class=\"mb-8\">\n            <div class=\"flex gap-4\">\n              <img :src=\"currentUser ? currentUser.avatar : 'https://picsum.photos/id/64/100/100'\" alt=\"Your avatar\" class=\"w-10 h-10 rounded-full\">\n              <div class=\"flex-grow\">\n                <textarea v-model=\"commentContent\" :placeholder=\"currentUser ? '分享你的想法...' : '请登录后发表评论...'\" class=\"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none\" rows=\"3\" :disabled=\"!currentUser || isSubmittingComment\"></textarea>\n                <div class=\"mt-3 flex justify-between items-center\">\n                  <div class=\"flex gap-2\">\n                    <button class=\"w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-700 transition-colors\" disabled>\n                      <i class=\"fa fa-image\"></i>\n                    </button>\n                    <button class=\"w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-700 transition-colors\" disabled>\n                      <i class=\"fa fa-smile-o\"></i>\n                    </button>\n                  </div>\n                  <div>\n                    <button v-if=\"!currentUser\" class=\"bg-gray-200 text-gray-600 px-4 py-2 rounded-md text-sm transition-colors mr-2\" @click=\"$emit('showAuthView', 'login')\">\n                      登录\n                    </button>\n                    <button :class=\"['px-4 py-2 rounded-md text-sm transition-colors', currentUser && !isSubmittingComment ? 'bg-indigo-600 hover:bg-indigo-700 text-white' : 'bg-gray-200 text-gray-600 cursor-not-allowed']\" @click=\"submitComment\" :disabled=\"!currentUser || isSubmittingComment || !commentContent.trim()\">\n                      {{ isSubmittingComment ? '发表中...' : '发表评论' }}\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          \n          <!-- 评论列表 -->\n          <div class=\"space-y-6\">\n            <div v-for=\"comment in currentArticle?.comments\" :key=\"comment.id\" class=\"border-b border-gray-100 pb-6 last:border-0 last:pb-0\">\n              <div class=\"flex gap-4\">\n                <img :src=\"comment.authorAvatar\" alt=\"Comment author\" class=\"w-10 h-10 rounded-full\">\n                <div class=\"flex-grow\">\n                  <div class=\"bg-gray-50 p-4 rounded-lg\">\n                    <div class=\"flex justify-between items-start mb-2\">\n                      <h4 class=\"font-medium\">{{ comment.author }}</h4>\n                      <span class=\"text-xs text-gray-500\">{{ formatRelativeTime(comment.timestamp) }}</span>\n                    </div>\n                    <p class=\"text-gray-700\">{{ comment.content }}</p>\n                  </div>\n                  <div class=\"mt-2 flex items-center gap-4 text-sm\">\n                    <button class=\"text-gray-500 hover:text-indigo-600 transition-colors flex items-center gap-1\" @click=\"toggleLike(comment)\">\n                      <i :class=\"comment.isLiked ? 'fa fa-heart text-red-500' : 'fa fa-heart-o'\"></i>\n                      <span>{{ comment.likes }}</span>\n                    </button>\n                    <button class=\"text-gray-500 hover:text-indigo-600 transition-colors\" @click=\"toggleReplyBox(comment)\">回复</button>\n                  </div>\n                  \n                  <!-- 嵌套回复 -->\n                  <div class=\"mt-4 ml-6 space-y-4\">\n                    <div v-for=\"reply in comment.replies\" :key=\"reply.id\" class=\"flex gap-3\">\n                      <img :src=\"reply.authorAvatar\" alt=\"Reply author\" class=\"w-8 h-8 rounded-full\">\n                      <div class=\"flex-grow\">\n                        <div class=\"bg-gray-50 p-3 rounded-lg text-sm\">\n                          <div class=\"flex justify-between items-start mb-1\">\n                            <h5 class=\"font-medium\">{{ reply.author }}</h5>\n                            <span class=\"text-xs text-gray-500\">{{ formatRelativeTime(reply.timestamp) }}</span>\n                          </div>\n                          <p class=\"text-gray-700\">{{ reply.content }}</p>\n                        </div>\n                        <div class=\"mt-1 flex items-center gap-4 text-xs\">\n                          <button class=\"text-gray-500 hover:text-indigo-600 transition-colors flex items-center gap-1\" @click=\"toggleLike(reply, comment)\">\n                            <i :class=\"reply.isLiked ? 'fa fa-heart text-red-500' : 'fa fa-heart-o'\"></i>\n                            <span>{{ reply.likes }}</span>\n                          </button>\n                          <button class=\"text-gray-500 hover:text-indigo-600 transition-colors\" @click=\"toggleReplyBox(comment, reply)\">回复</button>\n                        </div>\n                      </div>\n                    </div>\n                      \n                    <!-- 回复输入框 -->\n                    <div v-if=\"replyBoxVisible.commentId === comment.id\" class=\"flex gap-3\">\n                      <img :src=\"currentUser ? currentUser.avatar : 'https://picsum.photos/id/64/100/100'\" alt=\"Your avatar\" class=\"w-8 h-8 rounded-full\">\n                      <div class=\"flex-grow\">\n                        <textarea v-model=\"replyBoxVisible.content\" :placeholder=\"replyBoxVisible.replyTo ? `回复 @${replyBoxVisible.replyTo.author}...` : `回复 @${comment.author}...`\" class=\"w-full border border-gray-300 rounded-lg p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none\" rows=\"2\" :disabled=\"!currentUser || isSubmittingReply\"></textarea>\n                        <div class=\"mt-2 flex justify-end gap-2\">\n                          <button class=\"px-3 py-1 border border-gray-300 text-gray-700 rounded-md text-sm hover:bg-gray-50 transition-colors\" @click=\"cancelReply\">取消</button>\n                          <button :class=\"['px-3 py-1 rounded-md text-sm transition-colors', currentUser && !isSubmittingReply ? 'bg-indigo-600 text-white hover:bg-indigo-700' : 'bg-gray-200 text-gray-600 cursor-not-allowed']\" @click=\"submitReply(comment)\" :disabled=\"!currentUser || isSubmittingReply || !replyBoxVisible.content.trim()\">\n                            {{ isSubmittingReply ? '回复中...' : '回复' }}\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                      \n                    <!-- 显示回复按钮 -->\n                    <button v-else class=\"flex items-center text-sm text-indigo-600 hover:text-indigo-700\" @click=\"toggleReplyBox(comment)\">\n                      <i class=\"fa fa-reply mr-1\"></i>\n                      <span>回复 @{{ comment.author }}</span>\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          \n          <!-- 加载更多评论 -->\n          <div class=\"mt-6 text-center\">\n            <button class=\"bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 px-4 py-2 rounded-md text-sm font-medium transition-colors\">\n              查看更多评论\n            </button>\n          </div>\n        </div>\n        \n        <!-- 相关文章 -->\n        <div>\n          <h3 class=\"text-xl font-bold mb-6\">相关推荐</h3>\n          <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            <article v-for=\"article in relatedArticles\" :key=\"article.id\" class=\"bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow border border-gray-100\">\n              <div class=\"relative h-40 overflow-hidden\">\n                <img :src=\"article.coverImage\" alt=\"Article cover\" class=\"w-full h-full object-cover transition-transform duration-500 hover:scale-110\">\n              </div>\n              <div class=\"p-4\">\n                <h3 class=\"text-base font-bold mb-2 hover:text-indigo-600 transition-colors cursor-pointer line-clamp-2\">{{ article.title }}</h3>\n                <div class=\"flex justify-between items-center text-xs text-gray-500\">\n                  <span>{{ formatDate(article.publishedDate) }}</span>\n                  <span class=\"flex items-center\"><i class=\"fa fa-comment-o mr-1\"></i> {{ article.commentsCount }}</span>\n                </div>\n              </div>\n            </article>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- 管理后台视图 -->\n    <div v-if=\"isAdminView\" class=\"space-y-8\">\n      <div class=\"bg-white rounded-xl shadow-md p-6\">\n        <div class=\"flex justify-between items-center mb-6\">\n          <h2 class=\"text-2xl font-bold\">管理后台</h2>\n          <div class=\"flex items-center gap-3\">\n            <div class=\"relative\">\n              <img src=\"https://picsum.photos/id/64/100/100\" alt=\"Admin\" class=\"w-10 h-10 rounded-full border-2 border-indigo-200\">\n              <span class=\"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white\"></span>\n            </div>\n            <span class=\"font-medium\">管理员</span>\n          </div>\n        </div>\n        \n        <!-- 统计卡片 -->\n        <div class=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n          <div class=\"bg-indigo-50 rounded-lg p-5 border border-indigo-100\">\n            <div class=\"flex justify-between items-start\">\n              <div>\n                <p class=\"text-sm text-indigo-600 font-medium\">总文章数</p>\n                <h3 class=\"text-2xl font-bold mt-1\">{{ articles.length }}</h3>\n              </div>\n              <div class=\"w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600\">\n                <i class=\"fa fa-file-text-o\"></i>\n              </div>\n            </div>\n            <div class=\"mt-4 flex items-center text-sm\">\n              <span class=\"text-green-600 flex items-center\">\n                <i class=\"fa fa-arrow-up mr-1\"></i> 12%\n              </span>\n              <span class=\"text-gray-500 ml-2\">较上月</span>\n            </div>\n          </div>\n          \n          <div class=\"bg-green-50 rounded-lg p-5 border border-green-100\">\n            <div class=\"flex justify-between items-start\">\n              <div>\n                <p class=\"text-sm text-green-600 font-medium\">总评论数</p>\n                <h3 class=\"text-2xl font-bold mt-1\">{{ totalComments }}</h3>\n              </div>\n              <div class=\"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center text-green-600\">\n                <i class=\"fa fa-comments-o\"></i>\n              </div>\n            </div>\n            <div class=\"mt-4 flex items-center text-sm\">\n              <span class=\"text-green-600 flex items-center\">\n                <i class=\"fa fa-arrow-up mr-1\"></i> 8%\n              </span>\n              <span class=\"text-gray-500 ml-2\">较上月</span>\n            </div>\n          </div>\n          \n          <div class=\"bg-blue-50 rounded-lg p-5 border border-blue-100\">\n            <div class=\"flex justify-between items-start\">\n              <div>\n                <p class=\"text-sm text-blue-600 font-medium\">总访问量</p>\n                <h3 class=\"text-2xl font-bold mt-1\">{{ totalViews }}</h3>\n              </div>\n              <div class=\"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600\">\n                <i class=\"fa fa-eye\"></i>\n              </div>\n            </div>\n            <div class=\"mt-4 flex items-center text-sm\">\n              <span class=\"text-green-600 flex items-center\">\n                <i class=\"fa fa-arrow-up mr-1\"></i> 15%\n              </span>\n              <span class=\"text-gray-500 ml-2\">较上月</span>\n            </div>\n          </div>\n          \n          <div class=\"bg-purple-50 rounded-lg p-5 border border-purple-100\">\n            <div class=\"flex justify-between items-start\">\n              <div>\n                <p class=\"text-sm text-purple-600 font-medium\">分类数</p>\n                <h3 class=\"text-2xl font-bold mt-1\">{{ categories.length }}</h3>\n              </div>\n              <div class=\"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center text-purple-600\">\n                <i class=\"fa fa-tags\"></i>\n              </div>\n            </div>\n            <div class=\"mt-4 flex items-center text-sm\">\n              <span class=\"text-gray-500\">无变化</span>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <!-- 管理选项卡 -->\n      <div class=\"bg-white rounded-xl shadow-md overflow-hidden\">\n        <div class=\"border-b border-gray-200\">\n          <div class=\"flex\">\n            <button class=\"px-6 py-4 font-medium border-b-2 border-indigo-600 text-indigo-600\" :class=\"{ 'border-indigo-600 text-indigo-600': adminTab === 'articles' }\" @click=\"$emit('updateAdminTab', 'articles')\">\n              文章管理\n            </button>\n            <button class=\"px-6 py-4 font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700\" :class=\"{ 'border-indigo-600 text-indigo-600': adminTab === 'categories' }\" @click=\"$emit('updateAdminTab', 'categories')\">\n              分类管理\n            </button>\n            <button class=\"px-6 py-4 font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700\" :class=\"{ 'border-indigo-600 text-indigo-600': adminTab === 'comments' }\" @click=\"$emit('updateAdminTab', 'comments')\">\n              评论管理\n            </button>\n          </div>\n        </div>\n        \n        <!-- 文章管理 -->\n        <div v-if=\"adminTab === 'articles'\" class=\"p-6\">\n          <div class=\"flex justify-between items-center mb-6\">\n            <h3 class=\"text-lg font-bold\">文章列表</h3>\n            <button class=\"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md transition-colors flex items-center\" @click=\"$emit('showArticleEditor', { isEditing: false })\">\n              <i class=\"fa fa-plus mr-2\"></i>\n              新增文章\n            </button>\n          </div>\n          \n          <!-- 搜索和筛选 -->\n          <div class=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\n            <div class=\"relative w-full md:w-64\">\n              <input type=\"text\" placeholder=\"搜索文章...\" class=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500\">\n              <i class=\"fa fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\"></i>\n            </div>\n            \n            <div class=\"flex flex-wrap gap-2\">\n              <select class=\"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500\">\n                <option>所有分类</option>\n                <option v-for=\"category in categories\" :key=\"category.id\">{{ category.name }}</option>\n              </select>\n              <select class=\"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500\">\n                <option>所有状态</option>\n                <option>已发布</option>\n                <option>草稿</option>\n              </select>\n            </div>\n          </div>\n          \n          <!-- 文章表格 -->\n          <div class=\"overflow-x-auto\">\n            <table class=\"min-w-full divide-y divide-gray-200\">\n              <thead>\n                <tr>\n                  <th class=\"px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/2\">标题</th>\n                  <th class=\"px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">分类</th>\n                  <th class=\"px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">发布日期</th>\n                  <th class=\"px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">状态</th>\n                  <th class=\"px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">操作</th>\n                </tr>\n              </thead>\n              <tbody class=\"bg-white divide-y divide-gray-200\">\n                <tr v-for=\"article in articles\" :key=\"article.id\" class=\"hover:bg-gray-50 transition-colors\">\n                  <td class=\"px-4 py-4 whitespace-nowrap\">\n                    <div class=\"flex items-center\">\n                      <div class=\"h-10 w-10 flex-shrink-0 mr-3\">\n                        <img :src=\"article.coverImage\" alt=\"Article\" class=\"h-10 w-10 rounded object-cover\">\n                      </div>\n                      <div>\n                        <div class=\"text-sm font-medium text-gray-900\">{{ article.title }}</div>\n                        <div class=\"text-xs text-gray-500\">\n                          <span class=\"flex items-center\"><i class=\"fa fa-eye mr-1\"></i> {{ article.views }}</span>\n                          <span class=\"mx-2\">•</span>\n                          <span class=\"flex items-center\"><i class=\"fa fa-comment-o mr-1\"></i> {{ article.commentsCount }}</span>\n                        </div>\n                      </div>\n                    </div>\n                  </td>\n                  <td class=\"px-4 py-4 whitespace-nowrap\">\n                    <span class=\"text-sm text-gray-900\">{{ article.category }}</span>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  </main>\n</template>\n\n<script>\nimport UserLogin from './UserLogin.vue'\nimport UserRegister from './UserRegister.vue'\n\nexport default {\n  name: 'BlogMain',\n  components: {\n    UserLogin,\n    UserRegister\n  },\n  props: {\n    // 视图状态\n    isAdminView: {\n      type: Boolean,\n      default: false\n    },\n    currentView: {\n      type: String,\n      default: 'home'\n    },\n    adminTab: {\n      type: String,\n      default: 'articles'\n    },\n    // 认证相关状态\n    isAuthView: {\n      type: Boolean,\n      default: false\n    },\n    currentAuthView: {\n      type: String,\n      default: 'login'\n    },\n    currentUser: {\n      type: Object,\n      default: null\n    },\n    // 数据\n    articles: {\n      type: Array,\n      default: () => []\n    },\n    categories: {\n      type: Array,\n      default: () => []\n    },\n    currentArticle: {\n      type: Object,\n      default: null\n    },\n    relatedArticles: {\n      type: Array,\n      default: () => []\n    },\n    filteredCategory: {\n      type: String,\n      default: null\n    }\n  },\n  data() {\n    return {\n      // 评论相关状态\n      commentContent: '',\n      isSubmittingComment: false,\n      isSubmittingReply: false,\n      replyBoxVisible: { commentId: null, replyTo: null, content: '' }\n    }\n  },\n  computed: {\n    // 特色文章\n    featuredArticles() {\n      return this.articles.slice(0, 3);\n    },\n    \n    // 最新文章\n    latestArticles() {\n      return [...this.articles].sort((a, b) => new Date(b.publishedDate) - new Date(a.publishedDate)).slice(0, 4);\n    },\n    \n    // 筛选后的文章\n    filteredArticles() {\n      if (!this.filteredCategory) {\n        return this.articles;\n      }\n      return this.articles.filter(article => article.category === this.filteredCategory);\n    },\n    \n    // 总评论数\n    totalComments() {\n      let count = 0;\n      this.articles.forEach(article => {\n        count += article.commentsCount || 0;\n      });\n      return count;\n    },\n    \n    // 总访问量\n    totalViews() {\n      let count = 0;\n      this.articles.forEach(article => {\n        count += article.views || 0;\n      });\n      return count;\n    }\n  },\n  methods: {\n    // 获取分类颜色\n    getCategoryColor(category) {\n      const colorMap = {\n        '前端开发': 'bg-blue-500',\n        '后端开发': 'bg-green-500',\n        '数据分析': 'bg-yellow-500',\n        '人工智能': 'bg-purple-500',\n        '设计': 'bg-pink-500',\n        '移动开发': 'bg-red-500'\n      };\n      return colorMap[category] || 'bg-gray-500';\n    },\n    \n    // 提交评论\n    async submitComment() {\n      if (!this.currentUser || !this.commentContent.trim() || this.isSubmittingComment) {\n        return;\n      }\n      \n      this.isSubmittingComment = true;\n      try {\n        const newComment = {\n          content: this.commentContent.trim(),\n          articleId: this.currentArticle.id,\n          author: this.currentUser.username,\n          authorAvatar: this.currentUser.avatar || 'https://picsum.photos/id/64/100/100',\n          timestamp: new Date().toISOString(),\n          likes: 0,\n          isLiked: false,\n          replies: []\n        };\n        \n        // 尝试发送到服务器\n        try {\n          const response = await fetch('http://localhost:5000/api/comments', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${this.currentUser.token}`\n            },\n            body: JSON.stringify({\n              article_id: this.currentArticle.id,\n              content: newComment.content\n            })\n          });\n          \n          if (response.ok) {\n            const savedComment = await response.json();\n            // 合并服务器返回的数据和本地数据\n            newComment.id = savedComment.id;\n          }\n        } catch (error) {\n          console.error('Error submitting comment to server:', error);\n          // 如果API调用失败，使用本地生成的ID\n          newComment.id = Date.now();\n        }\n        \n        // 更新本地数据并通过事件通知父组件\n        this.$emit('commentSubmitted', newComment);\n        this.commentContent = '';\n        \n        // 显示成功通知\n        this.showNotification('评论发表成功！', 'success');\n      } catch (error) {\n        console.error('Error submitting comment:', error);\n        this.showNotification('发表评论失败，请稍后重试', 'error');\n      } finally {\n        this.isSubmittingComment = false;\n      }\n    },\n    \n    // 切换回复框\n    toggleReplyBox(comment, replyTo = null) {\n      if (this.replyBoxVisible.commentId === comment.id && !replyTo) {\n        // 如果已经是当前评论的回复框，则关闭\n        this.cancelReply();\n      } else {\n        // 打开回复框\n        this.replyBoxVisible = {\n          commentId: comment.id,\n          replyTo: replyTo,\n          content: ''\n        };\n      }\n    },\n    \n    // 取消回复\n    cancelReply() {\n      this.replyBoxVisible = { commentId: null, replyTo: null, content: '' };\n    },\n    \n    // 提交回复\n    async submitReply(comment) {\n      if (!this.currentUser || !this.replyBoxVisible.content.trim() || this.isSubmittingReply) {\n        return;\n      }\n      \n      this.isSubmittingReply = true;\n      try {\n        const newReply = {\n          content: this.replyBoxVisible.content.trim(),\n          author: this.currentUser.username,\n          authorAvatar: this.currentUser.avatar || 'https://picsum.photos/id/64/100/100',\n          timestamp: new Date().toISOString(),\n          likes: 0,\n          isLiked: false\n        };\n        \n        // 尝试发送到服务器\n        try {\n          const response = await fetch('http://localhost:5000/api/comments', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${this.currentUser.token}`\n            },\n            body: JSON.stringify({\n              article_id: this.currentArticle.id,\n              content: newReply.content,\n              parent_id: comment.id\n            })\n          });\n          \n          if (response.ok) {\n            const savedReply = await response.json();\n            // 合并服务器返回的数据\n            newReply.id = savedReply.id;\n          }\n        } catch (error) {\n          console.error('Error submitting reply to server:', error);\n          // 如果API调用失败，使用本地生成的ID\n          newReply.id = Date.now();\n        }\n        \n        // 更新本地数据并通过事件通知父组件\n        this.$emit('replySubmitted', { comment, reply: newReply });\n        \n        // 关闭回复框\n        this.cancelReply();\n        \n        // 显示成功通知\n        this.showNotification('回复发表成功！', 'success');\n      } catch (error) {\n        console.error('Error submitting reply:', error);\n        this.showNotification('发表回复失败，请稍后重试', 'error');\n      } finally {\n        this.isSubmittingReply = false;\n      }\n    },\n    \n    // 点赞/取消点赞\n    async toggleLike(item, parentComment = null) {\n      try {\n        // 切换本地点赞状态\n        item.isLiked = !item.isLiked;\n        item.likes += item.isLiked ? 1 : -1;\n        \n        // 通知父组件更新\n        this.$emit('likeToggled', { item, parentComment });\n        \n        // 尝试发送到服务器\n        if (this.currentUser) {\n          try {\n            const response = await fetch(`http://localhost:5000/api/comments/${item.id}/like`, {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${this.currentUser.token}`\n              }\n            });\n            \n            if (!response.ok) {\n              // 如果服务器操作失败，恢复本地状态\n              item.isLiked = !item.isLiked;\n              item.likes += item.isLiked ? 1 : -1;\n              throw new Error('Server operation failed');\n            }\n          } catch (error) {\n            console.error('Error toggling like:', error);\n          }\n        } else {\n          // 如果未登录，显示提示\n          this.showNotification('请登录后再进行点赞操作', 'info');\n          // 恢复本地状态\n          item.isLiked = !item.isLiked;\n          item.likes += item.isLiked ? 1 : -1;\n        }\n      } catch (error) {\n        console.error('Error toggling like:', error);\n      }\n    },\n    \n    // 格式化日期\n    formatDate(dateString) {\n      const date = new Date(dateString);\n      return date.toLocaleDateString('zh-CN', { year: 'numeric', month: 'long', day: 'numeric' });\n    },\n    \n    // 格式化相对时间\n    formatRelativeTime(timestamp) {\n      const now = new Date();\n      const past = new Date(timestamp);\n      const diffMs = now - past;\n      const diffMins = Math.floor(diffMs / (1000 * 60));\n      const diffHours = Math.floor(diffMins / 60);\n      const diffDays = Math.floor(diffHours / 24);\n      \n      if (diffMins < 1) {\n        return '刚刚';\n      } else if (diffMins < 60) {\n        return `${diffMins}分钟前`;\n      } else if (diffHours < 24) {\n        return `${diffHours}小时前`;\n      } else if (diffDays < 30) {\n        return `${diffDays}天前`;\n      } else {\n        return this.formatDate(timestamp);\n      }\n    },\n    \n    // 显示通知\n    showNotification(message, type = 'success') {\n      const notification = document.createElement('div');\n      notification.className = 'fixed top-4 right-4 py-3 px-5 rounded-md shadow-lg transform transition-all duration-300 z-50';\n      \n      if (type === 'success') {\n        notification.classList.add('bg-green-500', 'text-white');\n      } else if (type === 'error') {\n        notification.classList.add('bg-red-500', 'text-white');\n      } else if (type === 'info') {\n        notification.classList.add('bg-blue-500', 'text-white');\n      }\n      \n      notification.textContent = message;\n      document.body.appendChild(notification);\n      \n      // 3秒后移除通知\n      setTimeout(() => {\n        notification.classList.add('opacity-0', 'translate-y-4');\n        setTimeout(() => {\n          document.body.removeChild(notification);\n        }, 300);\n      }, 3000);\n    }\n  }\n}\n</script>\n\n<style scoped>\n/* 文章内容样式 */\n.article-content h2 {\n  font-size: 1.5rem;\n  font-weight: bold;\n  margin-top: 1.5rem;\n  margin-bottom: 1rem;\n  color: #1a202c;\n}\n\n.article-content h3 {\n  font-size: 1.25rem;\n  font-weight: bold;\n  margin-top: 1.25rem;\n  margin-bottom: 0.75rem;\n  color: #1a202c;\n}\n\n.article-content p {\n  margin-bottom: 1rem;\n  line-height: 1.6;\n}\n\n.article-content ul {\n  margin-bottom: 1rem;\n  padding-left: 1.5rem;\n  list-style-type: disc;\n}\n\n.article-content li {\n  margin-bottom: 0.5rem;\n}\n\n.article-content pre {\n  background-color: #f7fafc;\n  padding: 1rem;\n  border-radius: 0.375rem;\n  overflow-x: auto;\n  margin-bottom: 1rem;\n}\n\n.article-content code {\n  font-family: 'Fira Code', monospace;\n  font-size: 0.875rem;\n}\n\n/* 评论区域样式 */\n.article-comments {\n  margin-top: 2rem;\n}\n\n.comment-item {\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n  border-radius: 8px;\n  padding: 1rem;\n  margin-bottom: 1rem;\n  background-color: #ffffff;\n  border: 1px solid #f1f1f1;\n}\n\n.comment-item:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n}\n\n.comment-author-avatar {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  object-fit: cover;\n}\n\n.comment-content {\n  background-color: #f9fafb;\n  border-radius: 8px;\n  padding: 0.75rem 1rem;\n  font-size: 0.95rem;\n  line-height: 1.6;\n  color: #374151;\n}\n\n.comment-actions {\n  margin-top: 0.5rem;\n}\n\n.comment-actions button {\n  transition: all 0.2s ease;\n  padding: 0.25rem 0.5rem;\n  border-radius: 4px;\n  border: none;\n  background: none;\n  cursor: pointer;\n}\n\n.comment-actions button:hover {\n  background-color: #f3f4f6;\n}\n\n.comment-like-btn i {\n  transition: color 0.2s ease;\n}\n\n.comment-like-btn:hover i {\n  color: #f87171;\n  transform: scale(1.1);\n}\n\n.comment-like-btn.active i {\n  color: #f87171;\n}\n\n.comment-reply-btn:hover {\n  text-decoration: underline;\n  color: #4f46e5;\n}\n\n.reply-item {\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n  margin-left: 1.5rem;\n  border-radius: 8px;\n  padding: 0.75rem;\n  background-color: #f9fafb;\n  border: 1px solid #f1f1f1;\n}\n\n.reply-item:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n}\n\n.reply-author-avatar {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  object-fit: cover;\n}\n\n.reply-content {\n  font-size: 0.875rem;\n  line-height: 1.5;\n  color: #374151;\n}\n\n.comment-form textarea,\n.reply-form textarea {\n  transition: border-color 0.2s ease, box-shadow 0.2s ease;\n  font-family: inherit;\n  font-size: 0.95rem;\n  resize: vertical;\n  min-height: 80px;\n}\n\n.comment-form textarea:focus,\n.reply-form textarea:focus {\n  border-color: #4f46e5;\n  box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);\n}\n\n.comment-form textarea:disabled,\n.reply-form textarea:disabled {\n  background-color: #f9fafb;\n  cursor: not-allowed;\n  opacity: 0.7;\n}\n\n.btn-primary {\n  transition: all 0.2s ease;\n}\n\n.btn-primary:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(79, 70, 229, 0.2);\n}\n\n.btn-primary:active {\n  transform: translateY(0);\n}\n\n.btn-secondary {\n  transition: all 0.2s ease;\n}\n\n.btn-secondary:hover {\n  background-color: #f3f4f6;\n}\n\n.not-logged-in-notice {\n  text-align: center;\n  padding: 1.5rem;\n  background-color: #fef3c7;\n  border: 1px solid #fcd34d;\n  border-radius: 8px;\n  color: #92400e;\n  font-size: 0.95rem;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}