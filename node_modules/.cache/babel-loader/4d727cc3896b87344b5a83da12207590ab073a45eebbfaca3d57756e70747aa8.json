{"ast":null,"code":"export default {\n  data() {\n    return {\n      // 状态变量\n      isScrolled: false,\n      isArticleModalOpen: false,\n      isCreateModalOpen: false,\n      loading: false,\n      searchQuery: '',\n      // 数据变量\n      articles: [],\n      popularArticles: [],\n      currentArticle: null,\n      comments: [],\n      // 表单数据\n      newArticle: {\n        title: '',\n        content: '',\n        author: ''\n      },\n      newComment: {\n        author: '',\n        content: ''\n      }\n    };\n  },\n  created() {\n    // 页面加载时获取文章列表\n    this.fetchArticles();\n\n    // 监听滚动事件\n    window.addEventListener('scroll', this.handleScroll);\n  },\n  beforeDestroy() {\n    // 移除滚动监听\n    window.removeEventListener('scroll', this.handleScroll);\n  },\n  methods: {\n    // 处理滚动事件\n    handleScroll() {\n      this.isScrolled = window.scrollY > 10;\n    },\n    // 格式化日期\n    formatDate(dateString) {\n      const date = new Date(dateString);\n      return date.toLocaleDateString('zh-CN', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      });\n    },\n    // API调用 - 获取文章列表\n    async fetchArticles(search = '') {\n      this.loading = true;\n      try {\n        let url = 'http://localhost:5000/api/articles';\n        if (search) {\n          url += `?search=${encodeURIComponent(search)}`;\n        }\n        const response = await fetch(url);\n        if (!response.ok) {\n          throw new Error('Failed to fetch articles');\n        }\n        this.articles = await response.json();\n        // 简单处理热门文章（取前3篇）\n        this.popularArticles = [...this.articles].slice(0, 3);\n\n        // 为每篇文章添加评论计数\n        for (const article of this.articles) {\n          const commentsResponse = await fetch(`http://localhost:5000/api/articles/${article.id}/comments`);\n          if (commentsResponse.ok) {\n            const comments = await commentsResponse.json();\n            article.commentsCount = comments.length;\n          } else {\n            article.commentsCount = 0;\n          }\n        }\n      } catch (error) {\n        console.error('Error fetching articles:', error);\n        alert('获取文章失败，请稍后重试');\n      } finally {\n        this.loading = false;\n      }\n    },\n    // 搜索文章\n    searchArticles() {\n      this.fetchArticles(this.searchQuery);\n    },\n    // 清除搜索\n    clearSearch() {\n      this.searchQuery = '';\n      this.fetchArticles();\n    },\n    // 查看文章详情\n    async viewArticle(articleId) {\n      try {\n        const response = await fetch(`http://localhost:5000/api/articles/${articleId}`);\n        if (!response.ok) {\n          throw new Error('Failed to fetch article');\n        }\n        this.currentArticle = await response.json();\n        this.isArticleModalOpen = true;\n\n        // 获取该文章的评论\n        await this.fetchComments(articleId);\n      } catch (error) {\n        console.error('Error fetching article:', error);\n        alert('获取文章详情失败，请稍后重试');\n      }\n    },\n    // 关闭文章详情模态框\n    closeArticleModal() {\n      this.isArticleModalOpen = false;\n      this.currentArticle = null;\n      this.comments = [];\n      this.newComment = {\n        author: '',\n        content: ''\n      };\n    },\n    // 获取评论\n    async fetchComments(articleId) {\n      try {\n        const response = await fetch(`http://localhost:5000/api/articles/${articleId}/comments`);\n        if (!response.ok) {\n          throw new Error('Failed to fetch comments');\n        }\n        this.comments = await response.json();\n      } catch (error) {\n        console.error('Error fetching comments:', error);\n        alert('获取评论失败，请稍后重试');\n      }\n    },\n    // 添加评论\n    async addComment() {\n      if (!this.currentArticle || !this.newComment.author || !this.newComment.content) {\n        return;\n      }\n      try {\n        const response = await fetch(`http://localhost:5000/api/articles/${this.currentArticle.id}/comments`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(this.newComment)\n        });\n        if (!response.ok) {\n          throw new Error('Failed to add comment');\n        }\n\n        // 重新获取评论列表\n        await this.fetchComments(this.currentArticle.id);\n\n        // 清空评论输入框\n        this.newComment = {\n          author: '',\n          content: ''\n        };\n\n        // 显示成功提示\n        alert('评论添加成功！');\n      } catch (error) {\n        console.error('Error adding comment:', error);\n        alert('添加评论失败，请稍后重试');\n      }\n    },\n    // 创建文章\n    async createArticle() {\n      if (!this.newArticle.title || !this.newArticle.content || !this.newArticle.author) {\n        return;\n      }\n      try {\n        const response = await fetch('http://localhost:5000/api/articles', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(this.newArticle)\n        });\n        if (!response.ok) {\n          throw new Error('Failed to create article');\n        }\n\n        // 关闭模态框\n        this.isCreateModalOpen = false;\n\n        // 重新获取文章列表\n        this.fetchArticles();\n\n        // 清空表单\n        this.newArticle = {\n          title: '',\n          content: '',\n          author: ''\n        };\n\n        // 显示成功提示\n        alert('文章发布成功！');\n      } catch (error) {\n        console.error('Error creating article:', error);\n        alert('发布文章失败，请稍后重试');\n      }\n    }\n  }\n};","map":{"version":3,"names":["data","isScrolled","isArticleModalOpen","isCreateModalOpen","loading","searchQuery","articles","popularArticles","currentArticle","comments","newArticle","title","content","author","newComment","created","fetchArticles","window","addEventListener","handleScroll","beforeDestroy","removeEventListener","methods","scrollY","formatDate","dateString","date","Date","toLocaleDateString","year","month","day","search","url","encodeURIComponent","response","fetch","ok","Error","json","slice","article","commentsResponse","id","commentsCount","length","error","console","alert","searchArticles","clearSearch","viewArticle","articleId","fetchComments","closeArticleModal","addComment","method","headers","body","JSON","stringify","createArticle"],"sources":["/Users/yudesong/Project/Vue/blog/src/App.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-gray-50 flex flex-col\">\n    <!-- 导航栏 -->\n    <header class=\"bg-white shadow-sm sticky top-0 z-10 transition-all duration-300\" :class=\"{ 'shadow-md': isScrolled }\">\n      <div class=\"container mx-auto px-4 py-4 flex justify-between items-center\">\n        <div class=\"flex items-center space-x-2\">\n          <i class=\"fa fa-book text-indigo-600 text-2xl\"></i>\n          <h1 class=\"text-xl font-bold text-gray-800\">MyBlog</h1>\n        </div>\n        \n        <!-- 搜索框 -->\n        <div class=\"hidden md:flex relative flex-1 max-w-md mx-8\">\n          <input \n            v-model=\"searchQuery\"\n            @keyup.enter=\"searchArticles\"\n            type=\"text\" \n            placeholder=\"搜索文章...\" \n            class=\"w-full py-2 pl-10 pr-4 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500\"\n          >\n          <i class=\"fa fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\"></i>\n        </div>\n        \n        <nav class=\"flex items-center space-x-6\">\n          <button \n            @click=\"isCreateModalOpen = true\"\n            class=\"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md transition-colors hidden md:block\"\n          >\n            <i class=\"fa fa-pencil mr-2\"></i>发布文章\n          </button>\n          <button class=\"md:hidden text-gray-700 hover:text-indigo-600 transition-colors\">\n            <i class=\"fa fa-search text-xl\"></i>\n          </button>\n          <button class=\"md:hidden text-gray-700 hover:text-indigo-600 transition-colors\">\n            <i class=\"fa fa-user text-xl\"></i>\n          </button>\n          <div class=\"hidden md:flex items-center space-x-2\">\n            <img src=\"https://picsum.photos/id/64/40/40\" alt=\"用户头像\" class=\"w-8 h-8 rounded-full object-cover\">\n            <span class=\"text-gray-700\">用户名</span>\n          </div>\n        </nav>\n      </div>\n      \n      <!-- 移动端搜索框 -->\n      <div class=\"md:hidden px-4 pb-4\">\n        <input \n          v-model=\"searchQuery\"\n          @keyup.enter=\"searchArticles\"\n          type=\"text\" \n          placeholder=\"搜索文章...\" \n          class=\"w-full py-2 pl-10 pr-4 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 relative\"\n        >\n        <i class=\"fa fa-search absolute left-7 top-[6.8rem] transform -translate-y-1/2 text-gray-400 md:hidden\"></i>\n      </div>\n    </header>\n\n    <!-- 主内容区 -->\n    <main class=\"flex-grow container mx-auto px-4 py-8\">\n      <div class=\"flex flex-col md:flex-row gap-8\">\n        <!-- 文章列表 -->\n        <div class=\"md:w-2/3\">\n          <h2 class=\"text-2xl font-bold text-gray-800 mb-6\">最新文章</h2>\n          \n          <!-- 文章列表 -->\n          <div class=\"space-y-6\">\n            <div \n              v-for=\"article in articles\" \n              :key=\"article.id\"\n              class=\"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300 transform hover:-translate-y-1\"\n            >\n              <div class=\"p-6\">\n                <h3 class=\"text-xl font-bold text-gray-800 mb-2 hover:text-indigo-600 transition-colors cursor-pointer\"\n                    @click=\"viewArticle(article.id)\">\n                  {{ article.title }}\n                </h3>\n                <div class=\"flex items-center text-gray-500 text-sm mb-4\">\n                  <span><i class=\"fa fa-user mr-1\"></i> {{ article.author }}</span>\n                  <span class=\"mx-2\">•</span>\n                  <span><i class=\"fa fa-calendar mr-1\"></i> {{ formatDate(article.created_at) }}</span>\n                  <span class=\"mx-2\">•</span>\n                  <span><i class=\"fa fa-comment-o mr-1\"></i> {{ article.commentsCount || 0 }} 评论</span>\n                </div>\n                <p class=\"text-gray-600 mb-4 line-clamp-3\" @click=\"viewArticle(article.id)\">\n                  {{ article.content.substring(0, 150) }}...\n                </p>\n                <button \n                  @click=\"viewArticle(article.id)\"\n                  class=\"text-indigo-600 hover:text-indigo-800 font-medium flex items-center transition-colors\"\n                >\n                  阅读全文 <i class=\"fa fa-arrow-right ml-1\"></i>\n                </button>\n              </div>\n            </div>\n          </div>\n          \n          <!-- 无文章时显示 -->\n          <div v-if=\"articles.length === 0 && !loading\" class=\"text-center py-12 bg-white rounded-xl shadow-sm\">\n            <i class=\"fa fa-file-text-o text-gray-300 text-5xl mb-4\"></i>\n            <p class=\"text-gray-500\">没有找到相关文章</p>\n            <button \n              @click=\"clearSearch()\"\n              class=\"mt-4 text-indigo-600 hover:text-indigo-800 font-medium\"\n            >\n              查看所有文章\n            </button>\n          </div>\n          \n          <!-- 加载中 -->\n          <div v-if=\"loading\" class=\"text-center py-12 bg-white rounded-xl shadow-sm\">\n            <i class=\"fa fa-spinner fa-spin text-indigo-600 text-3xl\"></i>\n            <p class=\"mt-2 text-gray-500\">加载中...</p>\n          </div>\n        </div>\n        \n        <!-- 侧边栏 -->\n        <div class=\"md:w-1/3 space-y-6\">\n          <!-- 关于博主 -->\n          <div class=\"bg-white rounded-xl shadow-md p-6\">\n            <div class=\"flex flex-col items-center\">\n              <img src=\"https://picsum.photos/id/64/100/100\" alt=\"博主头像\" class=\"w-24 h-24 rounded-full object-cover border-4 border-indigo-100\">\n              <h3 class=\"text-xl font-bold text-gray-800 mt-4\">博主名称</h3>\n              <p class=\"text-gray-600 text-center mt-2\">热爱技术，分享生活的程序员。欢迎交流！</p>\n              <div class=\"flex space-x-4 mt-4\">\n                <a href=\"#\" class=\"text-gray-400 hover:text-indigo-600 transition-colors\"><i class=\"fa fa-github text-xl\"></i></a>\n                <a href=\"#\" class=\"text-gray-400 hover:text-indigo-600 transition-colors\"><i class=\"fa fa-twitter text-xl\"></i></a>\n                <a href=\"#\" class=\"text-gray-400 hover:text-indigo-600 transition-colors\"><i class=\"fa fa-linkedin text-xl\"></i></a>\n              </div>\n            </div>\n          </div>\n          \n          <!-- 热门文章 -->\n          <div class=\"bg-white rounded-xl shadow-md p-6\">\n            <h3 class=\"text-lg font-bold text-gray-800 mb-4 flex items-center\">\n              <i class=\"fa fa-fire text-orange-500 mr-2\"></i> 热门文章\n            </h3>\n            <div class=\"space-y-4\">\n              <div v-for=\"(article, index) in popularArticles\" :key=\"index\" class=\"flex gap-3\">\n                <div class=\"w-20 h-20 bg-gray-100 rounded overflow-hidden flex-shrink-0\">\n                  <img \n                    :src=\"`https://picsum.photos/id/${20 + index}/200/200`\" \n                    alt=\"文章缩略图\" \n                    class=\"w-full h-full object-cover hover:scale-110 transition-transform duration-300\"\n                  >\n                </div>\n                <div>\n                  <h4 class=\"text-sm font-medium text-gray-800 line-clamp-2 hover:text-indigo-600 transition-colors cursor-pointer\"\n                      @click=\"viewArticle(article.id)\">\n                    {{ article.title }}\n                  </h4>\n                  <p class=\"text-xs text-gray-500 mt-1\">{{ formatDate(article.created_at) }}</p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </main>\n\n    <!-- 文章详情模态框 -->\n    <div v-if=\"isArticleModalOpen\" class=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\">\n      <div class=\"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col\">\n        <!-- 模态框头部 -->\n        <div class=\"p-6 border-b border-gray-100 flex justify-between items-center\">\n          <h2 class=\"text-xl font-bold text-gray-800\">文章详情</h2>\n          <button @click=\"closeArticleModal\" class=\"text-gray-400 hover:text-gray-600 transition-colors\">\n            <i class=\"fa fa-times text-xl\"></i>\n          </button>\n        </div>\n        \n        <!-- 模态框内容 -->\n        <div class=\"flex-grow overflow-y-auto p-6\">\n          <div v-if=\"currentArticle\" class=\"article-content\">\n            <h1 class=\"text-2xl font-bold text-gray-800 mb-4\">{{ currentArticle.title }}</h1>\n            <div class=\"flex items-center text-gray-500 text-sm mb-6\">\n              <span><i class=\"fa fa-user mr-1\"></i> {{ currentArticle.author }}</span>\n              <span class=\"mx-2\">•</span>\n              <span><i class=\"fa fa-calendar mr-1\"></i> {{ formatDate(currentArticle.created_at) }}</span>\n            </div>\n            <div class=\"prose max-w-none\">\n              <!-- 这里应该是富文本内容，简单处理为换行显示 -->\n              <p v-for=\"(paragraph, index) in currentArticle.content.split('\\n')\" :key=\"index\" class=\"mb-4\">\n                {{ paragraph }}\n              </p>\n            </div>\n          </div>\n          \n          <!-- 评论区 -->\n          <div class=\"mt-10\">\n            <h3 class=\"text-xl font-bold text-gray-800 mb-6\">评论 ({{ comments.length }})</h3>\n            \n            <!-- 评论输入框 -->\n            <div class=\"mb-8\">\n              <div class=\"flex gap-3\">\n                <img src=\"https://picsum.photos/id/64/40/40\" alt=\"Your avatar\" class=\"w-8 h-8 rounded-full object-cover\">\n                <div class=\"flex-grow\">\n                  <textarea \n                    v-model=\"newComment.content\"\n                    placeholder=\"写下你的评论...\" \n                    class=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none\"\n                    rows=\"3\"\n                  ></textarea>\n                  <div class=\"flex justify-between mt-2\">\n                    <input \n                      v-model=\"newComment.author\"\n                      type=\"text\" \n                      placeholder=\"你的昵称\" \n                      class=\"px-3 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-500 w-40\"\n                    >\n                    <button \n                      @click=\"addComment()\"\n                      class=\"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md transition-colors text-sm\"\n                      :disabled=\"!newComment.author || !newComment.content\"\n                    >\n                      发表评论\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            <!-- 评论列表 -->\n            <div class=\"space-y-6\">\n              <div v-for=\"comment in comments\" :key=\"comment.id\" class=\"flex gap-3\">\n                <img src=\"https://picsum.photos/id/{{ 100 + comment.id }}/40/40\" alt=\"Comment author\" class=\"w-8 h-8 rounded-full object-cover\">\n                <div class=\"bg-gray-50 p-4 rounded-lg w-full\">\n                  <div class=\"flex justify-between items-start\">\n                    <h4 class=\"font-medium text-gray-800\">{{ comment.author }}</h4>\n                    <span class=\"text-xs text-gray-500\">{{ formatDate(comment.created_at) }}</span>\n                  </div>\n                  <p class=\"text-gray-600 mt-1\">{{ comment.content }}</p>\n                </div>\n              </div>\n              \n              <div v-if=\"comments.length === 0\" class=\"text-center py-8 bg-gray-50 rounded-lg\">\n                <p class=\"text-gray-500\">还没有评论，快来抢沙发吧！</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 创建文章模态框 -->\n    <div v-if=\"isCreateModalOpen\" class=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\">\n      <div class=\"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col\">\n        <!-- 模态框头部 -->\n        <div class=\"p-6 border-b border-gray-100 flex justify-between items-center\">\n          <h2 class=\"text-xl font-bold text-gray-800\">发布新文章</h2>\n          <button @click=\"isCreateModalOpen = false\" class=\"text-gray-400 hover:text-gray-600 transition-colors\">\n            <i class=\"fa fa-times text-xl\"></i>\n          </button>\n        </div>\n        \n        <!-- 模态框内容 -->\n        <div class=\"flex-grow overflow-y-auto p-6\">\n          <div class=\"space-y-4\">\n            <div>\n              <label for=\"title\" class=\"block text-sm font-medium text-gray-700 mb-1\">标题</label>\n              <input \n                id=\"title\"\n                v-model=\"newArticle.title\"\n                type=\"text\" \n                class=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500\"\n                placeholder=\"输入文章标题\"\n              >\n            </div>\n            \n            <div>\n              <label for=\"author\" class=\"block text-sm font-medium text-gray-700 mb-1\">作者</label>\n              <input \n                id=\"author\"\n                v-model=\"newArticle.author\"\n                type=\"text\" \n                class=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500\"\n                placeholder=\"输入作者名称\"\n              >\n            </div>\n            \n            <div>\n              <label for=\"content\" class=\"block text-sm font-medium text-gray-700 mb-1\">内容</label>\n              <textarea \n                id=\"content\"\n                v-model=\"newArticle.content\"\n                class=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none min-h-[300px]\"\n                placeholder=\"输入文章内容\"\n              ></textarea>\n            </div>\n          </div>\n        </div>\n        \n        <!-- 模态框底部 -->\n        <div class=\"p-6 border-t border-gray-100 flex justify-end space-x-3\">\n          <button \n            @click=\"isCreateModalOpen = false\"\n            class=\"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors\"\n          >\n            取消\n          </button>\n          <button \n            @click=\"createArticle()\"\n            class=\"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md transition-colors\"\n            :disabled=\"!newArticle.title || !newArticle.content || !newArticle.author\"\n          >\n            发布文章\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- 页脚 -->\n    <footer class=\"bg-white border-t border-gray-200 py-8\">\n      <div class=\"container mx-auto px-4\">\n        <div class=\"flex flex-col md:flex-row justify-between items-center\">\n          <div class=\"flex items-center space-x-2 mb-4 md:mb-0\">\n            <i class=\"fa fa-book text-indigo-600\"></i>\n            <span class=\"text-gray-800 font-bold\">MyBlog</span>\n          </div>\n          <p class=\"text-gray-500 text-sm\">© 2023 MyBlog. All rights reserved.</p>\n          <div class=\"flex space-x-4 mt-4 md:mt-0\">\n            <a href=\"#\" class=\"text-gray-400 hover:text-indigo-600 transition-colors\"><i class=\"fa fa-github\"></i></a>\n            <a href=\"#\" class=\"text-gray-400 hover:text-indigo-600 transition-colors\"><i class=\"fa fa-twitter\"></i></a>\n            <a href=\"#\" class=\"text-gray-400 hover:text-indigo-600 transition-colors\"><i class=\"fa fa-linkedin\"></i></a>\n          </div>\n        </div>\n      </div>\n    </footer>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      // 状态变量\n      isScrolled: false,\n      isArticleModalOpen: false,\n      isCreateModalOpen: false,\n      loading: false,\n      searchQuery: '',\n      \n      // 数据变量\n      articles: [],\n      popularArticles: [],\n      currentArticle: null,\n      comments: [],\n      \n      // 表单数据\n      newArticle: {\n        title: '',\n        content: '',\n        author: ''\n      },\n      newComment: {\n        author: '',\n        content: ''\n      }\n    };\n  },\n  \n  created() {\n    // 页面加载时获取文章列表\n    this.fetchArticles();\n    \n    // 监听滚动事件\n    window.addEventListener('scroll', this.handleScroll);\n  },\n  \n  beforeDestroy() {\n    // 移除滚动监听\n    window.removeEventListener('scroll', this.handleScroll);\n  },\n  \n  methods: {\n    // 处理滚动事件\n    handleScroll() {\n      this.isScrolled = window.scrollY > 10;\n    },\n    \n    // 格式化日期\n    formatDate(dateString) {\n      const date = new Date(dateString);\n      return date.toLocaleDateString('zh-CN', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      });\n    },\n    \n    // API调用 - 获取文章列表\n    async fetchArticles(search = '') {\n      this.loading = true;\n      try {\n        let url = 'http://localhost:5000/api/articles';\n        if (search) {\n          url += `?search=${encodeURIComponent(search)}`;\n        }\n        \n        const response = await fetch(url);\n        if (!response.ok) {\n          throw new Error('Failed to fetch articles');\n        }\n        \n        this.articles = await response.json();\n        // 简单处理热门文章（取前3篇）\n        this.popularArticles = [...this.articles].slice(0, 3);\n        \n        // 为每篇文章添加评论计数\n        for (const article of this.articles) {\n          const commentsResponse = await fetch(`http://localhost:5000/api/articles/${article.id}/comments`);\n          if (commentsResponse.ok) {\n            const comments = await commentsResponse.json();\n            article.commentsCount = comments.length;\n          } else {\n            article.commentsCount = 0;\n          }\n        }\n      } catch (error) {\n        console.error('Error fetching articles:', error);\n        alert('获取文章失败，请稍后重试');\n      } finally {\n        this.loading = false;\n      }\n    },\n    \n    // 搜索文章\n    searchArticles() {\n      this.fetchArticles(this.searchQuery);\n    },\n    \n    // 清除搜索\n    clearSearch() {\n      this.searchQuery = '';\n      this.fetchArticles();\n    },\n    \n    // 查看文章详情\n    async viewArticle(articleId) {\n      try {\n        const response = await fetch(`http://localhost:5000/api/articles/${articleId}`);\n        if (!response.ok) {\n          throw new Error('Failed to fetch article');\n        }\n        \n        this.currentArticle = await response.json();\n        this.isArticleModalOpen = true;\n        \n        // 获取该文章的评论\n        await this.fetchComments(articleId);\n      } catch (error) {\n        console.error('Error fetching article:', error);\n        alert('获取文章详情失败，请稍后重试');\n      }\n    },\n    \n    // 关闭文章详情模态框\n    closeArticleModal() {\n      this.isArticleModalOpen = false;\n      this.currentArticle = null;\n      this.comments = [];\n      this.newComment = { author: '', content: '' };\n    },\n    \n    // 获取评论\n    async fetchComments(articleId) {\n      try {\n        const response = await fetch(`http://localhost:5000/api/articles/${articleId}/comments`);\n        if (!response.ok) {\n          throw new Error('Failed to fetch comments');\n        }\n        \n        this.comments = await response.json();\n      } catch (error) {\n        console.error('Error fetching comments:', error);\n        alert('获取评论失败，请稍后重试');\n      }\n    },\n    \n    // 添加评论\n    async addComment() {\n      if (!this.currentArticle || !this.newComment.author || !this.newComment.content) {\n        return;\n      }\n      \n      try {\n        const response = await fetch(\n          `http://localhost:5000/api/articles/${this.currentArticle.id}/comments`,\n          {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(this.newComment)\n          }\n        );\n        \n        if (!response.ok) {\n          throw new Error('Failed to add comment');\n        }\n        \n        // 重新获取评论列表\n        await this.fetchComments(this.currentArticle.id);\n        \n        // 清空评论输入框\n        this.newComment = { author: '', content: '' };\n        \n        // 显示成功提示\n        alert('评论添加成功！');\n      } catch (error) {\n        console.error('Error adding comment:', error);\n        alert('添加评论失败，请稍后重试');\n      }\n    },\n    \n    // 创建文章\n    async createArticle() {\n      if (!this.newArticle.title || !this.newArticle.content || !this.newArticle.author) {\n        return;\n      }\n      \n      try {\n        const response = await fetch('http://localhost:5000/api/articles', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(this.newArticle)\n        });\n        \n        if (!response.ok) {\n          throw new Error('Failed to create article');\n        }\n        \n        // 关闭模态框\n        this.isCreateModalOpen = false;\n        \n        // 重新获取文章列表\n        this.fetchArticles();\n        \n        // 清空表单\n        this.newArticle = { title: '', content: '', author: '' };\n        \n        // 显示成功提示\n        alert('文章发布成功！');\n      } catch (error) {\n        console.error('Error creating article:', error);\n        alert('发布文章失败，请稍后重试');\n      }\n    }\n  }\n};\n</script>\n\n<style>\n\n\n/* 自定义动画 */\n@keyframes fadeIn {\n  from { opacity: 0; transform: translateY(10px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n/* 文章内容样式 */\n.article-content h2 {\n  font-size: 1.5rem;\n  font-weight: bold;\n  margin-top: 1.5rem;\n  margin-bottom: 1rem;\n}\n\n.article-content p {\n  margin-bottom: 1rem;\n  line-height: 1.6;\n}\n\n.article-content ul, .article-content ol {\n  margin-bottom: 1rem;\n  padding-left: 1.5rem;\n}\n\n.article-content ul {\n  list-style-type: disc;\n}\n\n.article-content ol {\n  list-style-type: decimal;\n}\n\n/* 平滑滚动 */\nhtml {\n  scroll-behavior: smooth;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}