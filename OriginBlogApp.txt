<template>
  <div id="app" class="min-h-screen bg-gray-50 text-gray-800 font-sans">
    <!-- 导航栏 -->
    <nav class="bg-white shadow-md fixed w-full z-50 transition-all duration-300" :class="{ 'bg-white/90 backdrop-blur-sm shadow-lg': isScrolled }">
      <div class="container mx-auto px-4 py-3 flex justify-between items-center">
        <div class="flex items-center space-x-2">
          <i class="fa fa-book text-indigo-600 text-2xl"></i>
          <h1 class="text-xl font-bold text-indigo-700">InsightBlog</h1>
        </div>
        
        <!-- 桌面导航 -->
        <div class="hidden md:flex items-center space-x-8">
          <a href="#" class="text-gray-700 hover:text-indigo-600 transition-colors font-medium" @click.prevent="switchView('home')">首页</a>
          <a href="#" class="text-gray-700 hover:text-indigo-600 transition-colors font-medium" @click.prevent="switchView('articles')">文章</a>
          <a href="#" class="text-gray-700 hover:text-indigo-600 transition-colors font-medium" @click.prevent="switchView('categories')">分类</a>
          <div v-if="!isAdminView" class="relative group">
            <button class="flex items-center text-gray-700 hover:text-indigo-600 transition-colors font-medium">
              搜索
              <i class="fa fa-search ml-1"></i>
            </button>
            <div class="absolute right-0 mt-2 w-64 bg-white rounded-md shadow-lg py-1 z-10 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform group-hover:translate-y-0 translate-y-2">
              <div class="p-2">
                <input type="text" placeholder="搜索文章..." class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
              </div>
            </div>
          </div>
          <button @click="toggleAdminView" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md transition-colors flex items-center">
            <i class="fa fa-cog mr-2"></i>
            <span>{{ isAdminView ? '返回前台' : '管理后台' }}</span>
          </button>
        </div>
        
        <!-- 移动端菜单按钮 -->
        <button class="md:hidden text-gray-700" @click="mobileMenuOpen = !mobileMenuOpen">
          <i class="fa fa-bars text-xl"></i>
        </button>
      </div>
      
      <!-- 移动端导航菜单 -->
      <div class="md:hidden bg-white border-t" v-if="mobileMenuOpen">
        <div class="container mx-auto px-4 py-2 flex flex-col space-y-3">
          <a href="#" class="py-2 text-gray-700 hover:text-indigo-600 transition-colors font-medium" @click.prevent="switchView('home'); mobileMenuOpen = false">首页</a>
          <a href="#" class="py-2 text-gray-700 hover:text-indigo-600 transition-colors font-medium" @click.prevent="switchView('articles'); mobileMenuOpen = false">文章</a>
          <a href="#" class="py-2 text-gray-700 hover:text-indigo-600 transition-colors font-medium" @click.prevent="switchView('categories'); mobileMenuOpen = false">分类</a>
          <div class="py-2">
            <input type="text" placeholder="搜索文章..." class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
          </div>
          <button @click="toggleAdminView; mobileMenuOpen = false" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md transition-colors flex items-center justify-center">
            <i class="fa fa-cog mr-2"></i>
            <span>{{ isAdminView ? '返回前台' : '管理后台' }}</span>
          </button>
        </div>
      </div>
    </nav>

    <!-- 主内容区 -->
    <main class="container mx-auto px-4 pt-24 pb-16">
      <!-- 前台视图 -->
      <div v-if="!isAdminView">
        <!-- 首页视图 -->
        <div v-if="currentView === 'home'" class="space-y-12">
          <!-- 英雄区 -->
          <section class="relative rounded-2xl overflow-hidden bg-gradient-to-r from-indigo-600 to-purple-700 text-white shadow-xl">
            <div class="absolute inset-0 opacity-20">
              <div class="absolute inset-0 bg-[url('https://picsum.photos/id/1073/1200/400')] bg-cover bg-center"></div>
            </div>
            <div class="relative py-16 px-8 md:py-24 md:px-16 max-w-3xl">
              <h2 class="text-3xl md:text-5xl font-bold mb-4 leading-tight">分享知识，连接思想</h2>
              <p class="text-lg md:text-xl opacity-90 mb-8">探索高质量的文章，参与有意义的讨论，发现新的观点和见解</p>
              <div class="flex flex-wrap gap-4">
                <a href="#" class="bg-white text-indigo-700 hover:bg-gray-100 px-6 py-3 rounded-md font-medium transition-colors" @click.prevent="switchView('articles')">浏览文章</a>
                <a href="#" class="bg-transparent border-2 border-white text-white hover:bg-white/10 px-6 py-3 rounded-md font-medium transition-colors">了解更多</a>
              </div>
            </div>
          </section>
          
          <!-- 特色文章 -->
          <section>
            <div class="flex justify-between items-center mb-8">
              <h2 class="text-2xl font-bold text-gray-800">特色文章</h2>
              <a href="#" class="text-indigo-600 hover:text-indigo-700 font-medium flex items-center" @click.prevent="switchView('articles')">
                查看全部
                <i class="fa fa-arrow-right ml-2"></i>
              </a>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
              <article v-for="article in featuredArticles" :key="article.id" class="bg-white rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-shadow duration-300 transform hover:-translate-y-1">
                <div class="relative h-48 overflow-hidden">
                  <img :src="article.coverImage" alt="Article cover" class="w-full h-full object-cover transition-transform duration-500 hover:scale-110">
                  <div class="absolute top-4 left-4">
                    <span :class="`px-3 py-1 rounded-full text-xs font-medium text-white ${getCategoryColor(article.category)}`">
                      {{ article.category }}
                    </span>
                  </div>
                </div>
                <div class="p-6">
                  <h3 class="text-xl font-bold mb-3 hover:text-indigo-600 transition-colors cursor-pointer">{{ article.title }}</h3>
                  <p class="text-gray-600 mb-4 line-clamp-3">{{ article.summary }}</p>
                  <div class="flex justify-between items-center">
                    <div class="flex items-center">
                      <img :src="article.authorAvatar" alt="Author" class="w-8 h-8 rounded-full mr-2">
                      <span class="text-sm text-gray-500">{{ article.author }}</span>
                    </div>
                    <span class="text-sm text-gray-500">{{ formatDate(article.publishedDate) }}</span>
                  </div>
                  <div class="mt-4 pt-4 border-t border-gray-100 flex justify-between items-center">
                    <button class="text-indigo-600 hover:text-indigo-700 font-medium" @click.prevent="viewArticle(article.id)">阅读全文</button>
                    <div class="flex items-center space-x-4 text-gray-500">
                      <span class="flex items-center"><i class="fa fa-comment-o mr-1"></i> {{ article.commentsCount }}</span>
                      <span class="flex items-center"><i class="fa fa-eye mr-1"></i> {{ article.views }}</span>
                    </div>
                  </div>
                </div>
              </article>
            </div>
          </section>
          
          <!-- 分类导航 -->
          <section class="bg-white rounded-xl shadow-md p-8">
            <h2 class="text-2xl font-bold mb-6">文章分类</h2>
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
              <a v-for="category in categories" :key="category.id" href="#" class="flex flex-col items-center p-6 rounded-lg border border-gray-100 hover:border-indigo-200 hover:bg-indigo-50 transition-colors group" @click.prevent="filterArticlesByCategory(category.name)">
                <div class="w-12 h-12 rounded-full flex items-center justify-center mb-3 bg-indigo-100 text-indigo-600 group-hover:bg-indigo-600 group-hover:text-white transition-colors">
                  <i :class="category.icon + ' text-xl'"></i>
                </div>
                <h3 class="font-medium text-center">{{ category.name }}</h3>
                <span class="text-sm text-gray-500 mt-1">{{ category.count }} 篇文章</span>
              </a>
            </div>
          </section>
          
          <!-- 最新文章 -->
          <section>
            <h2 class="text-2xl font-bold mb-8">最新文章</h2>
            <div class="space-y-6">
              <div v-for="article in latestArticles" :key="article.id" class="bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow p-6 flex flex-col md:flex-row gap-6">
                <div class="md:w-1/4 lg:w-1/5 relative rounded-lg overflow-hidden">
                  <img :src="article.coverImage" alt="Article cover" class="w-full h-48 object-cover">
                  <span :class="`absolute top-3 left-3 px-3 py-1 rounded-full text-xs font-medium text-white ${getCategoryColor(article.category)}`">
                    {{ article.category }}
                  </span>
                </div>
                <div class="md:w-3/4 lg:w-4/5 flex flex-col">
                  <h3 class="text-xl font-bold mb-2 hover:text-indigo-600 transition-colors cursor-pointer">{{ article.title }}</h3>
                  <p class="text-gray-600 mb-4 flex-grow line-clamp-2">{{ article.summary }}</p>
                  <div class="flex flex-wrap justify-between items-center gap-4">
                    <div class="flex items-center">
                      <img :src="article.authorAvatar" alt="Author" class="w-8 h-8 rounded-full mr-2">
                      <span class="text-sm text-gray-500">{{ article.author }} · {{ formatDate(article.publishedDate) }}</span>
                    </div>
                    <div class="flex items-center space-x-4 text-gray-500">
                      <span class="flex items-center"><i class="fa fa-comment-o mr-1"></i> {{ article.commentsCount }}</span>
                      <span class="flex items-center"><i class="fa fa-eye mr-1"></i> {{ article.views }}</span>
                      <button class="text-indigo-600 hover:text-indigo-700 font-medium" @click.prevent="viewArticle(article.id)">阅读全文</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="mt-8 text-center">
              <button class="bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 px-6 py-3 rounded-md font-medium transition-colors">
                加载更多
                <i class="fa fa-refresh ml-2"></i>
              </button>
            </div>
          </section>
        </div>
        
        <!-- 文章列表视图 -->
        <div v-if="currentView === 'articles'" class="space-y-8">
          <div class="bg-white rounded-xl shadow-md p-6">
            <h2 class="text-2xl font-bold mb-6">所有文章</h2>
            
            <!-- 筛选和排序 -->
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
              <div class="flex flex-wrap gap-2">
                <button class="px-4 py-2 rounded-full text-sm bg-indigo-100 text-indigo-700 hover:bg-indigo-200 transition-colors" @click="clearCategoryFilter">全部</button>
                <button v-for="category in categories" :key="category.id" class="px-4 py-2 rounded-full text-sm" :class="filteredCategory === category.name ? 'bg-indigo-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'" @click="filterArticlesByCategory(category.name)">
                  {{ category.name }}
                </button>
              </div>
              
              <div class="relative">
                <select class="appearance-none bg-gray-100 border-0 pl-4 pr-10 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                  <option>最新发布</option>
                  <option>最多阅读</option>
                  <option>最多评论</option>
                </select>
                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                  <i class="fa fa-chevron-down text-xs"></i>
                </div>
              </div>
            </div>
            
            <!-- 文章网格 -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
              <article v-for="article in filteredArticles" :key="article.id" class="bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow border border-gray-100">
                <div class="relative h-48 overflow-hidden">
                  <img :src="article.coverImage" alt="Article cover" class="w-full h-full object-cover transition-transform duration-500 hover:scale-110">
                  <div class="absolute top-4 left-4">
                    <span :class="`px-3 py-1 rounded-full text-xs font-medium text-white ${getCategoryColor(article.category)}`">
                      {{ article.category }}
                    </span>
                  </div>
                </div>
                <div class="p-5">
                  <h3 class="text-lg font-bold mb-2 hover:text-indigo-600 transition-colors cursor-pointer">{{ article.title }}</h3>
                  <p class="text-gray-600 text-sm mb-3 line-clamp-2">{{ article.summary }}</p>
                  <div class="flex justify-between items-center text-sm text-gray-500">
                    <span>{{ formatDate(article.publishedDate) }}</span>
                    <span class="flex items-center"><i class="fa fa-comment-o mr-1"></i> {{ article.commentsCount }}</span>
                  </div>
                  <button class="mt-3 w-full text-center text-indigo-600 hover:text-indigo-700 text-sm font-medium" @click.prevent="viewArticle(article.id)">阅读全文</button>
                </div>
              </article>
            </div>
            
            <!-- 分页 -->
            <div class="mt-8 flex justify-center">
              <nav class="inline-flex rounded-md shadow-sm">
                <button class="px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 rounded-l-md">
                  <i class="fa fa-chevron-left"></i>
                </button>
                <button class="px-4 py-2 border-t border-b border-gray-300 bg-indigo-50 text-sm font-medium text-indigo-600">1</button>
                <button class="px-4 py-2 border-t border-b border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">2</button>
                <button class="px-4 py-2 border-t border-b border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">3</button>
                <button class="px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 rounded-r-md">
                  <i class="fa fa-chevron-right"></i>
                </button>
              </nav>
            </div>
          </div>
        </div>
        
        <!-- 分类视图 -->
        <div v-if="currentView === 'categories'" class="space-y-8">
          <div class="bg-white rounded-xl shadow-md p-6">
            <h2 class="text-2xl font-bold mb-6">文章分类</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div v-for="category in categories" :key="category.id" class="flex items-start p-5 rounded-lg border border-gray-100 hover:border-indigo-200 hover:bg-indigo-50 transition-colors group cursor-pointer" @click="filterArticlesByCategory(category.name)">
                <div class="w-12 h-12 rounded-full flex items-center justify-center mr-4 bg-indigo-100 text-indigo-600 group-hover:bg-indigo-600 group-hover:text-white transition-colors flex-shrink-0">
                  <i :class="category.icon + ' text-xl'"></i>
                </div>
                <div class="flex-grow">
                  <h3 class="font-bold text-lg mb-1">{{ category.name }}</h3>
                  <p class="text-gray-600 text-sm mb-2">{{ category.description }}</p>
                  <div class="flex items-center text-sm text-gray-500">
                    <span>{{ category.count }} 篇文章</span>
                    <span class="mx-2">•</span>
                    <span>最后更新: {{ category.lastUpdated }}</span>
                  </div>
                </div>
                <div class="flex-shrink-0 ml-2 text-indigo-600 opacity-0 group-hover:opacity-100 transition-opacity">
                  <i class="fa fa-arrow-right"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- 文章详情视图 -->
        <div v-if="currentView === 'articleDetail'" class="space-y-8">
          <article class="bg-white rounded-xl shadow-md overflow-hidden">
            <div class="relative h-64 md:h-80 lg:h-96">
              <img :src="currentArticle.coverImage" alt="Article cover" class="w-full h-full object-cover">
              <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
              <div class="absolute bottom-0 left-0 right-0 p-6 md:p-8 text-white">
                <span :class="`px-3 py-1 rounded-full text-xs font-medium mb-4 inline-block ${getCategoryColor(currentArticle.category)}`">
                  {{ currentArticle.category }}
                </span>
                <h1 class="text-2xl md:text-3xl lg:text-4xl font-bold mb-3">{{ currentArticle.title }}</h1>
                <div class="flex flex-wrap items-center gap-4 text-sm text-white/90">
                  <div class="flex items-center">
                    <img :src="currentArticle.authorAvatar" alt="Author" class="w-6 h-6 rounded-full mr-2">
                    <span>{{ currentArticle.author }}</span>
                  </div>
                  <span>{{ formatDate(currentArticle.publishedDate) }}</span>
                  <span class="flex items-center"><i class="fa fa-eye mr-1"></i> {{ currentArticle.views }}</span>
                </div>
              </div>
            </div>
            
            <div class="p-6 md:p-8 lg:p-10">
              <div class="prose max-w-none">
                <div v-html="currentArticle.content" class="article-content space-y-6"></div>
              </div>
              
              <!-- 标签 -->
              <div class="mt-8 pt-6 border-t border-gray-100">
                <div class="flex flex-wrap items-center gap-2">
                  <span class="text-gray-500">标签:</span>
                  <span v-for="tag in currentArticle.tags" :key="tag" class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm">#{{ tag }}</span>
                </div>
              </div>
              
              <!-- 分享 -->
              <div class="mt-6 flex items-center justify-between">
                <div class="flex items-center gap-3">
                  <button class="flex items-center gap-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm transition-colors">
                    <i class="fa fa-heart-o text-red-500"></i>
                    <span>喜欢 ({{ currentArticle.likes }})</span>
                  </button>
                  <button class="flex items-center gap-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm transition-colors">
                    <i class="fa fa-bookmark-o"></i>
                    <span>收藏</span>
                  </button>
                </div>
                
                <div class="flex items-center gap-2">
                  <span class="text-sm text-gray-500">分享:</span>
                  <button class="w-8 h-8 rounded-full bg-[#1877F2] flex items-center justify-center text-white hover:bg-[#166FE5] transition-colors">
                    <i class="fa fa-facebook"></i>
                  </button>
                  <button class="w-8 h-8 rounded-full bg-[#1DA1F2] flex items-center justify-center text-white hover:bg-[#1a91da] transition-colors">
                    <i class="fa fa-twitter"></i>
                  </button>
                  <button class="w-8 h-8 rounded-full bg-[#25D366] flex items-center justify-center text-white hover:bg-[#22c15c] transition-colors">
                    <i class="fa fa-whatsapp"></i>
                  </button>
                  <button class="w-8 h-8 rounded-full bg-[#0A66C2] flex items-center justify-center text-white hover:bg-[#095cb5] transition-colors">
                    <i class="fa fa-linkedin"></i>
                  </button>
                </div>
              </div>
            </div>
          </article>
          
          <!-- 作者信息 -->
          <div class="bg-white rounded-xl shadow-md p-6 flex flex-col md:flex-row items-center gap-6">
            <img :src="currentArticle.authorAvatar" alt="Author" class="w-20 h-20 rounded-full object-cover border-4 border-white shadow-md">
            <div class="text-center md:text-left">
              <h3 class="text-xl font-bold mb-1">{{ currentArticle.author }}</h3>
              <p class="text-gray-600 mb-3">{{ currentArticle.authorBio }}</p>
              <button class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md text-sm transition-colors">
                关注作者
              </button>
            </div>
          </div>
          
          <!-- 评论区 -->
          <div class="bg-white rounded-xl shadow-md p-6">
            <h3 class="text-xl font-bold mb-6">评论 ({{ currentArticle.commentsCount }})</h3>
            
            <!-- 评论输入 -->
            <div class="mb-8">
              <div class="flex gap-4">
                <img src="https://picsum.photos/id/64/100/100" alt="Your avatar" class="w-10 h-10 rounded-full">
                <div class="flex-grow">
                  <textarea placeholder="分享你的想法..." class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none" rows="3"></textarea>
                  <div class="mt-3 flex justify-between items-center">
                    <div class="flex gap-2">
                      <button class="w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-700 transition-colors">
                        <i class="fa fa-image"></i>
                      </button>
                      <button class="w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-700 transition-colors">
                        <i class="fa fa-smile-o"></i>
                      </button>
                    </div>
                    <button class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md text-sm transition-colors">
                      发表评论
                    </button>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- 评论列表 -->
            <div class="space-y-6">
              <div v-for="comment in currentArticle.comments" :key="comment.id" class="border-b border-gray-100 pb-6 last:border-0 last:pb-0">
                <div class="flex gap-4">
                  <img :src="comment.authorAvatar" alt="Comment author" class="w-10 h-10 rounded-full">
                  <div class="flex-grow">
                    <div class="bg-gray-50 p-4 rounded-lg">
                      <div class="flex justify-between items-start mb-2">
                        <h4 class="font-medium">{{ comment.author }}</h4>
                        <span class="text-xs text-gray-500">{{ formatRelativeTime(comment.timestamp) }}</span>
                      </div>
                      <p class="text-gray-700">{{ comment.content }}</p>
                    </div>
                    <div class="mt-2 flex items-center gap-4 text-sm">
                      <button class="text-gray-500 hover:text-indigo-600 transition-colors flex items-center gap-1">
                        <i class="fa fa-heart-o"></i>
                        <span>{{ comment.likes }}</span>
                      </button>
                      <button class="text-gray-500 hover:text-indigo-600 transition-colors">回复</button>
                    </div>
                    
                    <!-- 嵌套回复 -->
                    <div class="mt-4 ml-6 space-y-4">
                      <div v-for="reply in comment.replies" :key="reply.id" class="flex gap-3">
                        <img :src="reply.authorAvatar" alt="Reply author" class="w-8 h-8 rounded-full">
                        <div class="flex-grow">
                          <div class="bg-gray-50 p-3 rounded-lg text-sm">
                            <div class="flex justify-between items-start mb-1">
                              <h5 class="font-medium">{{ reply.author }}</h5>
                              <span class="text-xs text-gray-500">{{ formatRelativeTime(reply.timestamp) }}</span>
                            </div>
                            <p class="text-gray-700">{{ reply.content }}</p>
                          </div>
                          <div class="mt-1 flex items-center gap-4 text-xs">
                            <button class="text-gray-500 hover:text-indigo-600 transition-colors flex items-center gap-1">
                              <i class="fa fa-heart-o"></i>
                              <span>{{ reply.likes }}</span>
                            </button>
                            <button class="text-gray-500 hover:text-indigo-600 transition-colors">回复</button>
                          </div>
                        </div>
                      </div>
                      
                      <!-- 回复输入框 -->
                      <div class="flex gap-3">
                        <img src="https://picsum.photos/id/64/100/100" alt="Your avatar" class="w-8 h-8 rounded-full">
                        <div class="flex-grow">
                          <textarea placeholder="回复 @{{ comment.author }}..." class="w-full border border-gray-300 rounded-lg p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none" rows="2"></textarea>
                          <div class="mt-2 flex justify-end gap-2">
                            <button class="px-3 py-1 border border-gray-300 text-gray-700 rounded-md text-sm hover:bg-gray-50 transition-colors">取消</button>
                            <button class="px-3 py-1 bg-indigo-600 text-white rounded-md text-sm hover:bg-indigo-700 transition-colors">回复</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- 加载更多评论 -->
            <div class="mt-6 text-center">
              <button class="bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 px-4 py-2 rounded-md text-sm font-medium transition-colors">
                查看更多评论
              </button>
            </div>
          </div>
          
          <!-- 相关文章 -->
          <div>
            <h3 class="text-xl font-bold mb-6">相关推荐</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
              <article v-for="article in relatedArticles" :key="article.id" class="bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow border border-gray-100">
                <div class="relative h-40 overflow-hidden">
                  <img :src="article.coverImage" alt="Article cover" class="w-full h-full object-cover transition-transform duration-500 hover:scale-110">
                </div>
                <div class="p-4">
                  <h3 class="text-base font-bold mb-2 hover:text-indigo-600 transition-colors cursor-pointer line-clamp-2">{{ article.title }}</h3>
                  <div class="flex justify-between items-center text-xs text-gray-500">
                    <span>{{ formatDate(article.publishedDate) }}</span>
                    <span class="flex items-center"><i class="fa fa-comment-o mr-1"></i> {{ article.commentsCount }}</span>
                  </div>
                </div>
              </article>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 管理后台视图 -->
      <div v-if="isAdminView" class="space-y-8">
        <div class="bg-white rounded-xl shadow-md p-6">
          <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold">管理后台</h2>
            <div class="flex items-center gap-3">
              <div class="relative">
                <img src="https://picsum.photos/id/64/100/100" alt="Admin" class="w-10 h-10 rounded-full border-2 border-indigo-200">
                <span class="absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"></span>
              </div>
              <span class="font-medium">管理员</span>
            </div>
          </div>
          
          <!-- 统计卡片 -->
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="bg-indigo-50 rounded-lg p-5 border border-indigo-100">
              <div class="flex justify-between items-start">
                <div>
                  <p class="text-sm text-indigo-600 font-medium">总文章数</p>
                  <h3 class="text-2xl font-bold mt-1">{{ articles.length }}</h3>
                </div>
                <div class="w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600">
                  <i class="fa fa-file-text-o"></i>
                </div>
              </div>
              <div class="mt-4 flex items-center text-sm">
                <span class="text-green-600 flex items-center">
                  <i class="fa fa-arrow-up mr-1"></i> 12%
                </span>
                <span class="text-gray-500 ml-2">较上月</span>
              </div>
            </div>
            
            <div class="bg-green-50 rounded-lg p-5 border border-green-100">
              <div class="flex justify-between items-start">
                <div>
                  <p class="text-sm text-green-600 font-medium">总评论数</p>
                  <h3 class="text-2xl font-bold mt-1">{{ totalComments }}</h3>
                </div>
                <div class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center text-green-600">
                  <i class="fa fa-comments-o"></i>
                </div>
              </div>
              <div class="mt-4 flex items-center text-sm">
                <span class="text-green-600 flex items-center">
                  <i class="fa fa-arrow-up mr-1"></i> 8%
                </span>
                <span class="text-gray-500 ml-2">较上月</span>
              </div>
            </div>
            
            <div class="bg-blue-50 rounded-lg p-5 border border-blue-100">
              <div class="flex justify-between items-start">
                <div>
                  <p class="text-sm text-blue-600 font-medium">总访问量</p>
                  <h3 class="text-2xl font-bold mt-1">{{ totalViews }}</h3>
                </div>
                <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600">
                  <i class="fa fa-eye"></i>
                </div>
              </div>
              <div class="mt-4 flex items-center text-sm">
                <span class="text-green-600 flex items-center">
                  <i class="fa fa-arrow-up mr-1"></i> 15%
                </span>
                <span class="text-gray-500 ml-2">较上月</span>
              </div>
            </div>
            
            <div class="bg-purple-50 rounded-lg p-5 border border-purple-100">
              <div class="flex justify-between items-start">
                <div>
                  <p class="text-sm text-purple-600 font-medium">分类数</p>
                  <h3 class="text-2xl font-bold mt-1">{{ categories.length }}</h3>
                </div>
                <div class="w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center text-purple-600">
                  <i class="fa fa-tags"></i>
                </div>
              </div>
              <div class="mt-4 flex items-center text-sm">
                <span class="text-gray-500">无变化</span>
              </div>
            </div>
          </div>
        </div>
        
        <!-- 管理选项卡 -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden">
          <div class="border-b border-gray-200">
            <div class="flex">
              <button class="px-6 py-4 font-medium border-b-2 border-indigo-600 text-indigo-600" :class="{ 'border-indigo-600 text-indigo-600': adminTab === 'articles' }" @click="adminTab = 'articles'">
                文章管理
              </button>
              <button class="px-6 py-4 font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700" :class="{ 'border-indigo-600 text-indigo-600': adminTab === 'categories' }" @click="adminTab = 'categories'">
                分类管理
              </button>
              <button class="px-6 py-4 font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700" :class="{ 'border-indigo-600 text-indigo-600': adminTab === 'comments' }" @click="adminTab = 'comments'">
                评论管理
              </button>
            </div>
          </div>
          
          <!-- 文章管理 -->
          <div v-if="adminTab === 'articles'" class="p-6">
            <div class="flex justify-between items-center mb-6">
              <h3 class="text-lg font-bold">文章列表</h3>
              <button class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md transition-colors flex items-center" @click="showArticleEditor = true; isEditingArticle = false; resetArticleForm()">
                <i class="fa fa-plus mr-2"></i>
                新增文章
              </button>
            </div>
            
            <!-- 搜索和筛选 -->
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6">
              <div class="relative w-full md:w-64">
                <input type="text" placeholder="搜索文章..." class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                <i class="fa fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
              </div>
              
              <div class="flex flex-wrap gap-2">
                <select class="border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                  <option>所有分类</option>
                  <option v-for="category in categories" :key="category.id">{{ category.name }}</option>
                </select>
                <select class="border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                  <option>所有状态</option>
                  <option>已发布</option>
                  <option>草稿</option>
                </select>
              </div>
            </div>
            
            <!-- 文章表格 -->
            <div class="overflow-x-auto">
              <table class="min-w-full divide-y divide-gray-200">
                <thead>
                  <tr>
                    <th class="px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/2">标题</th>
                    <th class="px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">分类</th>
                    <th class="px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">发布日期</th>
                    <th class="px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">状态</th>
                    <th class="px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                  </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                  <tr v-for="article in articles" :key="article.id" class="hover:bg-gray-50 transition-colors">
                    <td class="px-4 py-4 whitespace-nowrap">
                      <div class="flex items-center">
                        <div class="h-10 w-10 flex-shrink-0 mr-3">
                          <img :src="article.coverImage" alt="Article" class="h-10 w-10 rounded object-cover">
                        </div>
                        <div>
                          <div class="text-sm font-medium text-gray-900">{{ article.title }}</div>
                          <div class="text-xs text-gray-500">
                            <span class="flex items-center"><i class="fa fa-eye mr-1"></i> {{ article.views }}</span>
                            <span class="mx-2">•</span>
                            <span class="flex items-center"><i class="fa fa-comment-o mr-1"></i> {{ article.commentsCount }}</span>
                          </div>
                        </div>
                      </div>
                    </td>
                    <td class="px-4 py-4 whitespace-nowrap">
                      <span class="text-sm text-gray-900">{{ article.category }}</span>
                    </td>
                    <td class="px-4 py-4 whitespace-nowrap">
                      <span class="text-sm text-gray-500">{{ formatDate(article.publishedDate) }}</span>
                    </td>
                    <td class="px-4 py-4 whitespace-nowrap">
                      <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                        已发布
                      </span>
                    </td>
                    <td class="px-4 py-4 whitespace-nowrap text-sm font-medium">
                      <button class="text-indigo-600 hover:text-indigo-900 mr-3" @click="editArticle(article.id)">编辑</button>
                      <button class="text-red-600 hover:text-red-900" @click="deleteArticle(article.id)">删除</button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            
            <!-- 分页 -->
            <div class="mt-6 flex justify-center">
              <nav class="inline-flex rounded-md shadow-sm">
                <button class="px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 rounded-l-md">
                  <i class="fa fa-chevron-left"></i>
                </button>
                <button class="px-4 py-2 border-t border-b border-gray-300 bg-indigo-50 text-sm font-medium text-indigo-600">1</button>
                <button class="px-4 py-2 border-t border-b border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">2</button>
                <button class="px-4 py-2 border-t border-b border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">3</button>
                <button class="px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 rounded-r-md">
                  <i class="fa fa-chevron-right"></i>
                </button>
              </nav>
            </div>
          </div>
          
          <!-- 分类管理 -->
          <div v-if="adminTab === 'categories'" class="p-6">
            <div class="flex justify-between items-center mb-6">
              <h3 class="text-lg font-bold">分类列表</h3>
              <button class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md transition-colors flex items-center" @click="showCategoryModal = true; isEditingCategory = false; resetCategoryForm()">
                <i class="fa fa-plus mr-2"></i>
                新增分类
              </button>
            </div>
            
            <div class="bg-gray-50 rounded-lg overflow-hidden">
              <table class="min-w-full divide-y divide-gray-200">
                <thead>
                  <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">图标</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">名称</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">描述</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">文章数</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                  </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                  <tr v-for="category in categories" :key="category.id" class="hover:bg-gray-50 transition-colors">
                    <td class="px-6 py-4 whitespace-nowrap">
                      <div class="w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600">
                        <i :class="category.icon"></i>
                      </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                      <div class="text-sm font-medium text-gray-900">{{ category.name }}</div>
                    </td>
                    <td class="px-6 py-4">
                      <div class="text-sm text-gray-500">{{ category.description }}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                      <div class="text-sm text-gray-900">{{ category.count }}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                      <button class="text-indigo-600 hover:text-indigo-900 mr-3" @click="editCategory(category.id)">编辑</button>
                      <button class="text-red-600 hover:text-red-900" @click="deleteCategory(category.id)">删除</button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          
          <!-- 评论管理 -->
          <div v-if="adminTab === 'comments'" class="p-6">
            <div class="flex justify-between items-center mb-6">
              <h3 class="text-lg font-bold">评论列表</h3>
              <div class="relative w-64">
                <input type="text" placeholder="搜索评论..." class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                <i class="fa fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
              </div>
            </div>
            
            <div class="bg-gray-50 rounded-lg overflow-hidden">
              <table class="min-w-full divide-y divide-gray-200">
                <thead>
                  <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">评论内容</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">作者</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">文章</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">日期</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">状态</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                  </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                  <tr v-for="comment in allComments" :key="comment.id" class="hover:bg-gray-50 transition-colors">
                    <td class="px-6 py-4 max-w-xs">
                      <div class="text-sm text-gray-900 line-clamp-2">{{ comment.content }}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                      <div class="flex items-center">
                        <img :src="comment.authorAvatar" alt="Author" class="w-6 h-6 rounded-full mr-2">
                        <span class="text-sm text-gray-900">{{ comment.author }}</span>
                      </div>
                    </td>
                    <td class="px-6 py-4">
                      <div class="text-sm text-gray-500 line-clamp-1">{{ getArticleTitleById(comment.articleId) }}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                      <div class="text-sm text-gray-500">{{ formatDate(comment.timestamp) }}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                      <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                        已通过
                      </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                      <button class="text-indigo-600 hover:text-indigo-900 mr-3">回复</button>
                      <button class="text-red-600 hover:text-red-900">删除</button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            
            <!-- 分页 -->
            <div class="mt-6 flex justify-center">
              <nav class="inline-flex rounded-md shadow-sm">
                <button class="px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 rounded-l-md">
                  <i class="fa fa-chevron-left"></i>
                </button>
                <button class="px-4 py-2 border-t border-b border-gray-300 bg-indigo-50 text-sm font-medium text-indigo-600">1</button>
                <button class="px-4 py-2 border-t border-b border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">2</button>
                <button class="px-4 py-2 border-t border-b border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">3</button>
                <button class="px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 rounded-r-md">
                  <i class="fa fa-chevron-right"></i>
                </button>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </main>
    
    <!-- 页脚 -->
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <div class="flex items-center space-x-2 mb-4">
              <i class="fa fa-book text-indigo-400 text-2xl"></i>
              <h2 class="text-xl font-bold">InsightBlog</h2>
            </div>
            <p class="text-gray-400 mb-4">分享知识，连接思想，探索高质量的文章和见解</p>
            <div class="flex space-x-4">
              <a href="#" class="text-gray-400 hover:text-white transition-colors">
                <i class="fa fa-facebook"></i>
              </a>
              <a href="#" class="text-gray-400 hover:text-white transition-colors">
                <i class="fa fa-twitter"></i>
              </a>
              <a href="#" class="text-gray-400 hover:text-white transition-colors">
                <i class="fa fa-instagram"></i>
              </a>
              <a href="#" class="text-gray-400 hover:text-white transition-colors">
                <i class="fa fa-linkedin"></i>
              </a>
            </div>
          </div>
          
          <div>
            <h3 class="text-lg font-semibold mb-4">快速链接</h3>
            <ul class="space-y-2">
              <li><a href="#" class="text-gray-400 hover:text-white transition-colors" @click.prevent="switchView('home'); isAdminView = false">首页</a></li>
              <li><a href="#" class="text-gray-400 hover:text-white transition-colors" @click.prevent="switchView('articles'); isAdminView = false">所有文章</a></li>
              <li><a href="#" class="text-gray-400 hover:text-white transition-colors" @click.prevent="switchView('categories'); isAdminView = false">分类</a></li>
              <li><a href="#" class="text-gray-400 hover:text-white transition-colors">关于我们</a></li>
              <li><a href="#" class="text-gray-400 hover:text-white transition-colors">联系我们</a></li>
            </ul>
          </div>
          
          <div>
            <h3 class="text-lg font-semibold mb-4">热门分类</h3>
            <ul class="space-y-2">
              <li v-for="category in categories.slice(0, 5)" :key="category.id">
                <a href="#" class="text-gray-400 hover:text-white transition-colors" @click.prevent="filterArticlesByCategory(category.name); isAdminView = false">
                  {{ category.name }}
                </a>
              </li>
            </ul>
          </div>
          
          <div>
            <h3 class="text-lg font-semibold mb-4">订阅更新</h3>
            <p class="text-gray-400 mb-4">订阅我们的通讯，获取最新文章和更新</p>
            <form class="flex">
              <input type="email" placeholder="您的邮箱地址" class="px-4 py-2 rounded-l-md w-full focus:outline-none text-gray-800">
              <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-r-md transition-colors">
                订阅
              </button>
            </form>
          </div>
        </div>
        
        <div class="mt-12 pt-8 border-t border-gray-800 text-center text-gray-500 text-sm">
          <p>&copy; {{ new Date().getFullYear() }} InsightBlog. 保留所有权利。</p>
        </div>
      </div>
    </footer>
    
    <!-- 文章编辑器模态框 -->
    <div v-if="showArticleEditor" class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
      <div class="bg-white rounded-xl shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col animate-fadeIn">
        <div class="border-b border-gray-200 px-6 py-4 flex justify-between items-center">
          <h3 class="text-lg font-bold">{{ isEditingArticle ? '编辑文章' : '新增文章' }}</h3>
          <div class="flex items-center gap-3">
            <button class="px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors" @click="showArticleEditor = false">
              取消
            </button>
            <button class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors">
              {{ isEditingArticle ? '更新文章' : '发布文章' }}
            </button>
            <button class="text-gray-500 hover:text-gray-700" @click="showArticleEditor = false">
              <i class="fa fa-times"></i>
            </button>
          </div>
        </div>
        
        <div class="flex flex-col md:flex-row flex-grow overflow-hidden">
          <!-- 编辑器工具栏 -->
          <div class="w-full md:w-64 border-b md:border-b-0 md:border-r border-gray-200 bg-gray-50 p-4 overflow-y-auto">
            <div class="space-y-6">
              <!-- 基本信息 -->
              <div>
                <h4 class="text-sm font-medium text-gray-700 mb-3">基本信息</h4>
                <div class="space-y-3">
                  <div>
                    <label class="block text-xs text-gray-500 mb-1">标题</label>
                    <input type="text" v-model="articleForm.title" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500">
                  </div>
                  <div>
                    <label class="block text-xs text-gray-500 mb-1">分类</label>
                    <select v-model="articleForm.category" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500">
                      <option value="">选择分类</option>
                      <option v-for="category in categories" :key="category.id" :value="category.name">{{ category.name }}</option>
                    </select>
                  </div>
                  <div>
                    <label class="block text-xs text-gray-500 mb-1">标签</label>
                    <input type="text" v-model="articleForm.tagsStr" placeholder="用逗号分隔标签" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500">
                  </div>
                  <div>
                    <label class="block text-xs text-gray-500 mb-1">特色图片</label>
                    <div class="border-2 border-dashed border-gray-300 rounded-md p-3 text-center hover:border-indigo-500 transition-colors cursor-pointer">
                      <input type="file" class="hidden" accept="image/*" @change="handleCoverImageUpload">
                      <div v-if="articleForm.coverImage" class="relative">
                        <img :src="articleForm.coverImage" alt="Cover" class="w-full h-32 object-cover rounded">
                        <button type="button" class="absolute top-1 right-1 w-6 h-6 bg-black/50 rounded-full flex items-center justify-center text-white" @click="articleForm.coverImage = ''">
                          <i class="fa fa-times text-xs"></i>
                        </button>
                      </div>
                      <div v-else class="py-4">
                        <i class="fa fa-cloud-upload text-gray-400 mb-2"></i>
                        <p class="text-xs text-gray-500">点击上传或拖放图片</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- 发布设置 -->
              <div>
                <h4 class="text-sm font-medium text-gray-700 mb-3">发布设置</h4>
                <div class="space-y-3">
                  <div>
                    <label class="block text-xs text-gray-500 mb-1">状态</label>
                    <select v-model="articleForm.status" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500">
                      <option value="published">已发布</option>
                      <option value="draft">草稿</option>
                    </select>
                  </div>
                  <div>
                    <label class="block text-xs text-gray-500 mb-1">发布日期</label>
                    <input type="date" v-model="articleForm.publishedDate" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500">
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- 富文本编辑器 -->
          <div class="flex-grow overflow-hidden flex flex-col">
            <!-- 编辑器工具栏 -->
            <div class="border-b border-gray-200 bg-white p-2 flex flex-wrap items-center gap-1">
              <button class="p-2 hover:bg-gray-100 rounded" title="段落">
                <i class="fa fa-paragraph"></i>
              </button>
              <div class="h-6 border-r border-gray-300 mx-1"></div>
              <button class="p-2 hover:bg-gray-100 rounded" title="粗体">
                <i class="fa fa-bold"></i>
              </button>
              <button class="p-2 hover:bg-gray-100 rounded" title="斜体">
                <i class="fa fa-italic"></i>
              </button>
              <button class="p-2 hover:bg-gray-100 rounded" title="下划线">
                <i class="fa fa-underline"></i>
              </button>
              <button class="p-2 hover:bg-gray-100 rounded" title="删除线">
                <i class="fa fa-strikethrough"></i>
              </button>
              <div class="h-6 border-r border-gray-300 mx-1"></div>
              <button class="p-2 hover:bg-gray-100 rounded" title="左对齐">
                <i class="fa fa-align-left"></i>
              </button>
              <button class="p-2 hover:bg-gray-100 rounded" title="居中对齐">
                <i class="fa fa-align-center"></i>
              </button>
              <button class="p-2 hover:bg-gray-100 rounded" title="右对齐">
                <i class="fa fa-align-right"></i>
              </button>
              <button class="p-2 hover:bg-gray-100 rounded" title="两端对齐">
                <i class="fa fa-align-justify"></i>
              </button>
              <div class="h-6 border-r border-gray-300 mx-1"></div>
              <button class="p-2 hover:bg-gray-100 rounded" title="无序列表">
                <i class="fa fa-list-ul"></i>
              </button>
              <button class="p-2 hover:bg-gray-100 rounded" title="有序列表">
                <i class="fa fa-list-ol"></i>
              </button>
              <button class="p-2 hover:bg-gray-100 rounded" title="减少缩进">
                <i class="fa fa-outdent"></i>
              </button>
              <button class="p-2 hover:bg-gray-100 rounded" title="增加缩进">
                <i class="fa fa-indent"></i>
              </button>
              <div class="h-6 border-r border-gray-300 mx-1"></div>
              <button class="p-2 hover:bg-gray-100 rounded" title="插入链接">
                <i class="fa fa-link"></i>
              </button>
              <button class="p-2 hover:bg-gray-100 rounded" title="插入图片" @click="triggerImageUpload">
                <i class="fa fa-image"></i>
              </button>
              <button class="p-2 hover:bg-gray-100 rounded" title="插入视频" @click="triggerVideoUpload">
                <i class="fa fa-video-camera"></i>
              </button>
              <button class="p-2 hover:bg-gray-100 rounded" title="插入音频" @click="triggerAudioUpload">
                <i class="fa fa-music"></i>
              </button>
              <div class="h-6 border-r border-gray-300 mx-1"></div>
              <button class="p-2 hover:bg-gray-100 rounded" title="撤销">
                <i class="fa fa-undo"></i>
              </button>
              <button class="p-2 hover:bg-gray-100 rounded" title="重做">
                <i class="fa fa-repeat"></i>
              </button>
            </div>
            
            <!-- 编辑器内容区 -->
            <div class="flex-grow overflow-y-auto p-6 min-h-[300px] focus:outline-none" contenteditable="true" ref="editorContent">
              <p>开始撰写您的文章内容...</p>
            </div>
            
            <!-- 媒体上传区域 -->
            <div class="border-t border-gray-200 p-4 bg-gray-50">
              <h4 class="text-sm font-medium text-gray-700 mb-3">已上传媒体</h4>
              <div class="flex flex-wrap gap-3 max-h-32 overflow-y-auto pb-2">
                <div v-for="media in articleForm.media" :key="media.id" class="relative group">
                  <div v-if="media.type === 'image'" class="w-20 h-20 bg-gray-100 rounded overflow-hidden">
                    <img :src="media.url" alt="Uploaded image" class="w-full h-full object-cover">
                  </div>
                  <div v-if="media.type === 'video'" class="w-20 h-20 bg-gray-100 rounded flex items-center justify-center">
                    <i class="fa fa-video-camera text-gray-500"></i>
                  </div>
                  <div v-if="media.type === 'audio'" class="w-20 h-20 bg-gray-100 rounded flex items-center justify-center">
                    <i class="fa fa-music text-gray-500"></i>
                  </div>
                  <button type="button" class="absolute top-1 right-1 w-5 h-5 bg-black/50 rounded-full flex items-center justify-center text-white opacity-0 group-hover:opacity-100 transition-opacity" @click="removeMedia(media.id)">
                    <i class="fa fa-times text-xs"></i>
                  </button>
                </div>
                <input type="file" id="imageUpload" class="hidden" accept="image/*" @change="handleImageUpload">
                <input type="file" id="videoUpload" class="hidden" accept="video/*" @change="handleVideoUpload">
                <input type="file" id="audioUpload" class="hidden" accept="audio/*" @change="handleAudioUpload">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- 分类编辑模态框 -->
    <div v-if="showCategoryModal" class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
      <div class="bg-white rounded-xl shadow-2xl w-full max-w-md animate-fadeIn">
        <div class="border-b border-gray-200 px-6 py-4 flex justify-between items-center">
          <h3 class="text-lg font-bold">{{ isEditingCategory ? '编辑分类' : '新增分类' }}</h3>
          <button class="text-gray-500 hover:text-gray-700" @click="showCategoryModal = false">
            <i class="fa fa-times"></i>
          </button>
        </div>
        
        <div class="p-6">
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">分类名称</label>
              <input type="text" v-model="categoryForm.name" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">分类描述</label>
              <textarea v-model="categoryForm.description" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"></textarea>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">选择图标</label>
              <div class="grid grid-cols-6 gap-3 mt-2">
                <div v-for="icon in availableIcons" :key="icon" class="w-12 h-12 rounded-full flex items-center justify-center bg-gray-100 text-gray-700 hover:bg-indigo-100 hover:text-indigo-600 cursor-pointer transition-colors" :class="{ 'bg-indigo-100 text-indigo-600': categoryForm.icon === icon }" @click="categoryForm.icon = icon">
                  <i :class="icon"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="border-t border-gray-200 px-6 py-4 flex justify-end gap-3">
          <button class="px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors" @click="showCategoryModal = false">
            取消
          </button>
          <button class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors">
            {{ isEditingCategory ? '更新分类' : '创建分类' }}
          </button>
        </div>
      </div>
    </div>
    
    <!-- 确认删除模态框 -->
    <div v-if="showDeleteConfirm" class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
      <div class="bg-white rounded-xl shadow-2xl w-full max-w-md animate-fadeIn">
        <div class="p-6 text-center">
          <div class="w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-500 mx-auto mb-4">
            <i class="fa fa-trash-o text-2xl"></i>
          </div>
          <h3 class="text-xl font-bold mb-2">确认删除</h3>
          <p class="text-gray-600 mb-6">{{ deleteConfirmMessage }}</p>
          <div class="flex justify-center gap-3">
            <button class="px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors" @click="showDeleteConfirm = false">
              取消
            </button>
            <button class="px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors" @click="confirmDelete()">
              确认删除
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  data() {
    return {
      // 视图状态
      isAdminView: false,
      currentView: 'home',
      mobileMenuOpen: false,
      isScrolled: false,
      adminTab: 'articles',
      
      // 筛选状态
      filteredCategory: null,
      
      // 模态框状态
      showArticleEditor: false,
      isEditingArticle: false,
      showCategoryModal: false,
      isEditingCategory: false,
      showDeleteConfirm: false,
      deleteConfirmMessage: '',
      deleteItemId: null,
      deleteItemType: null,
      
      // 表单数据
      articleForm: {
        id: null,
        title: '',
        category: '',
        tagsStr: '',
        coverImage: '',
        content: '',
        status: 'published',
        publishedDate: '',
        media: []
      },
      
      categoryForm: {
        id: null,
        name: '',
        description: '',
        icon: 'fa-file-text-o'
      },
      
      // 示例数据 - 文章
      articles: [
        {
          id: 1,
          title: 'Vue 3 组件化开发最佳实践',
          summary: '本文介绍了Vue 3中组件化开发的最佳实践，包括组合式API的使用、组件通信和性能优化等内容。',
          content: `
            <h2>Vue 3 组件化开发最佳实践</h2>
            <p>Vue 3带来了许多新特性，尤其是组合式API，为组件化开发提供了更灵活的方式。本文将介绍一些在Vue 3中进行组件化开发的最佳实践。</p>
            
            <h3>1. 合理划分组件</h3>
            <p>组件应该遵循单一职责原则，每个组件只负责一件事情。例如，一个页面可以划分为头部、内容区、侧边栏和底部等组件。</p>
            
            <h3>2. 使用组合式API组织代码</h3>
            <p>组合式API允许我们按照逻辑功能组织代码，而不是按照选项类型。这使得代码更易于理解和维护。</p>
            <pre><code>
            &lt;script setup&gt;
            import { ref, onMounted } from 'vue'
            
            // 状态
            const count = ref(0)
            
            // 方法
            function increment() {
              count.value++
            }
            
            // 生命周期
            onMounted(() => {
              console.log('Component mounted')
            })
            &lt;/script&gt;
            </code></pre>
            
            <h3>3. 组件通信方式选择</h3>
            <p>Vue 3提供了多种组件通信方式，应根据场景选择合适的方式：</p>
            <ul>
              <li>父子组件：props和emit</li>
              <li>跨组件：provide和inject</li>
              <li>全局状态：Pinia或Vuex</li>
            </ul>
            
            <h3>4. 性能优化</h3>
            <p>组件化开发中需要注意性能问题，例如：</p>
            <ul>
              <li>使用&lt;teleport&gt;处理模态框等组件</li>
              <li>使用v-memo缓存组件渲染结果</li>
              <li>合理使用异步组件</li>
            </ul>
            
            <h3>结语</h3>
            <p>良好的组件化设计可以显著提高代码的可维护性和复用性。希望本文介绍的最佳实践能帮助你更好地进行Vue 3开发。</p>
          `,
          coverImage: 'https://picsum.photos/id/0/800/400',
          category: '前端开发',
          tags: ['Vue', '前端', '组件化'],
          author: '张开发',
          authorAvatar: 'https://picsum.photos/id/1005/100/100',
          authorBio: '资深前端工程师，Vue.js 爱好者，拥有5年前端开发经验。',
          publishedDate: '2023-06-15',
          views: 1243,
          likes: 89,
          commentsCount: 32,
          comments: [
            {
              id: 101,
              articleId: 1,
              author: '李同学',
              authorAvatar: 'https://picsum.photos/id/1012/100/100',
              content: '非常实用的文章，学习到了很多Vue 3组件化的技巧，谢谢分享！',
              timestamp: '2023-06-16T10:23:45',
              likes: 15,
              replies: [
                {
                  id: 1011,
                  author: '张开发',
                  authorAvatar: 'https://picsum.photos/id/1005/100/100',
                  content: '感谢支持，有任何问题欢迎交流！',
                  timestamp: '2023-06-16T14:12:30',
                  likes: 5
                }
              ]
            },
            {
              id: 102,
              articleId: 1,
              author: '王工程师',
              authorAvatar: 'https://picsum.photos/id/1025/100/100',
              content: '关于组件通信部分，我觉得还可以补充一下使用Pinia的案例，这样会更全面。',
              timestamp: '2023-06-17T09:05:12',
              likes: 8,
              replies: []
            }
          ]
        },
        {
          id: 2,
          title: 'Python数据分析入门指南',
          summary: '本文为初学者提供了Python数据分析的入门指南，包括常用库介绍、基本流程和实战案例。',
          content: '<p>Python数据分析入门指南内容...</p>',
          coverImage: 'https://picsum.photos/id/180/800/400',
          category: '数据分析',
          tags: ['Python', '数据分析', '入门'],
          author: '李数据',
          authorAvatar: 'https://picsum.photos/id/1010/100/100',
          authorBio: '数据科学家，擅长Python数据分析和机器学习，著有《Python数据处理实战》。',
          publishedDate: '2023-06-10',
          views: 987,
          likes: 65,
          commentsCount: 24,
          comments: []
        },
        {
          id: 3,
          title: 'React性能优化的10个技巧',
          summary: '本文总结了10个实用的React性能优化技巧，帮助你构建更高效的React应用。',
          content: '<p>React性能优化的10个技巧内容...</p>',
          coverImage: 'https://picsum.photos/id/48/800/400',
          category: '前端开发',
          tags: ['React', '性能优化', '前端'],
          author: '赵前端',
          authorAvatar: 'https://picsum.photos/id/1027/100/100',
          authorBio: '全栈开发工程师，React技术专家，拥有多年大型应用开发经验。',
          publishedDate: '2023-06-05',
          views: 1567,
          likes: 120,
          commentsCount: 45,
          comments: []
        },
        {
          id: 4,
          title: '机器学习在金融领域的应用',
          summary: '本文探讨了机器学习技术在金融领域的各种应用场景，包括风险评估、欺诈检测等。',
          content: '<p>机器学习在金融领域的应用内容...</p>',
          coverImage: 'https://picsum.photos/id/160/800/400',
          category: '人工智能',
          tags: ['机器学习', '金融', 'AI'],
          author: '陈智能',
          authorAvatar: 'https://picsum.photos/id/1074/100/100',
          authorBio: 'AI研究员，专注于机器学习在金融科技领域的应用研究。',
          publishedDate: '2023-05-28',
          views: 876,
          likes: 54,
          commentsCount: 18,
          comments: []
        },
        {
          id: 5,
          title: 'Docker容器化部署最佳实践',
          summary: '本文介绍了使用Docker进行容器化部署的最佳实践，包括镜像优化、容器编排等内容。',
          content: '<p>Docker容器化部署最佳实践内容...</p>',
          coverImage: 'https://picsum.photos/id/119/800/400',
          category: '后端开发',
          tags: ['Docker', '容器化', '部署'],
          author: '刘运维',
          authorAvatar: 'https://picsum.photos/id/1066/100/100',
          authorBio: 'DevOps工程师，容器技术专家，擅长自动化部署和运维。',
          publishedDate: '2023-05-20',
          views: 1123,
          likes: 78,
          commentsCount: 31,
          comments: []
        },
        {
          id: 6,
          title: 'UI设计中的色彩理论',
          summary: '本文讲解了UI设计中的色彩理论，包括色彩搭配原则、情感传达和实际应用案例。',
          content: '<p>UI设计中的色彩理论内容...</p>',
          coverImage: 'https://picsum.photos/id/96/800/400',
          category: '设计',
          tags: ['UI设计', '色彩理论', '设计原则'],
          author: '孙设计',
          authorAvatar: 'https://picsum.photos/id/1062/100/100',
          authorBio: '资深UI/UX设计师，曾任职于多家知名互联网公司，专注用户体验设计。',
          publishedDate: '2023-05-15',
          views: 765,
          likes: 43,
          commentsCount: 15,
          comments: []
        }
      ],
      
      // 示例数据 - 分类
      categories: [
        { id: 1, name: '前端开发', description: '包括HTML、CSS、JavaScript等前端技术和框架相关内容', icon: 'fa-code', count: 28, lastUpdated: '2023-06-15' },
        { id: 2, name: '后端开发', description: '服务器端开发技术、数据库、API设计等相关内容', icon: 'fa-server', count: 21, lastUpdated: '2023-05-20' },
        { id: 3, name: '数据分析', description: '数据处理、分析、可视化等相关技术和工具', icon: 'fa-bar-chart', count: 15, lastUpdated: '2023-06-10' },
        { id: 4, name: '人工智能', description: '机器学习、深度学习、自然语言处理等AI相关内容', icon: 'fa-brain', count: 19, lastUpdated: '2023-05-28' },
        { id: 5, name: '设计', description: 'UI/UX设计、交互设计、视觉设计等相关内容', icon: 'fa-paint-brush', count: 12, lastUpdated: '2023-05-15' },
        { id: 6, name: '移动开发', description: 'iOS、Android应用开发相关技术和框架', icon: 'fa-mobile', count: 8, lastUpdated: '2023-05-10' }
      ],
      
      // 可用图标列表
      availableIcons: [
        'fa-code', 'fa-server', 'fa-bar-chart', 'fa-brain', 
        'fa-paint-brush', 'fa-mobile', 'fa-database', 'fa-cloud',
        'fa-file-text-o', 'fa-image', 'fa-video-camera', 'fa-music'
      ],
      
      // 当前文章
      currentArticle: null,
      
      // 相关文章
      relatedArticles: []
    }
  },
  
  computed: {
    // 特色文章
    featuredArticles() {
      return this.articles.slice(0, 3);
    },
    
    // 最新文章
    latestArticles() {
      return [...this.articles].sort((a, b) => new Date(b.publishedDate) - new Date(a.publishedDate)).slice(0, 4);
    },
    
    // 筛选后的文章
    filteredArticles() {
      if (!this.filteredCategory) {
        return this.articles;
      }
      return this.articles.filter(article => article.category === this.filteredCategory);
    },
    
    // 所有评论
    allComments() {
      let comments = [];
      if (this.articles && Array.isArray(this.articles)) {
        this.articles.forEach(article => {
          if (article.comments && Array.isArray(article.comments)) {
            article.comments.forEach(comment => {
              comments.push({...comment, articleId: article.id});
              if (comment.replies && Array.isArray(comment.replies)) {
                comment.replies.forEach(reply => {
                  comments.push({...reply, articleId: article.id, isReply: true, parentId: comment.id});
                });
              }
            });
          }
        });
      }
      return comments.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp)).slice(0, 5);
    },
    
    // 总评论数
    totalComments() {
      let count = 0;
      this.articles.forEach(article => {
        count += article.commentsCount;
      });
      return count;
    },
    
    // 总访问量
    totalViews() {
      let count = 0;
      this.articles.forEach(article => {
        count += article.views;
      });
      return count;
    }
  },
  
  mounted() {
    // 监听滚动事件
    window.addEventListener('scroll', this.handleScroll);
    
    // 初始化日期
    this.articleForm.publishedDate = this.formatDateForInput(new Date());
  },
  
  beforeUnmount() {
    window.removeEventListener('scroll', this.handleScroll);
  },
  
  methods: {
    // 处理滚动事件
    handleScroll() {
      this.isScrolled = window.scrollY > 10;
    },
    
    // 切换视图
    switchView(view) {
      this.currentView = view;
      this.filteredCategory = null;
      // 滚动到顶部
      window.scrollTo(0, 0);
    },
    
    // 切换前后台视图
    toggleAdminView() {
      this.isAdminView = !this.isAdminView;
      // 滚动到顶部
      window.scrollTo(0, 0);
    },
    
    // 根据分类筛选文章
    filterArticlesByCategory(category) {
      this.filteredCategory = category;
      this.currentView = 'articles';
      // 滚动到顶部
      window.scrollTo(0, 0);
    },
    
    // 清除分类筛选
    clearCategoryFilter() {
      this.filteredCategory = null;
    },
    
    // 查看文章详情
    viewArticle(id) {
      this.currentArticle = this.articles.find(article => article.id === id);
      if (this.currentArticle) {
        // 查找相关文章（同分类，排除当前文章）
        this.relatedArticles = this.articles
          .filter(article => article.category === this.currentArticle.category && article.id !== id)
          .slice(0, 3);
        
        this.currentView = 'articleDetail';
        // 滚动到顶部
        window.scrollTo(0, 0);
      }
    },
    
    // 获取分类颜色
    getCategoryColor(category) {
      const colorMap = {
        '前端开发': 'bg-blue-500',
        '后端开发': 'bg-green-500',
        '数据分析': 'bg-yellow-500',
        '人工智能': 'bg-purple-500',
        '设计': 'bg-pink-500',
        '移动开发': 'bg-red-500'
      };
      return colorMap[category] || 'bg-gray-500';
    },
    
    // 格式化日期
    formatDate(dateString) {
      const date = new Date(dateString);
      return date.toLocaleDateString('zh-CN', { year: 'numeric', month: 'long', day: 'numeric' });
    },
    
    // 为输入框格式化日期
    formatDateForInput(date) {
      const year = date.getFullYear();
      const month = String(date.getMonth() + 1).padStart(2, '0');
      const day = String(date.getDate()).padStart(2, '0');
      return `${year}-${month}-${day}`;
    },
    
    // 格式化相对时间
    formatRelativeTime(timestamp) {
      const now = new Date();
      const past = new Date(timestamp);
      const diffMs = now - past;
      const diffMins = Math.floor(diffMs / (1000 * 60));
      const diffHours = Math.floor(diffMins / 60);
      const diffDays = Math.floor(diffHours / 24);
      
      if (diffMins < 1) {
        return '刚刚';
      } else if (diffMins < 60) {
        return `${diffMins}分钟前`;
      } else if (diffHours < 24) {
        return `${diffHours}小时前`;
      } else if (diffDays < 30) {
        return `${diffDays}天前`;
      } else {
        return this.formatDate(timestamp);
      }
    },
    
    // 根据ID获取文章标题
    getArticleTitleById(id) {
      const article = this.articles.find(a => a.id === id);
      return article ? article.title : '未知文章';
    },
    
    // 编辑文章
    editArticle(id) {
      const article = this.articles.find(a => a.id === id);
      if (article) {
        this.articleForm = {
          id: article.id,
          title: article.title,
          category: article.category,
          tagsStr: article.tags.join(','),
          coverImage: article.coverImage,
          content: article.content,
          status: 'published',
          publishedDate: this.formatDateForInput(new Date(article.publishedDate)),
          media: []
        };
        this.isEditingArticle = true;
        this.showArticleEditor = true;
        
        // 将内容设置到编辑器
        if (this.$refs.editorContent) {
          this.$refs.editorContent.innerHTML = article.content;
        }
      }
    },
    
    // 重置文章表单
    resetArticleForm() {
      this.articleForm = {
        id: null,
        title: '',
        category: '',
        tagsStr: '',
        coverImage: '',
        content: '',
        status: 'published',
        publishedDate: this.formatDateForInput(new Date()),
        media: []
      };
      
      // 清空编辑器
      if (this.$refs.editorContent) {
        this.$refs.editorContent.innerHTML = '<p>开始撰写您的文章内容...</p>';
      }
    },
    
    // 处理封面图片上传
    handleCoverImageUpload(e) {
      const file = e.target.files[0];
      if (file) {
        // 这里只是模拟上传，实际项目中应该发送到服务器
        const reader = new FileReader();
        reader.onload = (event) => {
          this.articleForm.coverImage = event.target.result;
        };
        reader.readAsDataURL(file);
      }
    },
    
    // 触发图片上传
    triggerImageUpload() {
      document.getElementById('imageUpload').click();
    },
    
    // 触发视频上传
    triggerVideoUpload() {
      document.getElementById('videoUpload').click();
    },
    
    // 触发音频上传
    triggerAudioUpload() {
      document.getElementById('audioUpload').click();
    },
    
    // 处理图片上传
    handleImageUpload(e) {
      const file = e.target.files[0];
      if (file) {
        // 模拟上传
        const reader = new FileReader();
        reader.onload = (event) => {
          this.articleForm.media.push({
            id: Date.now(),
            type: 'image',
            url: event.target.result,
            name: file.name
          });
        };
        reader.readAsDataURL(file);
      }
      // 重置input，允许重复上传同一文件
      e.target.value = '';
    },
    
    // 处理视频上传
    handleVideoUpload(e) {
      const file = e.target.files[0];
      if (file) {
        // 模拟上传
        this.articleForm.media.push({
          id: Date.now(),
          type: 'video',
          url: '#',
          name: file.name
        });
      }
      e.target.value = '';
    },
    
    // 处理音频上传
    handleAudioUpload(e) {
      const file = e.target.files[0];
      if (file) {
        // 模拟上传
        this.articleForm.media.push({
          id: Date.now(),
          type: 'audio',
          url: '#',
          name: file.name
        });
      }
      e.target.value = '';
    },
    
    // 移除媒体
    removeMedia(id) {
      this.articleForm.media = this.articleForm.media.filter(media => media.id !== id);
    },
    
    // 编辑分类
    editCategory(id) {
      const category = this.categories.find(c => c.id === id);
      if (category) {
        this.categoryForm = { ...category };
        this.isEditingCategory = true;
        this.showCategoryModal = true;
      }
    },
    
    // 重置分类表单
    resetCategoryForm() {
      this.categoryForm = {
        id: null,
        name: '',
        description: '',
        icon: 'fa-file-text-o'
      };
      this.isEditingCategory = false;
    },
    
    // 删除文章
    deleteArticle(id) {
      const article = this.articles.find(a => a.id === id);
      if (article) {
        this.deleteItemId = id;
        this.deleteItemType = 'article';
        this.deleteConfirmMessage = `确定要删除文章《${article.title}》吗？此操作不可撤销。`;
        this.showDeleteConfirm = true;
      }
    },
    
    // 删除分类
    deleteCategory(id) {
      const category = this.categories.find(c => c.id === id);
      if (category) {
        this.deleteItemId = id;
        this.deleteItemType = 'category';
        this.deleteConfirmMessage = `确定要删除分类《${category.name}》吗？该分类下的${category.count}篇文章将受到影响。`;
        this.showDeleteConfirm = true;
      }
    },
    
    // 确认删除
    confirmDelete() {
      if (this.deleteItemType === 'article') {
        this.articles = this.articles.filter(a => a.id !== this.deleteItemId);
      } else if (this.deleteItemType === 'category') {
        this.categories = this.categories.filter(c => c.id !== this.deleteItemId);
      }
      this.showDeleteConfirm = false;
    }
  }
}
</script>

<style>

@import '@fortawesome/fontawesome-free/css/all.css';

/* 全局样式 */
#app {
  font-family: 'Inter', system-ui, -apple-system, sans-serif;
}

/* 自定义动画 */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-fadeIn {
  animation: fadeIn 0.3s ease-out forwards;
}

/* 文章内容样式 */
.article-content h2 {
  font-size: 1.5rem;
  font-weight: bold;
  margin-top: 1.5rem;
  margin-bottom: 1rem;
  color: #1a202c;
}

.article-content h3 {
  font-size: 1.25rem;
  font-weight: bold;
  margin-top: 1.25rem;
  margin-bottom: 0.75rem;
  color: #1a202c;
}

.article-content p {
  margin-bottom: 1rem;
  line-height: 1.6;
}

.article-content ul {
  margin-bottom: 1rem;
  padding-left: 1.5rem;
  list-style-type: disc;
}

.article-content li {
  margin-bottom: 0.5rem;
}

.article-content pre {
  background-color: #f7fafc;
  padding: 1rem;
  border-radius: 0.375rem;
  overflow-x: auto;
  margin-bottom: 1rem;
}

.article-content code {
  font-family: 'Fira Code', monospace;
  font-size: 0.875rem;
}
</style>
